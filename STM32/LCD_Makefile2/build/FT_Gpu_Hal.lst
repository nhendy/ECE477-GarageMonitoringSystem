ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 1


   1              		.cpu cortex-m7
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 6
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"FT_Gpu_Hal.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.Ft_Gpu_Hal_Init,"ax",%progbits
  18              		.align	1
  19              		.global	Ft_Gpu_Hal_Init
  20              		.syntax unified
  21              		.thumb
  22              		.thumb_func
  23              		.fpu fpv5-sp-d16
  25              	Ft_Gpu_Hal_Init:
  26              	.LFB138:
  27              		.file 1 "FT_Eve_Hal/FT_Gpu_Hal.c"
   1:FT_Eve_Hal/FT_Gpu_Hal.c **** /*
   2:FT_Eve_Hal/FT_Gpu_Hal.c **** 
   3:FT_Eve_Hal/FT_Gpu_Hal.c ****  Copyright (c) BridgeTek Pte Ltd 2015
   4:FT_Eve_Hal/FT_Gpu_Hal.c **** 
   5:FT_Eve_Hal/FT_Gpu_Hal.c ****  THIS SOFTWARE IS PROVIDED BY BridgeTek Pte Ltd "AS IS"
   6:FT_Eve_Hal/FT_Gpu_Hal.c ****  AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
   7:FT_Eve_Hal/FT_Gpu_Hal.c ****  OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL
   8:FT_Eve_Hal/FT_Gpu_Hal.c ****  BridgeTek Pte Ltd BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
   9:FT_Eve_Hal/FT_Gpu_Hal.c ****  SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT
  10:FT_Eve_Hal/FT_Gpu_Hal.c ****  OF SUBSTITUTE GOODS OR SERVICES LOSS OF USE, DATA, OR PROFITS OR BUSINESS INTERRUPTION)
  11:FT_Eve_Hal/FT_Gpu_Hal.c ****  HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR
  12:FT_Eve_Hal/FT_Gpu_Hal.c ****  TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
  13:FT_Eve_Hal/FT_Gpu_Hal.c ****  EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  14:FT_Eve_Hal/FT_Gpu_Hal.c **** 
  15:FT_Eve_Hal/FT_Gpu_Hal.c ****  FTDI DRIVERS MAY BE USED ONLY IN CONJUNCTION WITH PRODUCTS BASED ON FTDI PARTS.
  16:FT_Eve_Hal/FT_Gpu_Hal.c **** 
  17:FT_Eve_Hal/FT_Gpu_Hal.c ****  FTDI DRIVERS MAY BE DISTRIBUTED IN ANY FORM AS LONG AS LICENSE INFORMATION IS NOT MODIFIED.
  18:FT_Eve_Hal/FT_Gpu_Hal.c **** 
  19:FT_Eve_Hal/FT_Gpu_Hal.c ****  IF A CUSTOM VENDOR ID AND/OR PRODUCT ID OR DESCRIPTION STRING ARE USED, IT IS THE
  20:FT_Eve_Hal/FT_Gpu_Hal.c ****  RESPONSIBILITY OF THE PRODUCT MANUFACTURER TO MAINTAIN ANY CHANGES AND SUBSEQUENT WHQL
  21:FT_Eve_Hal/FT_Gpu_Hal.c ****  RE-CERTIFICATION AS A RESULT OF MAKING THESE CHANGES.
  22:FT_Eve_Hal/FT_Gpu_Hal.c **** 
  23:FT_Eve_Hal/FT_Gpu_Hal.c ****  */
  24:FT_Eve_Hal/FT_Gpu_Hal.c **** //#include <main.h>
  25:FT_Eve_Hal/FT_Gpu_Hal.c **** #include "FT_Platform.h"
  26:FT_Eve_Hal/FT_Gpu_Hal.c **** #include <stm32f7xx_hal.h>
  27:FT_Eve_Hal/FT_Gpu_Hal.c **** #include "main.h"
  28:FT_Eve_Hal/FT_Gpu_Hal.c **** #define FT800_PD_N	GPIO_PIN_0
  29:FT_Eve_Hal/FT_Gpu_Hal.c **** #define FT800_CS_N	GPIO_PIN_1
  30:FT_Eve_Hal/FT_Gpu_Hal.c **** #define MEM_WRITE							0x80			// FT812 Host Memory Write
  31:FT_Eve_Hal/FT_Gpu_Hal.c **** #define MEM_READ							0x00			// FT812 Host Memory Read
ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 2


  32:FT_Eve_Hal/FT_Gpu_Hal.c **** /* API to initialize the SPI interface */
  33:FT_Eve_Hal/FT_Gpu_Hal.c **** extern SPI_HandleTypeDef hspi1;
  34:FT_Eve_Hal/FT_Gpu_Hal.c **** extern UART_HandleTypeDef huart6;
  35:FT_Eve_Hal/FT_Gpu_Hal.c **** ft_bool_t Ft_Gpu_Hal_Init(Ft_Gpu_HalInit_t *halinit) {
  28              		.loc 1 35 0
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 8
  31              		@ frame_needed = 1, uses_anonymous_args = 0
  32              		@ link register save eliminated.
  33 0000 80B4     		push	{r7}
  34              	.LCFI0:
  35              		.cfi_def_cfa_offset 4
  36              		.cfi_offset 7, -4
  37 0002 83B0     		sub	sp, sp, #12
  38              	.LCFI1:
  39              		.cfi_def_cfa_offset 16
  40 0004 00AF     		add	r7, sp, #0
  41              	.LCFI2:
  42              		.cfi_def_cfa_register 7
  43 0006 7860     		str	r0, [r7, #4]
  36:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef STM32F7
  37:FT_Eve_Hal/FT_Gpu_Hal.c **** // GPIO, SPI are already initialized in main.c
  38:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
  39:FT_Eve_Hal/FT_Gpu_Hal.c **** 	return TRUE;
  44              		.loc 1 39 0
  45 0008 0123     		movs	r3, #1
  40:FT_Eve_Hal/FT_Gpu_Hal.c **** }
  46              		.loc 1 40 0
  47 000a 1846     		mov	r0, r3
  48 000c 0C37     		adds	r7, r7, #12
  49              	.LCFI3:
  50              		.cfi_def_cfa_offset 4
  51 000e BD46     		mov	sp, r7
  52              	.LCFI4:
  53              		.cfi_def_cfa_register 13
  54              		@ sp needed
  55 0010 5DF8047B 		ldr	r7, [sp], #4
  56              	.LCFI5:
  57              		.cfi_restore 7
  58              		.cfi_def_cfa_offset 0
  59 0014 7047     		bx	lr
  60              		.cfi_endproc
  61              	.LFE138:
  63              		.section	.text.Ft_Gpu_Hal_Open,"ax",%progbits
  64              		.align	1
  65              		.global	Ft_Gpu_Hal_Open
  66              		.syntax unified
  67              		.thumb
  68              		.thumb_func
  69              		.fpu fpv5-sp-d16
  71              	Ft_Gpu_Hal_Open:
  72              	.LFB139:
  41:FT_Eve_Hal/FT_Gpu_Hal.c **** 
  42:FT_Eve_Hal/FT_Gpu_Hal.c **** ft_bool_t Ft_Gpu_Hal_Open(Ft_Gpu_Hal_Context_t *host) {
  73              		.loc 1 42 0
  74              		.cfi_startproc
  75              		@ args = 0, pretend = 0, frame = 8
ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 3


  76              		@ frame_needed = 1, uses_anonymous_args = 0
  77              		@ link register save eliminated.
  78 0000 80B4     		push	{r7}
  79              	.LCFI6:
  80              		.cfi_def_cfa_offset 4
  81              		.cfi_offset 7, -4
  82 0002 83B0     		sub	sp, sp, #12
  83              	.LCFI7:
  84              		.cfi_def_cfa_offset 16
  85 0004 00AF     		add	r7, sp, #0
  86              	.LCFI8:
  87              		.cfi_def_cfa_register 7
  88 0006 7860     		str	r0, [r7, #4]
  43:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef FT900_PLATFORM
  44:FT_Eve_Hal/FT_Gpu_Hal.c **** 
  45:FT_Eve_Hal/FT_Gpu_Hal.c **** 	gpio_function(host->hal_config.spi_cs_pin_no, pad_spim_ss0); /* GPIO28 as CS */
  46:FT_Eve_Hal/FT_Gpu_Hal.c **** 	gpio_write(host->hal_config.spi_cs_pin_no, 1);
  47:FT_Eve_Hal/FT_Gpu_Hal.c **** 
  48:FT_Eve_Hal/FT_Gpu_Hal.c **** 	gpio_function(host->hal_config.pdn_pin_no, pad_gpio43);
  49:FT_Eve_Hal/FT_Gpu_Hal.c **** 	gpio_dir(host->hal_config.pdn_pin_no, pad_dir_output);
  50:FT_Eve_Hal/FT_Gpu_Hal.c **** 
  51:FT_Eve_Hal/FT_Gpu_Hal.c **** 	gpio_write(host->hal_config.pdn_pin_no,1);
  52:FT_Eve_Hal/FT_Gpu_Hal.c **** 
  53:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
  54:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef MSVC_FT800EMU
  55:FT_Eve_Hal/FT_Gpu_Hal.c **** 	Ft_GpuEmu_SPII2C_begin();
  56:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
  57:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef ARDUINO_PLATFORM_SPI
  58:FT_Eve_Hal/FT_Gpu_Hal.c **** 	pinMode(host->hal_config.pdn_pin_no, OUTPUT);
  59:FT_Eve_Hal/FT_Gpu_Hal.c **** 	digitalWrite(host->hal_config.pdn_pin_no, HIGH);
  60:FT_Eve_Hal/FT_Gpu_Hal.c **** 	pinMode(host->hal_config.spi_cs_pin_no, OUTPUT);
  61:FT_Eve_Hal/FT_Gpu_Hal.c **** 	digitalWrite(host->hal_config.spi_cs_pin_no, HIGH);
  62:FT_Eve_Hal/FT_Gpu_Hal.c **** 	SPI.begin();
  63:FT_Eve_Hal/FT_Gpu_Hal.c **** 	SPI.setClockDivider(SPI_CLOCK_DIV2);
  64:FT_Eve_Hal/FT_Gpu_Hal.c **** 	SPI.setBitOrder(MSBFIRST);
  65:FT_Eve_Hal/FT_Gpu_Hal.c **** 	SPI.setDataMode(SPI_MODE0);
  66:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
  67:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef MSVC_PLATFORM_SPI
  68:FT_Eve_Hal/FT_Gpu_Hal.c **** 	FT_STATUS status;
  69:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef MSVC_PLATFORM_LIBMPSSE
  70:FT_Eve_Hal/FT_Gpu_Hal.c **** 	ChannelConfig channelConf;			//channel configuration
  71:FT_Eve_Hal/FT_Gpu_Hal.c **** 
  72:FT_Eve_Hal/FT_Gpu_Hal.c **** 	/* configure the spi settings */
  73:FT_Eve_Hal/FT_Gpu_Hal.c **** 	channelConf.ClockRate = host->hal_config.spi_clockrate_khz * 1000;
  74:FT_Eve_Hal/FT_Gpu_Hal.c **** 	channelConf.LatencyTimer= 2;
  75:FT_Eve_Hal/FT_Gpu_Hal.c **** 	channelConf.configOptions = SPI_CONFIG_OPTION_MODE0 | SPI_CONFIG_OPTION_CS_DBUS3 | SPI_CONFIG_OPTI
  76:FT_Eve_Hal/FT_Gpu_Hal.c **** 	channelConf.Pin = 0x00000000; /*FinalVal-FinalDir-InitVal-InitDir (for dir 0=in, 1=out)*/
  77:FT_Eve_Hal/FT_Gpu_Hal.c **** 
  78:FT_Eve_Hal/FT_Gpu_Hal.c **** 	/* Open the first available channel */
  79:FT_Eve_Hal/FT_Gpu_Hal.c **** 	status = SPI_OpenChannel(host->hal_config.channel_no,(FT_HANDLE *)&host->hal_handle);
  80:FT_Eve_Hal/FT_Gpu_Hal.c **** 	if (FT_OK != status)
  81:FT_Eve_Hal/FT_Gpu_Hal.c **** 	{
  82:FT_Eve_Hal/FT_Gpu_Hal.c **** 		printf("SPI open channel failed %d %d\n",host->hal_config.channel_no,host->hal_handle);
  83:FT_Eve_Hal/FT_Gpu_Hal.c **** 		return FALSE;
  84:FT_Eve_Hal/FT_Gpu_Hal.c **** 	}
  85:FT_Eve_Hal/FT_Gpu_Hal.c **** 	status = SPI_InitChannel((FT_HANDLE)host->hal_handle,&channelConf);
  86:FT_Eve_Hal/FT_Gpu_Hal.c **** 	if (FT_OK != status)
ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 4


  87:FT_Eve_Hal/FT_Gpu_Hal.c **** 	{
  88:FT_Eve_Hal/FT_Gpu_Hal.c **** 		printf("SPI init channel failed %d %d\n",host->hal_config.channel_no,host->hal_handle);
  89:FT_Eve_Hal/FT_Gpu_Hal.c **** 		return FALSE;
  90:FT_Eve_Hal/FT_Gpu_Hal.c **** 	}
  91:FT_Eve_Hal/FT_Gpu_Hal.c **** 
  92:FT_Eve_Hal/FT_Gpu_Hal.c **** 	printf("\nhandle=0x%x status=0x%x\n",host->hal_handle,status);
  93:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
  94:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef MSVC_PLATFORM_Lib4222
  95:FT_Eve_Hal/FT_Gpu_Hal.c **** 	FT4222_Version Version4222;
  96:FT_Eve_Hal/FT_Gpu_Hal.c **** 	FT4222_ClockRate clock4222;
  97:FT_Eve_Hal/FT_Gpu_Hal.c **** 	GPIO_Dir gpioDir[4] = {GPIO_OUTPUT,GPIO_INPUT,GPIO_OUTPUT,GPIO_OUTPUT};
  98:FT_Eve_Hal/FT_Gpu_Hal.c **** 
  99:FT_Eve_Hal/FT_Gpu_Hal.c **** 	status = FT_Open(host->hal_config.channel_no,(FT_HANDLE *)&host->hal_handle);
 100:FT_Eve_Hal/FT_Gpu_Hal.c **** 	if (FT_OK != status)
 101:FT_Eve_Hal/FT_Gpu_Hal.c **** 	{
 102:FT_Eve_Hal/FT_Gpu_Hal.c **** 		printf("4222 open failed %d %d\n",host->hal_config.channel_no,host->hal_handle);
 103:FT_Eve_Hal/FT_Gpu_Hal.c **** 		return FALSE;
 104:FT_Eve_Hal/FT_Gpu_Hal.c **** 	}
 105:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 106:FT_Eve_Hal/FT_Gpu_Hal.c **** 	// no latency to usb
 107:FT_Eve_Hal/FT_Gpu_Hal.c **** 	status = FT_SetLatencyTimer(host->hal_handle, 2);
 108:FT_Eve_Hal/FT_Gpu_Hal.c **** 	if (FT_OK != status)
 109:FT_Eve_Hal/FT_Gpu_Hal.c **** 	{
 110:FT_Eve_Hal/FT_Gpu_Hal.c **** 		printf("FT_SetLatencyTimerfailed! %d\n",status);
 111:FT_Eve_Hal/FT_Gpu_Hal.c **** 		return 0;
 112:FT_Eve_Hal/FT_Gpu_Hal.c **** 	}
 113:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 114:FT_Eve_Hal/FT_Gpu_Hal.c **** 	status = FT4222_SPIMaster_Init(host->hal_handle, SPI_IO_SINGLE, CLK_DIV_32, CLK_ACTIVE_LOW, CLK_LE
 115:FT_Eve_Hal/FT_Gpu_Hal.c **** 	if (FT_OK != status)
 116:FT_Eve_Hal/FT_Gpu_Hal.c **** 	{
 117:FT_Eve_Hal/FT_Gpu_Hal.c **** 		printf("Init FT4222 as SPI master device failed! %d\n",status);
 118:FT_Eve_Hal/FT_Gpu_Hal.c **** 		return FALSE;
 119:FT_Eve_Hal/FT_Gpu_Hal.c **** 	}
 120:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 121:FT_Eve_Hal/FT_Gpu_Hal.c **** 	status = FT4222_SPI_SetDrivingStrength(host->hal_handle,DS_4MA, DS_4MA, DS_4MA);
 122:FT_Eve_Hal/FT_Gpu_Hal.c **** 	if (FT4222_OK != status)
 123:FT_Eve_Hal/FT_Gpu_Hal.c **** 	{
 124:FT_Eve_Hal/FT_Gpu_Hal.c **** 		printf("FT4222_SPI_SetDrivingStrength failed!\n");
 125:FT_Eve_Hal/FT_Gpu_Hal.c **** 		return 0;
 126:FT_Eve_Hal/FT_Gpu_Hal.c **** 	}
 127:FT_Eve_Hal/FT_Gpu_Hal.c **** 	FT4222_GetVersion(host->hal_handle, &Version4222);
 128:FT_Eve_Hal/FT_Gpu_Hal.c **** 	FT4222_SetClock(host->hal_handle, SYS_CLK_80);
 129:FT_Eve_Hal/FT_Gpu_Hal.c **** 	FT4222_GetClock(host->hal_handle, &clock4222);
 130:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 131:FT_Eve_Hal/FT_Gpu_Hal.c **** 	printf("\nhandle=0x%x status=0x%x version %d setclock %d\n",host->hal_handle,status,Version4222,cl
 132:FT_Eve_Hal/FT_Gpu_Hal.c **** 	/* Init GPIO for 4222 */
 133:FT_Eve_Hal/FT_Gpu_Hal.c **** 	status = FT4222_GPIO_Init(host->hal_handle, gpioDir);
 134:FT_Eve_Hal/FT_Gpu_Hal.c **** 	FT4222_GPIO_Write((FT_HANDLE)host->hal_handle,GPIO_PORT0,1);
 135:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 136:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
 137:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
 138:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 139:FT_Eve_Hal/FT_Gpu_Hal.c **** 	/* Initialize the context valriables */
 140:FT_Eve_Hal/FT_Gpu_Hal.c **** 	/* CS and PD pins are driven low by default in MX_GPIO_Init */
 141:FT_Eve_Hal/FT_Gpu_Hal.c **** 	host->ft_cmd_fifo_wp = host->ft_dl_buff_wp = 0;
  89              		.loc 1 141 0
  90 0008 7B68     		ldr	r3, [r7, #4]
ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 5


  91 000a 0022     		movs	r2, #0
  92 000c 5A81     		strh	r2, [r3, #10]	@ movhi
  93 000e 7B68     		ldr	r3, [r7, #4]
  94 0010 5A89     		ldrh	r2, [r3, #10]
  95 0012 7B68     		ldr	r3, [r7, #4]
  96 0014 1A81     		strh	r2, [r3, #8]	@ movhi
 142:FT_Eve_Hal/FT_Gpu_Hal.c **** 	host->spinumdummy = 1;//by default ft800/801/810/811 goes with single dummy byte for read
  97              		.loc 1 142 0
  98 0016 7B68     		ldr	r3, [r7, #4]
  99 0018 0122     		movs	r2, #1
 100 001a 5A75     		strb	r2, [r3, #21]
 143:FT_Eve_Hal/FT_Gpu_Hal.c **** 	host->spichannel = 0;
 101              		.loc 1 143 0
 102 001c 7B68     		ldr	r3, [r7, #4]
 103 001e 0022     		movs	r2, #0
 104 0020 1A75     		strb	r2, [r3, #20]
 144:FT_Eve_Hal/FT_Gpu_Hal.c **** 	host->status = FT_GPU_HAL_OPENED;
 105              		.loc 1 144 0
 106 0022 7B68     		ldr	r3, [r7, #4]
 107 0024 0022     		movs	r2, #0
 108 0026 1A73     		strb	r2, [r3, #12]
 145:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 146:FT_Eve_Hal/FT_Gpu_Hal.c **** 	return TRUE;
 109              		.loc 1 146 0
 110 0028 0123     		movs	r3, #1
 147:FT_Eve_Hal/FT_Gpu_Hal.c **** }
 111              		.loc 1 147 0
 112 002a 1846     		mov	r0, r3
 113 002c 0C37     		adds	r7, r7, #12
 114              	.LCFI9:
 115              		.cfi_def_cfa_offset 4
 116 002e BD46     		mov	sp, r7
 117              	.LCFI10:
 118              		.cfi_def_cfa_register 13
 119              		@ sp needed
 120 0030 5DF8047B 		ldr	r7, [sp], #4
 121              	.LCFI11:
 122              		.cfi_restore 7
 123              		.cfi_def_cfa_offset 0
 124 0034 7047     		bx	lr
 125              		.cfi_endproc
 126              	.LFE139:
 128              		.section	.text.Ft_Gpu_Hal_Close,"ax",%progbits
 129              		.align	1
 130              		.global	Ft_Gpu_Hal_Close
 131              		.syntax unified
 132              		.thumb
 133              		.thumb_func
 134              		.fpu fpv5-sp-d16
 136              	Ft_Gpu_Hal_Close:
 137              	.LFB140:
 148:FT_Eve_Hal/FT_Gpu_Hal.c **** ft_void_t Ft_Gpu_Hal_Close(Ft_Gpu_Hal_Context_t *host) {
 138              		.loc 1 148 0
 139              		.cfi_startproc
 140              		@ args = 0, pretend = 0, frame = 8
 141              		@ frame_needed = 1, uses_anonymous_args = 0
 142              		@ link register save eliminated.
ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 6


 143 0000 80B4     		push	{r7}
 144              	.LCFI12:
 145              		.cfi_def_cfa_offset 4
 146              		.cfi_offset 7, -4
 147 0002 83B0     		sub	sp, sp, #12
 148              	.LCFI13:
 149              		.cfi_def_cfa_offset 16
 150 0004 00AF     		add	r7, sp, #0
 151              	.LCFI14:
 152              		.cfi_def_cfa_register 7
 153 0006 7860     		str	r0, [r7, #4]
 149:FT_Eve_Hal/FT_Gpu_Hal.c **** 	host->status = FT_GPU_HAL_CLOSED;
 154              		.loc 1 149 0
 155 0008 7B68     		ldr	r3, [r7, #4]
 156 000a 0322     		movs	r2, #3
 157 000c 1A73     		strb	r2, [r3, #12]
 150:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef MSVC_PLATFORM_SPI
 151:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 152:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef MSVC_PLATFORM_LIBMPSSE
 153:FT_Eve_Hal/FT_Gpu_Hal.c **** 	/* Close the channel*/
 154:FT_Eve_Hal/FT_Gpu_Hal.c **** 	SPI_CloseChannel(host->hal_handle);
 155:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
 156:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 157:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef MSVC_PLATFORM_Lib4222
 158:FT_Eve_Hal/FT_Gpu_Hal.c **** 	FT4222_UnInitialize(host->hal_handle);
 159:FT_Eve_Hal/FT_Gpu_Hal.c **** 	FT_Close(host->hal_handle);
 160:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
 161:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 162:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
 163:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef ARDUINO_PLATFORM_SPI
 164:FT_Eve_Hal/FT_Gpu_Hal.c **** 	SPI.end();
 165:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
 166:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef MSVC_FT800EMU
 167:FT_Eve_Hal/FT_Gpu_Hal.c **** 	Ft_GpuEmu_SPII2C_end();
 168:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
 169:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 170:FT_Eve_Hal/FT_Gpu_Hal.c **** }
 158              		.loc 1 170 0
 159 000e 00BF     		nop
 160 0010 0C37     		adds	r7, r7, #12
 161              	.LCFI15:
 162              		.cfi_def_cfa_offset 4
 163 0012 BD46     		mov	sp, r7
 164              	.LCFI16:
 165              		.cfi_def_cfa_register 13
 166              		@ sp needed
 167 0014 5DF8047B 		ldr	r7, [sp], #4
 168              	.LCFI17:
 169              		.cfi_restore 7
 170              		.cfi_def_cfa_offset 0
 171 0018 7047     		bx	lr
 172              		.cfi_endproc
 173              	.LFE140:
 175              		.section	.text.Ft_Gpu_Hal_DeInit,"ax",%progbits
 176              		.align	1
 177              		.global	Ft_Gpu_Hal_DeInit
 178              		.syntax unified
ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 7


 179              		.thumb
 180              		.thumb_func
 181              		.fpu fpv5-sp-d16
 183              	Ft_Gpu_Hal_DeInit:
 184              	.LFB141:
 171:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 172:FT_Eve_Hal/FT_Gpu_Hal.c **** ft_void_t Ft_Gpu_Hal_DeInit() {
 185              		.loc 1 172 0
 186              		.cfi_startproc
 187              		@ args = 0, pretend = 0, frame = 0
 188              		@ frame_needed = 1, uses_anonymous_args = 0
 189              		@ link register save eliminated.
 190 0000 80B4     		push	{r7}
 191              	.LCFI18:
 192              		.cfi_def_cfa_offset 4
 193              		.cfi_offset 7, -4
 194 0002 00AF     		add	r7, sp, #0
 195              	.LCFI19:
 196              		.cfi_def_cfa_register 7
 173:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef MSVC_PLATFORM_SPI
 174:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 175:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef MSVC_PLATFORM_LIBMPSSE
 176:FT_Eve_Hal/FT_Gpu_Hal.c **** 	//Cleanup the MPSSE Lib
 177:FT_Eve_Hal/FT_Gpu_Hal.c **** 	Cleanup_libMPSSE();
 178:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
 179:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 180:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef MSVC_PLATFORM_Lib4222
 181:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 182:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
 183:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 184:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
 185:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef FT900_PLATFORM
 186:FT_Eve_Hal/FT_Gpu_Hal.c **** 	spi_uninit(SPIM);
 187:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
 188:FT_Eve_Hal/FT_Gpu_Hal.c **** }
 197              		.loc 1 188 0
 198 0004 00BF     		nop
 199 0006 BD46     		mov	sp, r7
 200              	.LCFI20:
 201              		.cfi_def_cfa_register 13
 202              		@ sp needed
 203 0008 5DF8047B 		ldr	r7, [sp], #4
 204              	.LCFI21:
 205              		.cfi_restore 7
 206              		.cfi_def_cfa_offset 0
 207 000c 7047     		bx	lr
 208              		.cfi_endproc
 209              	.LFE141:
 211              		.section	.rodata
 212              		.align	2
 213              	.LC0:
 214 0000 4641494C 		.ascii	"FAILED TO TRANSMIT in StartTransfer\012\000"
 214      45442054 
 214      4F205452 
 214      414E534D 
 214      49542069 
 215 0025 000000   		.align	2
ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 8


 216              	.LC1:
 217 0028 53554343 		.ascii	"SUCCESSFUL TRANSMISSION\012\000"
 217      45535346 
 217      554C2054 
 217      52414E53 
 217      4D495353 
 218              		.section	.text.Ft_Gpu_Hal_StartTransfer,"ax",%progbits
 219              		.align	1
 220              		.global	Ft_Gpu_Hal_StartTransfer
 221              		.syntax unified
 222              		.thumb
 223              		.thumb_func
 224              		.fpu fpv5-sp-d16
 226              	Ft_Gpu_Hal_StartTransfer:
 227              	.LFB142:
 189:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 190:FT_Eve_Hal/FT_Gpu_Hal.c **** /*The APIs for reading/writing transfer continuously only with small buffer system*/
 191:FT_Eve_Hal/FT_Gpu_Hal.c **** ft_void_t Ft_Gpu_Hal_StartTransfer(Ft_Gpu_Hal_Context_t *host,
 192:FT_Eve_Hal/FT_Gpu_Hal.c **** 		FT_GPU_TRANSFERDIR_T rw, ft_uint32_t addr) {
 228              		.loc 1 192 0
 229              		.cfi_startproc
 230              		@ args = 0, pretend = 0, frame = 32
 231              		@ frame_needed = 1, uses_anonymous_args = 0
 232 0000 80B5     		push	{r7, lr}
 233              	.LCFI22:
 234              		.cfi_def_cfa_offset 8
 235              		.cfi_offset 7, -8
 236              		.cfi_offset 14, -4
 237 0002 88B0     		sub	sp, sp, #32
 238              	.LCFI23:
 239              		.cfi_def_cfa_offset 40
 240 0004 00AF     		add	r7, sp, #0
 241              	.LCFI24:
 242              		.cfi_def_cfa_register 7
 243 0006 F860     		str	r0, [r7, #12]
 244 0008 0B46     		mov	r3, r1
 245 000a 7A60     		str	r2, [r7, #4]
 246 000c FB72     		strb	r3, [r7, #11]
 193:FT_Eve_Hal/FT_Gpu_Hal.c **** 	if (FT_GPU_READ == rw) {
 247              		.loc 1 193 0
 248 000e FB7A     		ldrb	r3, [r7, #11]	@ zero_extendqisi2
 249 0010 002B     		cmp	r3, #0
 250 0012 3AD1     		bne	.L8
 251              	.LBB2:
 194:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 195:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef STM32F7
 196:FT_Eve_Hal/FT_Gpu_Hal.c **** 		unsigned char cTempAddr[3];						// FT800 Memory Address
 197:FT_Eve_Hal/FT_Gpu_Hal.c **** 		unsigned char cZeroFill = ZERO;							// Dummy byte
 252              		.loc 1 197 0
 253 0014 0023     		movs	r3, #0
 254 0016 FB74     		strb	r3, [r7, #19]
 198:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 199:FT_Eve_Hal/FT_Gpu_Hal.c **** 		cTempAddr[2] = (char) (addr >> 16) | MEM_READ;// Compose the command and address to send
 255              		.loc 1 199 0
 256 0018 7B68     		ldr	r3, [r7, #4]
 257 001a 1B0C     		lsrs	r3, r3, #16
 258 001c DBB2     		uxtb	r3, r3
ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 9


 259 001e BB75     		strb	r3, [r7, #22]
 200:FT_Eve_Hal/FT_Gpu_Hal.c **** 		cTempAddr[1] = (char) (addr >> 8);						// middle byte
 260              		.loc 1 200 0
 261 0020 7B68     		ldr	r3, [r7, #4]
 262 0022 1B0A     		lsrs	r3, r3, #8
 263 0024 DBB2     		uxtb	r3, r3
 264 0026 7B75     		strb	r3, [r7, #21]
 201:FT_Eve_Hal/FT_Gpu_Hal.c **** 		cTempAddr[0] = (char) (addr);								// low byte
 265              		.loc 1 201 0
 266 0028 7B68     		ldr	r3, [r7, #4]
 267 002a DBB2     		uxtb	r3, r3
 268 002c 3B75     		strb	r3, [r7, #20]
 202:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 203:FT_Eve_Hal/FT_Gpu_Hal.c **** 		HAL_GPIO_WritePin(GPIOB, FT800_CS_N, GPIO_PIN_RESET);// Set chip select low
 269              		.loc 1 203 0
 270 002e 0022     		movs	r2, #0
 271 0030 0221     		movs	r1, #2
 272 0032 3148     		ldr	r0, .L19
 273 0034 FFF7FEFF 		bl	HAL_GPIO_WritePin
 274              	.LBB3:
 204:FT_Eve_Hal/FT_Gpu_Hal.c **** 		for (int i = 2; i >= 0; i--) {
 275              		.loc 1 204 0
 276 0038 0223     		movs	r3, #2
 277 003a FB61     		str	r3, [r7, #28]
 278 003c 16E0     		b	.L9
 279              	.L12:
 205:FT_Eve_Hal/FT_Gpu_Hal.c **** 			if (HAL_SPI_Transmit(&hspi1, (uint8_t *) &cTempAddr[i], 1,
 280              		.loc 1 205 0
 281 003e 07F11402 		add	r2, r7, #20
 282 0042 FB69     		ldr	r3, [r7, #28]
 283 0044 D118     		adds	r1, r2, r3
 284 0046 4FF0FF33 		mov	r3, #-1
 285 004a 0122     		movs	r2, #1
 286 004c 2B48     		ldr	r0, .L19+4
 287 004e FFF7FEFF 		bl	HAL_SPI_Transmit
 288 0052 0346     		mov	r3, r0
 289 0054 002B     		cmp	r3, #0
 290 0056 03D0     		beq	.L10
 291              	.LBB4:
 206:FT_Eve_Hal/FT_Gpu_Hal.c **** 			HAL_MAX_DELAY) != HAL_OK) {
 207:FT_Eve_Hal/FT_Gpu_Hal.c **** 				my_printf("FAILED TO TRANSMIT in StartTransfer\n");
 292              		.loc 1 207 0
 293 0058 2948     		ldr	r0, .L19+8
 294 005a FFF7FEFF 		bl	my_printf
 295              	.LBE4:
 296 005e 02E0     		b	.L11
 297              	.L10:
 298              	.LBB5:
 208:FT_Eve_Hal/FT_Gpu_Hal.c **** 			} 			// Send Memory Write plus high address byte
 209:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 210:FT_Eve_Hal/FT_Gpu_Hal.c **** 			else {
 211:FT_Eve_Hal/FT_Gpu_Hal.c **** 				my_printf("SUCCESSFUL TRANSMISSION\n");
 299              		.loc 1 211 0
 300 0060 2848     		ldr	r0, .L19+12
 301 0062 FFF7FEFF 		bl	my_printf
 302              	.L11:
 303              	.LBE5:
ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 10


 204:FT_Eve_Hal/FT_Gpu_Hal.c **** 			if (HAL_SPI_Transmit(&hspi1, (uint8_t *) &cTempAddr[i], 1,
 304              		.loc 1 204 0 discriminator 2
 305 0066 FB69     		ldr	r3, [r7, #28]
 306 0068 013B     		subs	r3, r3, #1
 307 006a FB61     		str	r3, [r7, #28]
 308              	.L9:
 204:FT_Eve_Hal/FT_Gpu_Hal.c **** 			if (HAL_SPI_Transmit(&hspi1, (uint8_t *) &cTempAddr[i], 1,
 309              		.loc 1 204 0 is_stmt 0 discriminator 1
 310 006c FB69     		ldr	r3, [r7, #28]
 311 006e 002B     		cmp	r3, #0
 312 0070 E5DA     		bge	.L12
 313              	.LBE3:
 212:FT_Eve_Hal/FT_Gpu_Hal.c **** 			}
 213:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 214:FT_Eve_Hal/FT_Gpu_Hal.c **** 		}
 215:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 216:FT_Eve_Hal/FT_Gpu_Hal.c **** 		HAL_SPI_Transmit(&hspi1, &cZeroFill, 1, HAL_MAX_DELAY);	// Send dummy byte
 314              		.loc 1 216 0 is_stmt 1
 315 0072 07F11301 		add	r1, r7, #19
 316 0076 4FF0FF33 		mov	r3, #-1
 317 007a 0122     		movs	r2, #1
 318 007c 1F48     		ldr	r0, .L19+4
 319 007e FFF7FEFF 		bl	HAL_SPI_Transmit
 217:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
 218:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef FT900_PLATFORM
 219:FT_Eve_Hal/FT_Gpu_Hal.c **** 		ft_uint8_t spidata[4];
 220:FT_Eve_Hal/FT_Gpu_Hal.c **** 		spidata[0] = (addr >> 16);
 221:FT_Eve_Hal/FT_Gpu_Hal.c **** 		spidata[1] = (addr >> 8);
 222:FT_Eve_Hal/FT_Gpu_Hal.c **** 		spidata[2] = addr &0xff;
 223:FT_Eve_Hal/FT_Gpu_Hal.c **** 		spi_open(SPIM, host->hal_config.spi_cs_pin_no);
 224:FT_Eve_Hal/FT_Gpu_Hal.c **** 		spi_writen(SPIM,spidata,3);
 225:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
 226:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 227:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef MSVC_PLATFORM_SPI
 228:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 229:FT_Eve_Hal/FT_Gpu_Hal.c **** 		ft_uint8_t Transfer_Array[4];
 230:FT_Eve_Hal/FT_Gpu_Hal.c **** 		ft_uint32_t SizeTransfered;
 231:FT_Eve_Hal/FT_Gpu_Hal.c **** 		ft_uint16_t SizeTransfered16;
 232:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 233:FT_Eve_Hal/FT_Gpu_Hal.c **** 		/* Compose the read packet */
 234:FT_Eve_Hal/FT_Gpu_Hal.c **** 		Transfer_Array[0] = addr >> 16;
 235:FT_Eve_Hal/FT_Gpu_Hal.c **** 		Transfer_Array[1] = addr >> 8;
 236:FT_Eve_Hal/FT_Gpu_Hal.c **** 		Transfer_Array[2] = addr;
 237:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 238:FT_Eve_Hal/FT_Gpu_Hal.c **** 		Transfer_Array[3] = 0; //Dummy Read byte
 239:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef MSVC_PLATFORM_LIBMPSSE
 240:FT_Eve_Hal/FT_Gpu_Hal.c **** 		SPI_Write((FT_HANDLE)host->hal_handle,Transfer_Array,sizeof(Transfer_Array),&SizeTransfered,SPI_T
 241:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
 242:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef MSVC_PLATFORM_Lib4222
 243:FT_Eve_Hal/FT_Gpu_Hal.c **** 		FT4222_GPIO_Write((FT_HANDLE)host->hal_handle,GPIO_PORT2,0);
 244:FT_Eve_Hal/FT_Gpu_Hal.c **** 		FT4222_SPIMaster_SingleWrite((FT_HANDLE)host->hal_handle, Transfer_Array,sizeof(Transfer_Array),&
 245:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
 246:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 247:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
 248:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 249:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef ARDUINO_PLATFORM_SPI
 250:FT_Eve_Hal/FT_Gpu_Hal.c **** 		digitalWrite(host->hal_config.spi_cs_pin_no, LOW);
ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 11


 251:FT_Eve_Hal/FT_Gpu_Hal.c **** 		SPI.transfer(addr >> 16);
 252:FT_Eve_Hal/FT_Gpu_Hal.c **** 		SPI.transfer(highByte(addr));
 253:FT_Eve_Hal/FT_Gpu_Hal.c **** 		SPI.transfer(lowByte(addr));
 254:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 255:FT_Eve_Hal/FT_Gpu_Hal.c **** 		SPI.transfer(0); //Dummy Read Byte
 256:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
 257:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 258:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef MSVC_FT800EMU
 259:FT_Eve_Hal/FT_Gpu_Hal.c **** 		Ft_GpuEmu_SPII2C_StartRead(addr);
 260:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
 261:FT_Eve_Hal/FT_Gpu_Hal.c **** 		host->status = FT_GPU_HAL_READING;
 320              		.loc 1 261 0
 321 0082 FB68     		ldr	r3, [r7, #12]
 322 0084 0122     		movs	r2, #1
 323 0086 1A73     		strb	r2, [r3, #12]
 324              	.LBE2:
 262:FT_Eve_Hal/FT_Gpu_Hal.c **** 	} else {
 263:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 264:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef STM32F7
 265:FT_Eve_Hal/FT_Gpu_Hal.c **** 		unsigned char cTempAddr[3];						// FT800 Memory Address
 266:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 267:FT_Eve_Hal/FT_Gpu_Hal.c **** 		cTempAddr[2] = (char) (addr >> 16) | MEM_WRITE;	// Compose the command and address to send
 268:FT_Eve_Hal/FT_Gpu_Hal.c **** 		cTempAddr[1] = (char) (addr >> 8);						// middle byte
 269:FT_Eve_Hal/FT_Gpu_Hal.c **** 		cTempAddr[0] = (char) (addr);								// low byte
 270:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 271:FT_Eve_Hal/FT_Gpu_Hal.c **** 		HAL_GPIO_WritePin(GPIOB, FT800_CS_N, GPIO_PIN_RESET);// Set chip select low
 272:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 273:FT_Eve_Hal/FT_Gpu_Hal.c **** 		for (int i = 2; i >= 0; i--) {
 274:FT_Eve_Hal/FT_Gpu_Hal.c **** 			if (HAL_SPI_Transmit(&hspi1, (uint8_t *) &cTempAddr[i], 1,
 275:FT_Eve_Hal/FT_Gpu_Hal.c **** 			HAL_MAX_DELAY) != HAL_OK) {
 276:FT_Eve_Hal/FT_Gpu_Hal.c **** 				my_printf("FAILED TO TRANSMIT in StartTransfer\n");
 277:FT_Eve_Hal/FT_Gpu_Hal.c **** 			} 			// Send Memory Write plus high address byte
 278:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 279:FT_Eve_Hal/FT_Gpu_Hal.c **** 			else {
 280:FT_Eve_Hal/FT_Gpu_Hal.c **** 				my_printf("SUCCESSFUL TRANSMISSION\n");
 281:FT_Eve_Hal/FT_Gpu_Hal.c **** 			}
 282:FT_Eve_Hal/FT_Gpu_Hal.c **** 		}
 283:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
 284:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef FT900_PLATFORM
 285:FT_Eve_Hal/FT_Gpu_Hal.c **** 		ft_uint8_t spidata[4];
 286:FT_Eve_Hal/FT_Gpu_Hal.c **** 		spidata[0] = (0x80|(addr >> 16));
 287:FT_Eve_Hal/FT_Gpu_Hal.c **** 		spidata[1] = (addr >> 8);
 288:FT_Eve_Hal/FT_Gpu_Hal.c **** 		spidata[2] = addr;
 289:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 290:FT_Eve_Hal/FT_Gpu_Hal.c **** 		spi_open(SPIM, host->hal_config.spi_cs_pin_no);
 291:FT_Eve_Hal/FT_Gpu_Hal.c **** 		spi_writen(SPIM,spidata,3);
 292:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 293:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
 294:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 295:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef MSVC_PLATFORM_SPI
 296:FT_Eve_Hal/FT_Gpu_Hal.c **** 		ft_uint8_t Transfer_Array[3];
 297:FT_Eve_Hal/FT_Gpu_Hal.c **** 		ft_uint32_t SizeTransfered;
 298:FT_Eve_Hal/FT_Gpu_Hal.c **** 		ft_uint16_t SizeTransfered16;
 299:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 300:FT_Eve_Hal/FT_Gpu_Hal.c **** 		/* Compose the read packet */
 301:FT_Eve_Hal/FT_Gpu_Hal.c **** 		Transfer_Array[0] = (0x80 | (addr >> 16));
 302:FT_Eve_Hal/FT_Gpu_Hal.c **** 		Transfer_Array[1] = addr >> 8;
ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 12


 303:FT_Eve_Hal/FT_Gpu_Hal.c **** 		Transfer_Array[2] = addr;
 304:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef MSVC_PLATFORM_LIBMPSSE
 305:FT_Eve_Hal/FT_Gpu_Hal.c **** 		SPI_Write((FT_HANDLE)host->hal_handle,Transfer_Array,3,&SizeTransfered,SPI_TRANSFER_OPTIONS_SIZE_
 306:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
 307:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef MSVC_PLATFORM_Lib4222
 308:FT_Eve_Hal/FT_Gpu_Hal.c **** 		FT4222_GPIO_Write((FT_HANDLE)host->hal_handle,GPIO_PORT2,0);
 309:FT_Eve_Hal/FT_Gpu_Hal.c **** 		FT4222_SPIMaster_SingleWrite((FT_HANDLE)host->hal_handle, Transfer_Array,sizeof(Transfer_Array),&
 310:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
 311:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
 312:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef ARDUINO_PLATFORM_SPI
 313:FT_Eve_Hal/FT_Gpu_Hal.c **** 		digitalWrite(host->hal_config.spi_cs_pin_no, LOW);
 314:FT_Eve_Hal/FT_Gpu_Hal.c **** 		SPI.transfer(0x80 | (addr >> 16));
 315:FT_Eve_Hal/FT_Gpu_Hal.c **** 		SPI.transfer(highByte(addr));
 316:FT_Eve_Hal/FT_Gpu_Hal.c **** 		SPI.transfer(lowByte(addr));
 317:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
 318:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef MSVC_FT800EMU
 319:FT_Eve_Hal/FT_Gpu_Hal.c **** 		Ft_GpuEmu_SPII2C_StartWrite(addr);
 320:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
 321:FT_Eve_Hal/FT_Gpu_Hal.c **** 		host->status = FT_GPU_HAL_WRITING;
 322:FT_Eve_Hal/FT_Gpu_Hal.c **** 	}
 323:FT_Eve_Hal/FT_Gpu_Hal.c **** }
 325              		.loc 1 323 0
 326 0088 32E0     		b	.L18
 327              	.L8:
 328              	.LBB6:
 267:FT_Eve_Hal/FT_Gpu_Hal.c **** 		cTempAddr[1] = (char) (addr >> 8);						// middle byte
 329              		.loc 1 267 0
 330 008a 7B68     		ldr	r3, [r7, #4]
 331 008c 1B0C     		lsrs	r3, r3, #16
 332 008e DBB2     		uxtb	r3, r3
 333 0090 63F07F03 		orn	r3, r3, #127
 334 0094 DBB2     		uxtb	r3, r3
 335 0096 BB74     		strb	r3, [r7, #18]
 268:FT_Eve_Hal/FT_Gpu_Hal.c **** 		cTempAddr[0] = (char) (addr);								// low byte
 336              		.loc 1 268 0
 337 0098 7B68     		ldr	r3, [r7, #4]
 338 009a 1B0A     		lsrs	r3, r3, #8
 339 009c DBB2     		uxtb	r3, r3
 340 009e 7B74     		strb	r3, [r7, #17]
 269:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 341              		.loc 1 269 0
 342 00a0 7B68     		ldr	r3, [r7, #4]
 343 00a2 DBB2     		uxtb	r3, r3
 344 00a4 3B74     		strb	r3, [r7, #16]
 271:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 345              		.loc 1 271 0
 346 00a6 0022     		movs	r2, #0
 347 00a8 0221     		movs	r1, #2
 348 00aa 1348     		ldr	r0, .L19
 349 00ac FFF7FEFF 		bl	HAL_GPIO_WritePin
 350              	.LBB7:
 273:FT_Eve_Hal/FT_Gpu_Hal.c **** 			if (HAL_SPI_Transmit(&hspi1, (uint8_t *) &cTempAddr[i], 1,
 351              		.loc 1 273 0
 352 00b0 0223     		movs	r3, #2
 353 00b2 BB61     		str	r3, [r7, #24]
 354 00b4 16E0     		b	.L14
 355              	.L17:
ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 13


 274:FT_Eve_Hal/FT_Gpu_Hal.c **** 			HAL_MAX_DELAY) != HAL_OK) {
 356              		.loc 1 274 0
 357 00b6 07F11002 		add	r2, r7, #16
 358 00ba BB69     		ldr	r3, [r7, #24]
 359 00bc D118     		adds	r1, r2, r3
 360 00be 4FF0FF33 		mov	r3, #-1
 361 00c2 0122     		movs	r2, #1
 362 00c4 0D48     		ldr	r0, .L19+4
 363 00c6 FFF7FEFF 		bl	HAL_SPI_Transmit
 364 00ca 0346     		mov	r3, r0
 365 00cc 002B     		cmp	r3, #0
 366 00ce 03D0     		beq	.L15
 367              	.LBB8:
 276:FT_Eve_Hal/FT_Gpu_Hal.c **** 			} 			// Send Memory Write plus high address byte
 368              		.loc 1 276 0
 369 00d0 0B48     		ldr	r0, .L19+8
 370 00d2 FFF7FEFF 		bl	my_printf
 371              	.LBE8:
 372 00d6 02E0     		b	.L16
 373              	.L15:
 374              	.LBB9:
 280:FT_Eve_Hal/FT_Gpu_Hal.c **** 			}
 375              		.loc 1 280 0
 376 00d8 0A48     		ldr	r0, .L19+12
 377 00da FFF7FEFF 		bl	my_printf
 378              	.L16:
 379              	.LBE9:
 273:FT_Eve_Hal/FT_Gpu_Hal.c **** 			if (HAL_SPI_Transmit(&hspi1, (uint8_t *) &cTempAddr[i], 1,
 380              		.loc 1 273 0 discriminator 2
 381 00de BB69     		ldr	r3, [r7, #24]
 382 00e0 013B     		subs	r3, r3, #1
 383 00e2 BB61     		str	r3, [r7, #24]
 384              	.L14:
 273:FT_Eve_Hal/FT_Gpu_Hal.c **** 			if (HAL_SPI_Transmit(&hspi1, (uint8_t *) &cTempAddr[i], 1,
 385              		.loc 1 273 0 is_stmt 0 discriminator 1
 386 00e4 BB69     		ldr	r3, [r7, #24]
 387 00e6 002B     		cmp	r3, #0
 388 00e8 E5DA     		bge	.L17
 389              	.LBE7:
 321:FT_Eve_Hal/FT_Gpu_Hal.c **** 	}
 390              		.loc 1 321 0 is_stmt 1
 391 00ea FB68     		ldr	r3, [r7, #12]
 392 00ec 0222     		movs	r2, #2
 393 00ee 1A73     		strb	r2, [r3, #12]
 394              	.L18:
 395              	.LBE6:
 396              		.loc 1 323 0
 397 00f0 00BF     		nop
 398 00f2 2037     		adds	r7, r7, #32
 399              	.LCFI25:
 400              		.cfi_def_cfa_offset 8
 401 00f4 BD46     		mov	sp, r7
 402              	.LCFI26:
 403              		.cfi_def_cfa_register 13
 404              		@ sp needed
 405 00f6 80BD     		pop	{r7, pc}
 406              	.L20:
ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 14


 407              		.align	2
 408              	.L19:
 409 00f8 00040240 		.word	1073873920
 410 00fc 00000000 		.word	hspi1
 411 0100 00000000 		.word	.LC0
 412 0104 28000000 		.word	.LC1
 413              		.cfi_endproc
 414              	.LFE142:
 416              		.section	.text.Ft_Gpu_Hal_StartCmdTransfer,"ax",%progbits
 417              		.align	1
 418              		.global	Ft_Gpu_Hal_StartCmdTransfer
 419              		.syntax unified
 420              		.thumb
 421              		.thumb_func
 422              		.fpu fpv5-sp-d16
 424              	Ft_Gpu_Hal_StartCmdTransfer:
 425              	.LFB143:
 324:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 325:FT_Eve_Hal/FT_Gpu_Hal.c **** /*The APIs for writing transfer continuously only*/
 326:FT_Eve_Hal/FT_Gpu_Hal.c **** ft_void_t Ft_Gpu_Hal_StartCmdTransfer(Ft_Gpu_Hal_Context_t *host,
 327:FT_Eve_Hal/FT_Gpu_Hal.c **** 		FT_GPU_TRANSFERDIR_T rw, ft_uint16_t count) {
 426              		.loc 1 327 0
 427              		.cfi_startproc
 428              		@ args = 0, pretend = 0, frame = 8
 429              		@ frame_needed = 1, uses_anonymous_args = 0
 430 0000 80B5     		push	{r7, lr}
 431              	.LCFI27:
 432              		.cfi_def_cfa_offset 8
 433              		.cfi_offset 7, -8
 434              		.cfi_offset 14, -4
 435 0002 82B0     		sub	sp, sp, #8
 436              	.LCFI28:
 437              		.cfi_def_cfa_offset 16
 438 0004 00AF     		add	r7, sp, #0
 439              	.LCFI29:
 440              		.cfi_def_cfa_register 7
 441 0006 7860     		str	r0, [r7, #4]
 442 0008 0B46     		mov	r3, r1
 443 000a FB70     		strb	r3, [r7, #3]
 444 000c 1346     		mov	r3, r2	@ movhi
 445 000e 3B80     		strh	r3, [r7]	@ movhi
 328:FT_Eve_Hal/FT_Gpu_Hal.c **** 	Ft_Gpu_Hal_StartTransfer(host, rw, host->ft_cmd_fifo_wp + RAM_CMD);
 446              		.loc 1 328 0
 447 0010 7B68     		ldr	r3, [r7, #4]
 448 0012 1B89     		ldrh	r3, [r3, #8]
 449 0014 03F54212 		add	r2, r3, #3178496
 450 0018 FB78     		ldrb	r3, [r7, #3]	@ zero_extendqisi2
 451 001a 1946     		mov	r1, r3
 452 001c 7868     		ldr	r0, [r7, #4]
 453 001e FFF7FEFF 		bl	Ft_Gpu_Hal_StartTransfer
 329:FT_Eve_Hal/FT_Gpu_Hal.c **** }
 454              		.loc 1 329 0
 455 0022 00BF     		nop
 456 0024 0837     		adds	r7, r7, #8
 457              	.LCFI30:
 458              		.cfi_def_cfa_offset 8
 459 0026 BD46     		mov	sp, r7
ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 15


 460              	.LCFI31:
 461              		.cfi_def_cfa_register 13
 462              		@ sp needed
 463 0028 80BD     		pop	{r7, pc}
 464              		.cfi_endproc
 465              	.LFE143:
 467              		.section	.text.Ft_Gpu_Hal_TransferString,"ax",%progbits
 468              		.align	1
 469              		.global	Ft_Gpu_Hal_TransferString
 470              		.syntax unified
 471              		.thumb
 472              		.thumb_func
 473              		.fpu fpv5-sp-d16
 475              	Ft_Gpu_Hal_TransferString:
 476              	.LFB144:
 330:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 331:FT_Eve_Hal/FT_Gpu_Hal.c **** ft_void_t Ft_Gpu_Hal_TransferString(Ft_Gpu_Hal_Context_t *host,
 332:FT_Eve_Hal/FT_Gpu_Hal.c **** 		const ft_char8_t *string) {
 477              		.loc 1 332 0
 478              		.cfi_startproc
 479              		@ args = 0, pretend = 0, frame = 16
 480              		@ frame_needed = 1, uses_anonymous_args = 0
 481 0000 80B5     		push	{r7, lr}
 482              	.LCFI32:
 483              		.cfi_def_cfa_offset 8
 484              		.cfi_offset 7, -8
 485              		.cfi_offset 14, -4
 486 0002 84B0     		sub	sp, sp, #16
 487              	.LCFI33:
 488              		.cfi_def_cfa_offset 24
 489 0004 00AF     		add	r7, sp, #0
 490              	.LCFI34:
 491              		.cfi_def_cfa_register 7
 492 0006 7860     		str	r0, [r7, #4]
 493 0008 3960     		str	r1, [r7]
 333:FT_Eve_Hal/FT_Gpu_Hal.c **** 	ft_uint16_t length = strlen(string);
 494              		.loc 1 333 0
 495 000a 3868     		ldr	r0, [r7]
 496 000c FFF7FEFF 		bl	strlen
 497 0010 0346     		mov	r3, r0
 498 0012 FB81     		strh	r3, [r7, #14]	@ movhi
 334:FT_Eve_Hal/FT_Gpu_Hal.c **** 	while (length--) {
 499              		.loc 1 334 0
 500 0014 08E0     		b	.L23
 501              	.L24:
 335:FT_Eve_Hal/FT_Gpu_Hal.c **** 		Ft_Gpu_Hal_Transfer8(host, *string);
 502              		.loc 1 335 0
 503 0016 3B68     		ldr	r3, [r7]
 504 0018 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 505 001a 1946     		mov	r1, r3
 506 001c 7868     		ldr	r0, [r7, #4]
 507 001e FFF7FEFF 		bl	Ft_Gpu_Hal_Transfer8
 336:FT_Eve_Hal/FT_Gpu_Hal.c **** 		string++;
 508              		.loc 1 336 0
 509 0022 3B68     		ldr	r3, [r7]
 510 0024 0133     		adds	r3, r3, #1
 511 0026 3B60     		str	r3, [r7]
ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 16


 512              	.L23:
 334:FT_Eve_Hal/FT_Gpu_Hal.c **** 	while (length--) {
 513              		.loc 1 334 0
 514 0028 FB89     		ldrh	r3, [r7, #14]
 515 002a 5A1E     		subs	r2, r3, #1
 516 002c FA81     		strh	r2, [r7, #14]	@ movhi
 517 002e 002B     		cmp	r3, #0
 518 0030 F1D1     		bne	.L24
 337:FT_Eve_Hal/FT_Gpu_Hal.c **** 	}
 338:FT_Eve_Hal/FT_Gpu_Hal.c **** 	//Append one null as ending flag
 339:FT_Eve_Hal/FT_Gpu_Hal.c **** 	Ft_Gpu_Hal_Transfer8(host, 0);
 519              		.loc 1 339 0
 520 0032 0021     		movs	r1, #0
 521 0034 7868     		ldr	r0, [r7, #4]
 522 0036 FFF7FEFF 		bl	Ft_Gpu_Hal_Transfer8
 340:FT_Eve_Hal/FT_Gpu_Hal.c **** }
 523              		.loc 1 340 0
 524 003a 00BF     		nop
 525 003c 1037     		adds	r7, r7, #16
 526              	.LCFI35:
 527              		.cfi_def_cfa_offset 8
 528 003e BD46     		mov	sp, r7
 529              	.LCFI36:
 530              		.cfi_def_cfa_register 13
 531              		@ sp needed
 532 0040 80BD     		pop	{r7, pc}
 533              		.cfi_endproc
 534              	.LFE144:
 536              		.section	.rodata
 537 0041 000000   		.align	2
 538              	.LC2:
 539 0044 4641494C 		.ascii	"FAILED TO TRANSMIT IN Ft_Gpu_Hal_Transfer8\012\000"
 539      45442054 
 539      4F205452 
 539      414E534D 
 539      49542049 
 540              		.align	2
 541              	.LC3:
 542 0070 4641494C 		.ascii	"FAILED TO RECEIVE IN Ft_Gpu_Hal_Transfer8\012\000"
 542      45442054 
 542      4F205245 
 542      43454956 
 542      4520494E 
 543              		.section	.text.Ft_Gpu_Hal_Transfer8,"ax",%progbits
 544              		.align	1
 545              		.global	Ft_Gpu_Hal_Transfer8
 546              		.syntax unified
 547              		.thumb
 548              		.thumb_func
 549              		.fpu fpv5-sp-d16
 551              	Ft_Gpu_Hal_Transfer8:
 552              	.LFB145:
 341:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 342:FT_Eve_Hal/FT_Gpu_Hal.c **** ft_uint8_t Ft_Gpu_Hal_Transfer8(Ft_Gpu_Hal_Context_t *host, ft_uint8_t value) {
 553              		.loc 1 342 0
 554              		.cfi_startproc
 555              		@ args = 0, pretend = 0, frame = 16
ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 17


 556              		@ frame_needed = 1, uses_anonymous_args = 0
 557 0000 80B5     		push	{r7, lr}
 558              	.LCFI37:
 559              		.cfi_def_cfa_offset 8
 560              		.cfi_offset 7, -8
 561              		.cfi_offset 14, -4
 562 0002 84B0     		sub	sp, sp, #16
 563              	.LCFI38:
 564              		.cfi_def_cfa_offset 24
 565 0004 00AF     		add	r7, sp, #0
 566              	.LCFI39:
 567              		.cfi_def_cfa_register 7
 568 0006 7860     		str	r0, [r7, #4]
 569 0008 0B46     		mov	r3, r1
 570 000a FB70     		strb	r3, [r7, #3]
 343:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef STM32F7
 344:FT_Eve_Hal/FT_Gpu_Hal.c **** 	ft_uint8_t ReadByte;
 345:FT_Eve_Hal/FT_Gpu_Hal.c **** 	if (host->status == FT_GPU_HAL_WRITING) {
 571              		.loc 1 345 0
 572 000c 7B68     		ldr	r3, [r7, #4]
 573 000e 1B7B     		ldrb	r3, [r3, #12]	@ zero_extendqisi2
 574 0010 022B     		cmp	r3, #2
 575 0012 0DD1     		bne	.L26
 346:FT_Eve_Hal/FT_Gpu_Hal.c **** 		if(HAL_SPI_Transmit(&hspi1, &value, 1, HAL_MAX_DELAY) != HAL_OK){
 576              		.loc 1 346 0
 577 0014 F91C     		adds	r1, r7, #3
 578 0016 4FF0FF33 		mov	r3, #-1
 579 001a 0122     		movs	r2, #1
 580 001c 0E48     		ldr	r0, .L30
 581 001e FFF7FEFF 		bl	HAL_SPI_Transmit
 582 0022 0346     		mov	r3, r0
 583 0024 002B     		cmp	r3, #0
 584 0026 11D0     		beq	.L28
 585              	.LBB10:
 347:FT_Eve_Hal/FT_Gpu_Hal.c **** 			my_printf("FAILED TO TRANSMIT IN Ft_Gpu_Hal_Transfer8\n");
 586              		.loc 1 347 0
 587 0028 0C48     		ldr	r0, .L30+4
 588 002a FFF7FEFF 		bl	my_printf
 589 002e 0DE0     		b	.L28
 590              	.L26:
 591              	.LBE10:
 348:FT_Eve_Hal/FT_Gpu_Hal.c **** 		}
 349:FT_Eve_Hal/FT_Gpu_Hal.c **** 	} else {
 350:FT_Eve_Hal/FT_Gpu_Hal.c **** 		if(HAL_SPI_Receive(&hspi1, &ReadByte, 1, HAL_MAX_DELAY) != HAL_OK){
 592              		.loc 1 350 0
 593 0030 07F10F01 		add	r1, r7, #15
 594 0034 4FF0FF33 		mov	r3, #-1
 595 0038 0122     		movs	r2, #1
 596 003a 0748     		ldr	r0, .L30
 597 003c FFF7FEFF 		bl	HAL_SPI_Receive
 598 0040 0346     		mov	r3, r0
 599 0042 002B     		cmp	r3, #0
 600 0044 02D0     		beq	.L28
 601              	.LBB11:
 351:FT_Eve_Hal/FT_Gpu_Hal.c **** 			my_printf("FAILED TO RECEIVE IN Ft_Gpu_Hal_Transfer8\n");
 602              		.loc 1 351 0
 603 0046 0648     		ldr	r0, .L30+8
ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 18


 604 0048 FFF7FEFF 		bl	my_printf
 605              	.L28:
 606              	.LBE11:
 352:FT_Eve_Hal/FT_Gpu_Hal.c **** 		}
 353:FT_Eve_Hal/FT_Gpu_Hal.c **** 	}
 354:FT_Eve_Hal/FT_Gpu_Hal.c **** 	return ReadByte;
 607              		.loc 1 354 0
 608 004c FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 355:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
 356:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef FT900_PLATFORM
 357:FT_Eve_Hal/FT_Gpu_Hal.c **** 	ft_uint8_t ReadByte;
 358:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 359:FT_Eve_Hal/FT_Gpu_Hal.c **** 	if (host->status == FT_GPU_HAL_WRITING)
 360:FT_Eve_Hal/FT_Gpu_Hal.c **** 	{
 361:FT_Eve_Hal/FT_Gpu_Hal.c **** 		spi_write(SPIM,value);
 362:FT_Eve_Hal/FT_Gpu_Hal.c **** 	}
 363:FT_Eve_Hal/FT_Gpu_Hal.c **** 	else
 364:FT_Eve_Hal/FT_Gpu_Hal.c **** 	{
 365:FT_Eve_Hal/FT_Gpu_Hal.c **** 		spi_read(SPIM,ReadByte);
 366:FT_Eve_Hal/FT_Gpu_Hal.c **** 	}
 367:FT_Eve_Hal/FT_Gpu_Hal.c **** 	return ReadByte;
 368:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 369:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
 370:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef ARDUINO_PLATFORM_SPI
 371:FT_Eve_Hal/FT_Gpu_Hal.c **** 	return SPI.transfer(value);
 372:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
 373:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef MSVC_PLATFORM_SPI
 374:FT_Eve_Hal/FT_Gpu_Hal.c **** 	ft_uint32_t SizeTransfered;
 375:FT_Eve_Hal/FT_Gpu_Hal.c **** 	if (host->status == FT_GPU_HAL_WRITING)
 376:FT_Eve_Hal/FT_Gpu_Hal.c **** 	{
 377:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef MSVC_PLATFORM_LIBMPSSE
 378:FT_Eve_Hal/FT_Gpu_Hal.c **** 		SPI_Write(host->hal_handle,&value,sizeof(value),&SizeTransfered,SPI_TRANSFER_OPTIONS_SIZE_IN_BYTE
 379:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
 380:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef MSVC_PLATFORM_Lib4222
 381:FT_Eve_Hal/FT_Gpu_Hal.c **** 		ft_uint16_t SizeTransfered16;
 382:FT_Eve_Hal/FT_Gpu_Hal.c **** 		FT4222_SPIMaster_SingleWrite((FT_HANDLE)host->hal_handle, &value,sizeof(value),&SizeTransfered16,
 383:FT_Eve_Hal/FT_Gpu_Hal.c **** 		SizeTransfered = SizeTransfered16;
 384:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
 385:FT_Eve_Hal/FT_Gpu_Hal.c **** 	}
 386:FT_Eve_Hal/FT_Gpu_Hal.c **** 	else
 387:FT_Eve_Hal/FT_Gpu_Hal.c **** 	{
 388:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef MSVC_PLATFORM_LIBMPSSE
 389:FT_Eve_Hal/FT_Gpu_Hal.c **** 		SPI_Read(host->hal_handle,&value,sizeof(value),&SizeTransfered,SPI_TRANSFER_OPTIONS_SIZE_IN_BYTES
 390:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
 391:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef MSVC_PLATFORM_Lib4222
 392:FT_Eve_Hal/FT_Gpu_Hal.c **** 		ft_uint16_t SizeTransfered16;
 393:FT_Eve_Hal/FT_Gpu_Hal.c **** 		FT4222_SPIMaster_SingleRead((FT_HANDLE)host->hal_handle, &value,sizeof(value),&SizeTransfered16,T
 394:FT_Eve_Hal/FT_Gpu_Hal.c **** 		SizeTransfered = SizeTransfered16;
 395:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
 396:FT_Eve_Hal/FT_Gpu_Hal.c **** 	}
 397:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 398:FT_Eve_Hal/FT_Gpu_Hal.c **** 	if (SizeTransfered != sizeof(value))
 399:FT_Eve_Hal/FT_Gpu_Hal.c **** 	host->status = FT_GPU_HAL_STATUS_ERROR;
 400:FT_Eve_Hal/FT_Gpu_Hal.c **** 	return value;
 401:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
 402:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 403:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef MSVC_FT800EMU
ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 19


 404:FT_Eve_Hal/FT_Gpu_Hal.c **** 	return Ft_GpuEmu_SPII2C_transfer(value);
 405:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
 406:FT_Eve_Hal/FT_Gpu_Hal.c **** }
 609              		.loc 1 406 0
 610 004e 1846     		mov	r0, r3
 611 0050 1037     		adds	r7, r7, #16
 612              	.LCFI40:
 613              		.cfi_def_cfa_offset 8
 614 0052 BD46     		mov	sp, r7
 615              	.LCFI41:
 616              		.cfi_def_cfa_register 13
 617              		@ sp needed
 618 0054 80BD     		pop	{r7, pc}
 619              	.L31:
 620 0056 00BF     		.align	2
 621              	.L30:
 622 0058 00000000 		.word	hspi1
 623 005c 44000000 		.word	.LC2
 624 0060 70000000 		.word	.LC3
 625              		.cfi_endproc
 626              	.LFE145:
 628              		.section	.text.Ft_Gpu_Hal_Transfer16,"ax",%progbits
 629              		.align	1
 630              		.global	Ft_Gpu_Hal_Transfer16
 631              		.syntax unified
 632              		.thumb
 633              		.thumb_func
 634              		.fpu fpv5-sp-d16
 636              	Ft_Gpu_Hal_Transfer16:
 637              	.LFB146:
 407:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 408:FT_Eve_Hal/FT_Gpu_Hal.c **** ft_uint16_t Ft_Gpu_Hal_Transfer16(Ft_Gpu_Hal_Context_t *host, ft_uint16_t value) {
 638              		.loc 1 408 0
 639              		.cfi_startproc
 640              		@ args = 0, pretend = 0, frame = 16
 641              		@ frame_needed = 1, uses_anonymous_args = 0
 642 0000 80B5     		push	{r7, lr}
 643              	.LCFI42:
 644              		.cfi_def_cfa_offset 8
 645              		.cfi_offset 7, -8
 646              		.cfi_offset 14, -4
 647 0002 84B0     		sub	sp, sp, #16
 648              	.LCFI43:
 649              		.cfi_def_cfa_offset 24
 650 0004 00AF     		add	r7, sp, #0
 651              	.LCFI44:
 652              		.cfi_def_cfa_register 7
 653 0006 7860     		str	r0, [r7, #4]
 654 0008 0B46     		mov	r3, r1
 655 000a 7B80     		strh	r3, [r7, #2]	@ movhi
 409:FT_Eve_Hal/FT_Gpu_Hal.c **** 	ft_uint16_t retVal = 0;
 656              		.loc 1 409 0
 657 000c 0023     		movs	r3, #0
 658 000e FB81     		strh	r3, [r7, #14]	@ movhi
 410:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 411:FT_Eve_Hal/FT_Gpu_Hal.c **** 	if (host->status == FT_GPU_HAL_WRITING) {
 659              		.loc 1 411 0
ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 20


 660 0010 7B68     		ldr	r3, [r7, #4]
 661 0012 1B7B     		ldrb	r3, [r3, #12]	@ zero_extendqisi2
 662 0014 022B     		cmp	r3, #2
 663 0016 0ED1     		bne	.L33
 412:FT_Eve_Hal/FT_Gpu_Hal.c **** 		Ft_Gpu_Hal_Transfer8(host, value); 			//LSB first
 664              		.loc 1 412 0
 665 0018 7B88     		ldrh	r3, [r7, #2]	@ movhi
 666 001a DBB2     		uxtb	r3, r3
 667 001c 1946     		mov	r1, r3
 668 001e 7868     		ldr	r0, [r7, #4]
 669 0020 FFF7FEFF 		bl	Ft_Gpu_Hal_Transfer8
 413:FT_Eve_Hal/FT_Gpu_Hal.c **** 		Ft_Gpu_Hal_Transfer8(host, (value >> 8));
 670              		.loc 1 413 0
 671 0024 7B88     		ldrh	r3, [r7, #2]
 672 0026 1B0A     		lsrs	r3, r3, #8
 673 0028 9BB2     		uxth	r3, r3
 674 002a DBB2     		uxtb	r3, r3
 675 002c 1946     		mov	r1, r3
 676 002e 7868     		ldr	r0, [r7, #4]
 677 0030 FFF7FEFF 		bl	Ft_Gpu_Hal_Transfer8
 678 0034 11E0     		b	.L34
 679              	.L33:
 414:FT_Eve_Hal/FT_Gpu_Hal.c **** 	} else {
 415:FT_Eve_Hal/FT_Gpu_Hal.c **** 		retVal = Ft_Gpu_Hal_Transfer8(host, 0);
 680              		.loc 1 415 0
 681 0036 0021     		movs	r1, #0
 682 0038 7868     		ldr	r0, [r7, #4]
 683 003a FFF7FEFF 		bl	Ft_Gpu_Hal_Transfer8
 684 003e 0346     		mov	r3, r0
 685 0040 FB81     		strh	r3, [r7, #14]	@ movhi
 416:FT_Eve_Hal/FT_Gpu_Hal.c **** 		retVal |= (ft_uint16_t) Ft_Gpu_Hal_Transfer8(host, 0) << 8;
 686              		.loc 1 416 0
 687 0042 0021     		movs	r1, #0
 688 0044 7868     		ldr	r0, [r7, #4]
 689 0046 FFF7FEFF 		bl	Ft_Gpu_Hal_Transfer8
 690 004a 0346     		mov	r3, r0
 691 004c 1B02     		lsls	r3, r3, #8
 692 004e 1AB2     		sxth	r2, r3
 693 0050 B7F90E30 		ldrsh	r3, [r7, #14]
 694 0054 1343     		orrs	r3, r3, r2
 695 0056 1BB2     		sxth	r3, r3
 696 0058 FB81     		strh	r3, [r7, #14]	@ movhi
 697              	.L34:
 417:FT_Eve_Hal/FT_Gpu_Hal.c **** 	}
 418:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 419:FT_Eve_Hal/FT_Gpu_Hal.c **** 	return retVal;
 698              		.loc 1 419 0
 699 005a FB89     		ldrh	r3, [r7, #14]
 420:FT_Eve_Hal/FT_Gpu_Hal.c **** }
 700              		.loc 1 420 0
 701 005c 1846     		mov	r0, r3
 702 005e 1037     		adds	r7, r7, #16
 703              	.LCFI45:
 704              		.cfi_def_cfa_offset 8
 705 0060 BD46     		mov	sp, r7
 706              	.LCFI46:
 707              		.cfi_def_cfa_register 13
ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 21


 708              		@ sp needed
 709 0062 80BD     		pop	{r7, pc}
 710              		.cfi_endproc
 711              	.LFE146:
 713              		.section	.text.Ft_Gpu_Hal_Transfer32,"ax",%progbits
 714              		.align	1
 715              		.global	Ft_Gpu_Hal_Transfer32
 716              		.syntax unified
 717              		.thumb
 718              		.thumb_func
 719              		.fpu fpv5-sp-d16
 721              	Ft_Gpu_Hal_Transfer32:
 722              	.LFB147:
 421:FT_Eve_Hal/FT_Gpu_Hal.c **** ft_uint32_t Ft_Gpu_Hal_Transfer32(Ft_Gpu_Hal_Context_t *host, ft_uint32_t value) {
 723              		.loc 1 421 0
 724              		.cfi_startproc
 725              		@ args = 0, pretend = 0, frame = 16
 726              		@ frame_needed = 1, uses_anonymous_args = 0
 727 0000 80B5     		push	{r7, lr}
 728              	.LCFI47:
 729              		.cfi_def_cfa_offset 8
 730              		.cfi_offset 7, -8
 731              		.cfi_offset 14, -4
 732 0002 84B0     		sub	sp, sp, #16
 733              	.LCFI48:
 734              		.cfi_def_cfa_offset 24
 735 0004 00AF     		add	r7, sp, #0
 736              	.LCFI49:
 737              		.cfi_def_cfa_register 7
 738 0006 7860     		str	r0, [r7, #4]
 739 0008 3960     		str	r1, [r7]
 422:FT_Eve_Hal/FT_Gpu_Hal.c **** 	ft_uint32_t retVal = 0;
 740              		.loc 1 422 0
 741 000a 0023     		movs	r3, #0
 742 000c FB60     		str	r3, [r7, #12]
 423:FT_Eve_Hal/FT_Gpu_Hal.c **** 	if (host->status == FT_GPU_HAL_WRITING) {
 743              		.loc 1 423 0
 744 000e 7B68     		ldr	r3, [r7, #4]
 745 0010 1B7B     		ldrb	r3, [r3, #12]	@ zero_extendqisi2
 746 0012 022B     		cmp	r3, #2
 747 0014 0DD1     		bne	.L37
 424:FT_Eve_Hal/FT_Gpu_Hal.c **** 		Ft_Gpu_Hal_Transfer16(host, value & 0xFFFF); 			//LSB first
 748              		.loc 1 424 0
 749 0016 3B68     		ldr	r3, [r7]
 750 0018 9BB2     		uxth	r3, r3
 751 001a 1946     		mov	r1, r3
 752 001c 7868     		ldr	r0, [r7, #4]
 753 001e FFF7FEFF 		bl	Ft_Gpu_Hal_Transfer16
 425:FT_Eve_Hal/FT_Gpu_Hal.c **** 		Ft_Gpu_Hal_Transfer16(host, (value >> 16) & 0xFFFF);
 754              		.loc 1 425 0
 755 0022 3B68     		ldr	r3, [r7]
 756 0024 1B0C     		lsrs	r3, r3, #16
 757 0026 9BB2     		uxth	r3, r3
 758 0028 1946     		mov	r1, r3
 759 002a 7868     		ldr	r0, [r7, #4]
 760 002c FFF7FEFF 		bl	Ft_Gpu_Hal_Transfer16
 761 0030 0EE0     		b	.L38
ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 22


 762              	.L37:
 426:FT_Eve_Hal/FT_Gpu_Hal.c **** 	} else {
 427:FT_Eve_Hal/FT_Gpu_Hal.c **** 		retVal = Ft_Gpu_Hal_Transfer16(host, 0);
 763              		.loc 1 427 0
 764 0032 0021     		movs	r1, #0
 765 0034 7868     		ldr	r0, [r7, #4]
 766 0036 FFF7FEFF 		bl	Ft_Gpu_Hal_Transfer16
 767 003a 0346     		mov	r3, r0
 768 003c FB60     		str	r3, [r7, #12]
 428:FT_Eve_Hal/FT_Gpu_Hal.c **** 		retVal |= (ft_uint32_t) Ft_Gpu_Hal_Transfer16(host, 0) << 16;
 769              		.loc 1 428 0
 770 003e 0021     		movs	r1, #0
 771 0040 7868     		ldr	r0, [r7, #4]
 772 0042 FFF7FEFF 		bl	Ft_Gpu_Hal_Transfer16
 773 0046 0346     		mov	r3, r0
 774 0048 1B04     		lsls	r3, r3, #16
 775 004a FA68     		ldr	r2, [r7, #12]
 776 004c 1343     		orrs	r3, r3, r2
 777 004e FB60     		str	r3, [r7, #12]
 778              	.L38:
 429:FT_Eve_Hal/FT_Gpu_Hal.c **** 	}
 430:FT_Eve_Hal/FT_Gpu_Hal.c **** 	return retVal;
 779              		.loc 1 430 0
 780 0050 FB68     		ldr	r3, [r7, #12]
 431:FT_Eve_Hal/FT_Gpu_Hal.c **** }
 781              		.loc 1 431 0
 782 0052 1846     		mov	r0, r3
 783 0054 1037     		adds	r7, r7, #16
 784              	.LCFI50:
 785              		.cfi_def_cfa_offset 8
 786 0056 BD46     		mov	sp, r7
 787              	.LCFI51:
 788              		.cfi_def_cfa_register 13
 789              		@ sp needed
 790 0058 80BD     		pop	{r7, pc}
 791              		.cfi_endproc
 792              	.LFE147:
 794              		.section	.text.Ft_Gpu_Hal_EndTransfer,"ax",%progbits
 795              		.align	1
 796              		.global	Ft_Gpu_Hal_EndTransfer
 797              		.syntax unified
 798              		.thumb
 799              		.thumb_func
 800              		.fpu fpv5-sp-d16
 802              	Ft_Gpu_Hal_EndTransfer:
 803              	.LFB148:
 432:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 433:FT_Eve_Hal/FT_Gpu_Hal.c **** ft_void_t Ft_Gpu_Hal_EndTransfer(Ft_Gpu_Hal_Context_t *host) {
 804              		.loc 1 433 0
 805              		.cfi_startproc
 806              		@ args = 0, pretend = 0, frame = 8
 807              		@ frame_needed = 1, uses_anonymous_args = 0
 808 0000 80B5     		push	{r7, lr}
 809              	.LCFI52:
 810              		.cfi_def_cfa_offset 8
 811              		.cfi_offset 7, -8
 812              		.cfi_offset 14, -4
ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 23


 813 0002 82B0     		sub	sp, sp, #8
 814              	.LCFI53:
 815              		.cfi_def_cfa_offset 16
 816 0004 00AF     		add	r7, sp, #0
 817              	.LCFI54:
 818              		.cfi_def_cfa_register 7
 819 0006 7860     		str	r0, [r7, #4]
 434:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef STM32F7
 435:FT_Eve_Hal/FT_Gpu_Hal.c **** 	HAL_GPIO_WritePin(GPIOB, FT800_CS_N, GPIO_PIN_SET);
 820              		.loc 1 435 0
 821 0008 0122     		movs	r2, #1
 822 000a 0221     		movs	r1, #2
 823 000c 0448     		ldr	r0, .L41
 824 000e FFF7FEFF 		bl	HAL_GPIO_WritePin
 436:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
 437:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef FT900_PLATFORM
 438:FT_Eve_Hal/FT_Gpu_Hal.c **** 	spi_close(SPIM, host->hal_config.spi_cs_pin_no);
 439:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
 440:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef MSVC_PLATFORM_SPI
 441:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 442:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef MSVC_PLATFORM_LIBMPSSE
 443:FT_Eve_Hal/FT_Gpu_Hal.c **** 	//just disbale the CS - send 0 bytes with CS disable
 444:FT_Eve_Hal/FT_Gpu_Hal.c **** 	SPI_ToggleCS((FT_HANDLE)host->hal_handle,FALSE);
 445:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
 446:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef MSVC_PLATFORM_Lib4222
 447:FT_Eve_Hal/FT_Gpu_Hal.c **** 	FT4222_GPIO_Write((FT_HANDLE)host->hal_handle,GPIO_PORT2,1);
 448:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
 449:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 450:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
 451:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef ARDUINO_PLATFORM_SPI
 452:FT_Eve_Hal/FT_Gpu_Hal.c **** 	digitalWrite(host->hal_config.spi_cs_pin_no, HIGH);
 453:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
 454:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 455:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef MSVC_FT800EMU
 456:FT_Eve_Hal/FT_Gpu_Hal.c **** 	Ft_GpuEmu_SPII2C_csHigh();
 457:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
 458:FT_Eve_Hal/FT_Gpu_Hal.c **** 	host->status = FT_GPU_HAL_OPENED;
 825              		.loc 1 458 0
 826 0012 7B68     		ldr	r3, [r7, #4]
 827 0014 0022     		movs	r2, #0
 828 0016 1A73     		strb	r2, [r3, #12]
 459:FT_Eve_Hal/FT_Gpu_Hal.c **** }
 829              		.loc 1 459 0
 830 0018 00BF     		nop
 831 001a 0837     		adds	r7, r7, #8
 832              	.LCFI55:
 833              		.cfi_def_cfa_offset 8
 834 001c BD46     		mov	sp, r7
 835              	.LCFI56:
 836              		.cfi_def_cfa_register 13
 837              		@ sp needed
 838 001e 80BD     		pop	{r7, pc}
 839              	.L42:
 840              		.align	2
 841              	.L41:
 842 0020 00040240 		.word	1073873920
 843              		.cfi_endproc
ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 24


 844              	.LFE148:
 846              		.section	.text.Ft_Gpu_Hal_Rd8,"ax",%progbits
 847              		.align	1
 848              		.global	Ft_Gpu_Hal_Rd8
 849              		.syntax unified
 850              		.thumb
 851              		.thumb_func
 852              		.fpu fpv5-sp-d16
 854              	Ft_Gpu_Hal_Rd8:
 855              	.LFB149:
 460:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 461:FT_Eve_Hal/FT_Gpu_Hal.c **** ft_uint8_t Ft_Gpu_Hal_Rd8(Ft_Gpu_Hal_Context_t *host, ft_uint32_t addr) {
 856              		.loc 1 461 0
 857              		.cfi_startproc
 858              		@ args = 0, pretend = 0, frame = 16
 859              		@ frame_needed = 1, uses_anonymous_args = 0
 860 0000 80B5     		push	{r7, lr}
 861              	.LCFI57:
 862              		.cfi_def_cfa_offset 8
 863              		.cfi_offset 7, -8
 864              		.cfi_offset 14, -4
 865 0002 84B0     		sub	sp, sp, #16
 866              	.LCFI58:
 867              		.cfi_def_cfa_offset 24
 868 0004 00AF     		add	r7, sp, #0
 869              	.LCFI59:
 870              		.cfi_def_cfa_register 7
 871 0006 7860     		str	r0, [r7, #4]
 872 0008 3960     		str	r1, [r7]
 462:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 463:FT_Eve_Hal/FT_Gpu_Hal.c **** 	ft_uint8_t value;
 464:FT_Eve_Hal/FT_Gpu_Hal.c **** 	Ft_Gpu_Hal_StartTransfer(host, FT_GPU_READ, addr);
 873              		.loc 1 464 0
 874 000a 3A68     		ldr	r2, [r7]
 875 000c 0021     		movs	r1, #0
 876 000e 7868     		ldr	r0, [r7, #4]
 877 0010 FFF7FEFF 		bl	Ft_Gpu_Hal_StartTransfer
 465:FT_Eve_Hal/FT_Gpu_Hal.c **** 	value = Ft_Gpu_Hal_Transfer8(host, 0);
 878              		.loc 1 465 0
 879 0014 0021     		movs	r1, #0
 880 0016 7868     		ldr	r0, [r7, #4]
 881 0018 FFF7FEFF 		bl	Ft_Gpu_Hal_Transfer8
 882 001c 0346     		mov	r3, r0
 883 001e FB73     		strb	r3, [r7, #15]
 466:FT_Eve_Hal/FT_Gpu_Hal.c **** 	return value;
 884              		.loc 1 466 0
 885 0020 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 467:FT_Eve_Hal/FT_Gpu_Hal.c **** }
 886              		.loc 1 467 0
 887 0022 1846     		mov	r0, r3
 888 0024 1037     		adds	r7, r7, #16
 889              	.LCFI60:
 890              		.cfi_def_cfa_offset 8
 891 0026 BD46     		mov	sp, r7
 892              	.LCFI61:
 893              		.cfi_def_cfa_register 13
 894              		@ sp needed
ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 25


 895 0028 80BD     		pop	{r7, pc}
 896              		.cfi_endproc
 897              	.LFE149:
 899              		.section	.text.Ft_Gpu_Hal_Rd16,"ax",%progbits
 900              		.align	1
 901              		.global	Ft_Gpu_Hal_Rd16
 902              		.syntax unified
 903              		.thumb
 904              		.thumb_func
 905              		.fpu fpv5-sp-d16
 907              	Ft_Gpu_Hal_Rd16:
 908              	.LFB150:
 468:FT_Eve_Hal/FT_Gpu_Hal.c **** ft_uint16_t Ft_Gpu_Hal_Rd16(Ft_Gpu_Hal_Context_t *host, ft_uint32_t addr) {
 909              		.loc 1 468 0
 910              		.cfi_startproc
 911              		@ args = 0, pretend = 0, frame = 16
 912              		@ frame_needed = 1, uses_anonymous_args = 0
 913 0000 80B5     		push	{r7, lr}
 914              	.LCFI62:
 915              		.cfi_def_cfa_offset 8
 916              		.cfi_offset 7, -8
 917              		.cfi_offset 14, -4
 918 0002 84B0     		sub	sp, sp, #16
 919              	.LCFI63:
 920              		.cfi_def_cfa_offset 24
 921 0004 00AF     		add	r7, sp, #0
 922              	.LCFI64:
 923              		.cfi_def_cfa_register 7
 924 0006 7860     		str	r0, [r7, #4]
 925 0008 3960     		str	r1, [r7]
 469:FT_Eve_Hal/FT_Gpu_Hal.c **** 	ft_uint16_t value;
 470:FT_Eve_Hal/FT_Gpu_Hal.c **** 	Ft_Gpu_Hal_StartTransfer(host, FT_GPU_READ, addr);
 926              		.loc 1 470 0
 927 000a 3A68     		ldr	r2, [r7]
 928 000c 0021     		movs	r1, #0
 929 000e 7868     		ldr	r0, [r7, #4]
 930 0010 FFF7FEFF 		bl	Ft_Gpu_Hal_StartTransfer
 471:FT_Eve_Hal/FT_Gpu_Hal.c **** 	value = Ft_Gpu_Hal_Transfer16(host, 0);
 931              		.loc 1 471 0
 932 0014 0021     		movs	r1, #0
 933 0016 7868     		ldr	r0, [r7, #4]
 934 0018 FFF7FEFF 		bl	Ft_Gpu_Hal_Transfer16
 935 001c 0346     		mov	r3, r0
 936 001e FB81     		strh	r3, [r7, #14]	@ movhi
 472:FT_Eve_Hal/FT_Gpu_Hal.c **** 	Ft_Gpu_Hal_EndTransfer(host);
 937              		.loc 1 472 0
 938 0020 7868     		ldr	r0, [r7, #4]
 939 0022 FFF7FEFF 		bl	Ft_Gpu_Hal_EndTransfer
 473:FT_Eve_Hal/FT_Gpu_Hal.c **** 	return value;
 940              		.loc 1 473 0
 941 0026 FB89     		ldrh	r3, [r7, #14]
 474:FT_Eve_Hal/FT_Gpu_Hal.c **** }
 942              		.loc 1 474 0
 943 0028 1846     		mov	r0, r3
 944 002a 1037     		adds	r7, r7, #16
 945              	.LCFI65:
 946              		.cfi_def_cfa_offset 8
ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 26


 947 002c BD46     		mov	sp, r7
 948              	.LCFI66:
 949              		.cfi_def_cfa_register 13
 950              		@ sp needed
 951 002e 80BD     		pop	{r7, pc}
 952              		.cfi_endproc
 953              	.LFE150:
 955              		.section	.text.Ft_Gpu_Hal_Rd32,"ax",%progbits
 956              		.align	1
 957              		.global	Ft_Gpu_Hal_Rd32
 958              		.syntax unified
 959              		.thumb
 960              		.thumb_func
 961              		.fpu fpv5-sp-d16
 963              	Ft_Gpu_Hal_Rd32:
 964              	.LFB151:
 475:FT_Eve_Hal/FT_Gpu_Hal.c **** ft_uint32_t Ft_Gpu_Hal_Rd32(Ft_Gpu_Hal_Context_t *host, ft_uint32_t addr) {
 965              		.loc 1 475 0
 966              		.cfi_startproc
 967              		@ args = 0, pretend = 0, frame = 16
 968              		@ frame_needed = 1, uses_anonymous_args = 0
 969 0000 80B5     		push	{r7, lr}
 970              	.LCFI67:
 971              		.cfi_def_cfa_offset 8
 972              		.cfi_offset 7, -8
 973              		.cfi_offset 14, -4
 974 0002 84B0     		sub	sp, sp, #16
 975              	.LCFI68:
 976              		.cfi_def_cfa_offset 24
 977 0004 00AF     		add	r7, sp, #0
 978              	.LCFI69:
 979              		.cfi_def_cfa_register 7
 980 0006 7860     		str	r0, [r7, #4]
 981 0008 3960     		str	r1, [r7]
 476:FT_Eve_Hal/FT_Gpu_Hal.c **** 	ft_uint32_t value;
 477:FT_Eve_Hal/FT_Gpu_Hal.c **** 	Ft_Gpu_Hal_StartTransfer(host, FT_GPU_READ, addr);
 982              		.loc 1 477 0
 983 000a 3A68     		ldr	r2, [r7]
 984 000c 0021     		movs	r1, #0
 985 000e 7868     		ldr	r0, [r7, #4]
 986 0010 FFF7FEFF 		bl	Ft_Gpu_Hal_StartTransfer
 478:FT_Eve_Hal/FT_Gpu_Hal.c **** 	value = Ft_Gpu_Hal_Transfer32(host, 0);
 987              		.loc 1 478 0
 988 0014 0021     		movs	r1, #0
 989 0016 7868     		ldr	r0, [r7, #4]
 990 0018 FFF7FEFF 		bl	Ft_Gpu_Hal_Transfer32
 991 001c F860     		str	r0, [r7, #12]
 479:FT_Eve_Hal/FT_Gpu_Hal.c **** 	Ft_Gpu_Hal_EndTransfer(host);
 992              		.loc 1 479 0
 993 001e 7868     		ldr	r0, [r7, #4]
 994 0020 FFF7FEFF 		bl	Ft_Gpu_Hal_EndTransfer
 480:FT_Eve_Hal/FT_Gpu_Hal.c **** 	return value;
 995              		.loc 1 480 0
 996 0024 FB68     		ldr	r3, [r7, #12]
 481:FT_Eve_Hal/FT_Gpu_Hal.c **** }
 997              		.loc 1 481 0
 998 0026 1846     		mov	r0, r3
ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 27


 999 0028 1037     		adds	r7, r7, #16
 1000              	.LCFI70:
 1001              		.cfi_def_cfa_offset 8
 1002 002a BD46     		mov	sp, r7
 1003              	.LCFI71:
 1004              		.cfi_def_cfa_register 13
 1005              		@ sp needed
 1006 002c 80BD     		pop	{r7, pc}
 1007              		.cfi_endproc
 1008              	.LFE151:
 1010              		.section	.text.Ft_Gpu_Hal_Wr8,"ax",%progbits
 1011              		.align	1
 1012              		.global	Ft_Gpu_Hal_Wr8
 1013              		.syntax unified
 1014              		.thumb
 1015              		.thumb_func
 1016              		.fpu fpv5-sp-d16
 1018              	Ft_Gpu_Hal_Wr8:
 1019              	.LFB152:
 482:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 483:FT_Eve_Hal/FT_Gpu_Hal.c **** ft_void_t Ft_Gpu_Hal_Wr8(Ft_Gpu_Hal_Context_t *host, ft_uint32_t addr,
 484:FT_Eve_Hal/FT_Gpu_Hal.c **** 		ft_uint8_t v) {
 1020              		.loc 1 484 0
 1021              		.cfi_startproc
 1022              		@ args = 0, pretend = 0, frame = 16
 1023              		@ frame_needed = 1, uses_anonymous_args = 0
 1024 0000 80B5     		push	{r7, lr}
 1025              	.LCFI72:
 1026              		.cfi_def_cfa_offset 8
 1027              		.cfi_offset 7, -8
 1028              		.cfi_offset 14, -4
 1029 0002 84B0     		sub	sp, sp, #16
 1030              	.LCFI73:
 1031              		.cfi_def_cfa_offset 24
 1032 0004 00AF     		add	r7, sp, #0
 1033              	.LCFI74:
 1034              		.cfi_def_cfa_register 7
 1035 0006 F860     		str	r0, [r7, #12]
 1036 0008 B960     		str	r1, [r7, #8]
 1037 000a 1346     		mov	r3, r2
 1038 000c FB71     		strb	r3, [r7, #7]
 485:FT_Eve_Hal/FT_Gpu_Hal.c **** 	Ft_Gpu_Hal_StartTransfer(host, FT_GPU_WRITE, addr);
 1039              		.loc 1 485 0
 1040 000e BA68     		ldr	r2, [r7, #8]
 1041 0010 0121     		movs	r1, #1
 1042 0012 F868     		ldr	r0, [r7, #12]
 1043 0014 FFF7FEFF 		bl	Ft_Gpu_Hal_StartTransfer
 486:FT_Eve_Hal/FT_Gpu_Hal.c **** 	Ft_Gpu_Hal_Transfer8(host, v);
 1044              		.loc 1 486 0
 1045 0018 FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 1046 001a 1946     		mov	r1, r3
 1047 001c F868     		ldr	r0, [r7, #12]
 1048 001e FFF7FEFF 		bl	Ft_Gpu_Hal_Transfer8
 487:FT_Eve_Hal/FT_Gpu_Hal.c **** 	Ft_Gpu_Hal_EndTransfer(host);
 1049              		.loc 1 487 0
 1050 0022 F868     		ldr	r0, [r7, #12]
 1051 0024 FFF7FEFF 		bl	Ft_Gpu_Hal_EndTransfer
ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 28


 488:FT_Eve_Hal/FT_Gpu_Hal.c **** }
 1052              		.loc 1 488 0
 1053 0028 00BF     		nop
 1054 002a 1037     		adds	r7, r7, #16
 1055              	.LCFI75:
 1056              		.cfi_def_cfa_offset 8
 1057 002c BD46     		mov	sp, r7
 1058              	.LCFI76:
 1059              		.cfi_def_cfa_register 13
 1060              		@ sp needed
 1061 002e 80BD     		pop	{r7, pc}
 1062              		.cfi_endproc
 1063              	.LFE152:
 1065              		.section	.text.Ft_Gpu_Hal_Wr16,"ax",%progbits
 1066              		.align	1
 1067              		.global	Ft_Gpu_Hal_Wr16
 1068              		.syntax unified
 1069              		.thumb
 1070              		.thumb_func
 1071              		.fpu fpv5-sp-d16
 1073              	Ft_Gpu_Hal_Wr16:
 1074              	.LFB153:
 489:FT_Eve_Hal/FT_Gpu_Hal.c **** ft_void_t Ft_Gpu_Hal_Wr16(Ft_Gpu_Hal_Context_t *host, ft_uint32_t addr,
 490:FT_Eve_Hal/FT_Gpu_Hal.c **** 		ft_uint16_t v) {
 1075              		.loc 1 490 0
 1076              		.cfi_startproc
 1077              		@ args = 0, pretend = 0, frame = 16
 1078              		@ frame_needed = 1, uses_anonymous_args = 0
 1079 0000 80B5     		push	{r7, lr}
 1080              	.LCFI77:
 1081              		.cfi_def_cfa_offset 8
 1082              		.cfi_offset 7, -8
 1083              		.cfi_offset 14, -4
 1084 0002 84B0     		sub	sp, sp, #16
 1085              	.LCFI78:
 1086              		.cfi_def_cfa_offset 24
 1087 0004 00AF     		add	r7, sp, #0
 1088              	.LCFI79:
 1089              		.cfi_def_cfa_register 7
 1090 0006 F860     		str	r0, [r7, #12]
 1091 0008 B960     		str	r1, [r7, #8]
 1092 000a 1346     		mov	r3, r2
 1093 000c FB80     		strh	r3, [r7, #6]	@ movhi
 491:FT_Eve_Hal/FT_Gpu_Hal.c **** 	Ft_Gpu_Hal_StartTransfer(host, FT_GPU_WRITE, addr);
 1094              		.loc 1 491 0
 1095 000e BA68     		ldr	r2, [r7, #8]
 1096 0010 0121     		movs	r1, #1
 1097 0012 F868     		ldr	r0, [r7, #12]
 1098 0014 FFF7FEFF 		bl	Ft_Gpu_Hal_StartTransfer
 492:FT_Eve_Hal/FT_Gpu_Hal.c **** 	Ft_Gpu_Hal_Transfer16(host, v);
 1099              		.loc 1 492 0
 1100 0018 FB88     		ldrh	r3, [r7, #6]
 1101 001a 1946     		mov	r1, r3
 1102 001c F868     		ldr	r0, [r7, #12]
 1103 001e FFF7FEFF 		bl	Ft_Gpu_Hal_Transfer16
 493:FT_Eve_Hal/FT_Gpu_Hal.c **** 	Ft_Gpu_Hal_EndTransfer(host);
 1104              		.loc 1 493 0
ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 29


 1105 0022 F868     		ldr	r0, [r7, #12]
 1106 0024 FFF7FEFF 		bl	Ft_Gpu_Hal_EndTransfer
 494:FT_Eve_Hal/FT_Gpu_Hal.c **** }
 1107              		.loc 1 494 0
 1108 0028 00BF     		nop
 1109 002a 1037     		adds	r7, r7, #16
 1110              	.LCFI80:
 1111              		.cfi_def_cfa_offset 8
 1112 002c BD46     		mov	sp, r7
 1113              	.LCFI81:
 1114              		.cfi_def_cfa_register 13
 1115              		@ sp needed
 1116 002e 80BD     		pop	{r7, pc}
 1117              		.cfi_endproc
 1118              	.LFE153:
 1120              		.section	.text.Ft_Gpu_Hal_Wr32,"ax",%progbits
 1121              		.align	1
 1122              		.global	Ft_Gpu_Hal_Wr32
 1123              		.syntax unified
 1124              		.thumb
 1125              		.thumb_func
 1126              		.fpu fpv5-sp-d16
 1128              	Ft_Gpu_Hal_Wr32:
 1129              	.LFB154:
 495:FT_Eve_Hal/FT_Gpu_Hal.c **** ft_void_t Ft_Gpu_Hal_Wr32(Ft_Gpu_Hal_Context_t *host, ft_uint32_t addr,
 496:FT_Eve_Hal/FT_Gpu_Hal.c **** 		ft_uint32_t v) {
 1130              		.loc 1 496 0
 1131              		.cfi_startproc
 1132              		@ args = 0, pretend = 0, frame = 16
 1133              		@ frame_needed = 1, uses_anonymous_args = 0
 1134 0000 80B5     		push	{r7, lr}
 1135              	.LCFI82:
 1136              		.cfi_def_cfa_offset 8
 1137              		.cfi_offset 7, -8
 1138              		.cfi_offset 14, -4
 1139 0002 84B0     		sub	sp, sp, #16
 1140              	.LCFI83:
 1141              		.cfi_def_cfa_offset 24
 1142 0004 00AF     		add	r7, sp, #0
 1143              	.LCFI84:
 1144              		.cfi_def_cfa_register 7
 1145 0006 F860     		str	r0, [r7, #12]
 1146 0008 B960     		str	r1, [r7, #8]
 1147 000a 7A60     		str	r2, [r7, #4]
 497:FT_Eve_Hal/FT_Gpu_Hal.c **** 	Ft_Gpu_Hal_StartTransfer(host, FT_GPU_WRITE, addr);
 1148              		.loc 1 497 0
 1149 000c BA68     		ldr	r2, [r7, #8]
 1150 000e 0121     		movs	r1, #1
 1151 0010 F868     		ldr	r0, [r7, #12]
 1152 0012 FFF7FEFF 		bl	Ft_Gpu_Hal_StartTransfer
 498:FT_Eve_Hal/FT_Gpu_Hal.c **** 	Ft_Gpu_Hal_Transfer32(host, v);
 1153              		.loc 1 498 0
 1154 0016 7968     		ldr	r1, [r7, #4]
 1155 0018 F868     		ldr	r0, [r7, #12]
 1156 001a FFF7FEFF 		bl	Ft_Gpu_Hal_Transfer32
 499:FT_Eve_Hal/FT_Gpu_Hal.c **** 	Ft_Gpu_Hal_EndTransfer(host);
 1157              		.loc 1 499 0
ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 30


 1158 001e F868     		ldr	r0, [r7, #12]
 1159 0020 FFF7FEFF 		bl	Ft_Gpu_Hal_EndTransfer
 500:FT_Eve_Hal/FT_Gpu_Hal.c **** }
 1160              		.loc 1 500 0
 1161 0024 00BF     		nop
 1162 0026 1037     		adds	r7, r7, #16
 1163              	.LCFI85:
 1164              		.cfi_def_cfa_offset 8
 1165 0028 BD46     		mov	sp, r7
 1166              	.LCFI86:
 1167              		.cfi_def_cfa_register 13
 1168              		@ sp needed
 1169 002a 80BD     		pop	{r7, pc}
 1170              		.cfi_endproc
 1171              	.LFE154:
 1173              		.section	.rodata
 1174 009b 00       		.align	2
 1175              	.LC4:
 1176 009c 4641494C 		.ascii	"FAILED TO TRANSMIT in Ft_Gpu_HostCommand\012\000"
 1176      45442054 
 1176      4F205452 
 1176      414E534D 
 1176      49542069 
 1177              		.section	.text.Ft_Gpu_HostCommand,"ax",%progbits
 1178              		.align	1
 1179              		.global	Ft_Gpu_HostCommand
 1180              		.syntax unified
 1181              		.thumb
 1182              		.thumb_func
 1183              		.fpu fpv5-sp-d16
 1185              	Ft_Gpu_HostCommand:
 1186              	.LFB155:
 501:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 502:FT_Eve_Hal/FT_Gpu_Hal.c **** ft_void_t Ft_Gpu_HostCommand(Ft_Gpu_Hal_Context_t *host, ft_uint8_t cmd) {
 1187              		.loc 1 502 0
 1188              		.cfi_startproc
 1189              		@ args = 0, pretend = 0, frame = 16
 1190              		@ frame_needed = 1, uses_anonymous_args = 0
 1191 0000 80B5     		push	{r7, lr}
 1192              	.LCFI87:
 1193              		.cfi_def_cfa_offset 8
 1194              		.cfi_offset 7, -8
 1195              		.cfi_offset 14, -4
 1196 0002 84B0     		sub	sp, sp, #16
 1197              	.LCFI88:
 1198              		.cfi_def_cfa_offset 24
 1199 0004 00AF     		add	r7, sp, #0
 1200              	.LCFI89:
 1201              		.cfi_def_cfa_register 7
 1202 0006 7860     		str	r0, [r7, #4]
 1203 0008 0B46     		mov	r3, r1
 1204 000a FB70     		strb	r3, [r7, #3]
 503:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 504:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef STM32F7
 505:FT_Eve_Hal/FT_Gpu_Hal.c **** 	unsigned char cTempAddr[3];							// FT800 Memory Address
 506:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 507:FT_Eve_Hal/FT_Gpu_Hal.c **** 	cTempAddr[2] = (char) cmd;	// Compose the command and address to send
ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 31


 1205              		.loc 1 507 0
 1206 000c FB78     		ldrb	r3, [r7, #3]
 1207 000e BB72     		strb	r3, [r7, #10]
 508:FT_Eve_Hal/FT_Gpu_Hal.c **** 	cTempAddr[1] = 0;								// middle byte
 1208              		.loc 1 508 0
 1209 0010 0023     		movs	r3, #0
 1210 0012 7B72     		strb	r3, [r7, #9]
 509:FT_Eve_Hal/FT_Gpu_Hal.c **** 	cTempAddr[0] = 0;										// low byte
 1211              		.loc 1 509 0
 1212 0014 0023     		movs	r3, #0
 1213 0016 3B72     		strb	r3, [r7, #8]
 510:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 511:FT_Eve_Hal/FT_Gpu_Hal.c **** 	HAL_GPIO_WritePin(GPIOB, FT800_CS_N, GPIO_PIN_RESET);// Set chip select low
 1214              		.loc 1 511 0
 1215 0018 0022     		movs	r2, #0
 1216 001a 0221     		movs	r1, #2
 1217 001c 1448     		ldr	r0, .L57
 1218 001e FFF7FEFF 		bl	HAL_GPIO_WritePin
 1219              	.LBB12:
 512:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 513:FT_Eve_Hal/FT_Gpu_Hal.c **** 	for (int i = 2; i >= 0; i--) {
 1220              		.loc 1 513 0
 1221 0022 0223     		movs	r3, #2
 1222 0024 FB60     		str	r3, [r7, #12]
 1223 0026 16E0     		b	.L53
 1224              	.L56:
 514:FT_Eve_Hal/FT_Gpu_Hal.c **** 		if (HAL_SPI_Transmit(&hspi1, (uint8_t *) &cTempAddr[i], 1,
 1225              		.loc 1 514 0
 1226 0028 07F10802 		add	r2, r7, #8
 1227 002c FB68     		ldr	r3, [r7, #12]
 1228 002e D118     		adds	r1, r2, r3
 1229 0030 4FF0FF33 		mov	r3, #-1
 1230 0034 0122     		movs	r2, #1
 1231 0036 0F48     		ldr	r0, .L57+4
 1232 0038 FFF7FEFF 		bl	HAL_SPI_Transmit
 1233 003c 0346     		mov	r3, r0
 1234 003e 002B     		cmp	r3, #0
 1235 0040 03D0     		beq	.L54
 1236              	.LBB13:
 515:FT_Eve_Hal/FT_Gpu_Hal.c **** 		HAL_MAX_DELAY) != HAL_OK) {
 516:FT_Eve_Hal/FT_Gpu_Hal.c **** 			my_printf("FAILED TO TRANSMIT in Ft_Gpu_HostCommand\n");
 1237              		.loc 1 516 0
 1238 0042 0D48     		ldr	r0, .L57+8
 1239 0044 FFF7FEFF 		bl	my_printf
 1240              	.LBE13:
 1241 0048 02E0     		b	.L55
 1242              	.L54:
 1243              	.LBB14:
 517:FT_Eve_Hal/FT_Gpu_Hal.c **** 		} 			// Send Memory Write plus high address byte
 518:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 519:FT_Eve_Hal/FT_Gpu_Hal.c **** 		else {
 520:FT_Eve_Hal/FT_Gpu_Hal.c **** 			my_printf("SUCCESSFUL TRANSMISSION\n");
 1244              		.loc 1 520 0
 1245 004a 0C48     		ldr	r0, .L57+12
 1246 004c FFF7FEFF 		bl	my_printf
 1247              	.L55:
 1248              	.LBE14:
ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 32


 513:FT_Eve_Hal/FT_Gpu_Hal.c **** 		if (HAL_SPI_Transmit(&hspi1, (uint8_t *) &cTempAddr[i], 1,
 1249              		.loc 1 513 0 discriminator 2
 1250 0050 FB68     		ldr	r3, [r7, #12]
 1251 0052 013B     		subs	r3, r3, #1
 1252 0054 FB60     		str	r3, [r7, #12]
 1253              	.L53:
 513:FT_Eve_Hal/FT_Gpu_Hal.c **** 		if (HAL_SPI_Transmit(&hspi1, (uint8_t *) &cTempAddr[i], 1,
 1254              		.loc 1 513 0 is_stmt 0 discriminator 1
 1255 0056 FB68     		ldr	r3, [r7, #12]
 1256 0058 002B     		cmp	r3, #0
 1257 005a E5DA     		bge	.L56
 1258              	.LBE12:
 521:FT_Eve_Hal/FT_Gpu_Hal.c **** 		}
 522:FT_Eve_Hal/FT_Gpu_Hal.c **** 	}
 523:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 524:FT_Eve_Hal/FT_Gpu_Hal.c **** 	HAL_GPIO_WritePin(GPIOB, FT800_CS_N, GPIO_PIN_SET);	// Set chip select high
 1259              		.loc 1 524 0 is_stmt 1
 1260 005c 0122     		movs	r2, #1
 1261 005e 0221     		movs	r1, #2
 1262 0060 0348     		ldr	r0, .L57
 1263 0062 FFF7FEFF 		bl	HAL_GPIO_WritePin
 525:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
 526:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef FT900_PLATFORM
 527:FT_Eve_Hal/FT_Gpu_Hal.c **** 	ft_uint8_t hcmd[4] = {0};
 528:FT_Eve_Hal/FT_Gpu_Hal.c **** 	hcmd[0] = cmd;
 529:FT_Eve_Hal/FT_Gpu_Hal.c **** 	hcmd[1] = 0;
 530:FT_Eve_Hal/FT_Gpu_Hal.c **** 	hcmd[2] = 0;
 531:FT_Eve_Hal/FT_Gpu_Hal.c **** 	hcmd[3] = 0;
 532:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 533:FT_Eve_Hal/FT_Gpu_Hal.c **** 	spi_open(SPIM,host->hal_config.spi_cs_pin_no);
 534:FT_Eve_Hal/FT_Gpu_Hal.c **** 	spi_writen(SPIM,hcmd,3);
 535:FT_Eve_Hal/FT_Gpu_Hal.c **** 	spi_close(SPIM,host->hal_config.spi_cs_pin_no);
 536:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 537:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
 538:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef MSVC_PLATFORM_SPI
 539:FT_Eve_Hal/FT_Gpu_Hal.c **** 	ft_uint8_t Transfer_Array[3];
 540:FT_Eve_Hal/FT_Gpu_Hal.c **** 	ft_uint32_t SizeTransfered;
 541:FT_Eve_Hal/FT_Gpu_Hal.c **** 	ft_uint16_t SizeTransfered16;
 542:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 543:FT_Eve_Hal/FT_Gpu_Hal.c **** 	Transfer_Array[0] = cmd;
 544:FT_Eve_Hal/FT_Gpu_Hal.c **** 	Transfer_Array[1] = 0;
 545:FT_Eve_Hal/FT_Gpu_Hal.c **** 	Transfer_Array[2] = 0;
 546:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef MSVC_PLATFORM_LIBMPSSE
 547:FT_Eve_Hal/FT_Gpu_Hal.c **** 	SPI_Write(host->hal_handle,Transfer_Array,sizeof(Transfer_Array),&SizeTransfered,SPI_TRANSFER_OPTI
 548:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
 549:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 550:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef MSVC_PLATFORM_Lib4222
 551:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 552:FT_Eve_Hal/FT_Gpu_Hal.c **** 	FT4222_SPIMaster_SingleWrite((FT_HANDLE)host->hal_handle, Transfer_Array,sizeof(Transfer_Array),&S
 553:FT_Eve_Hal/FT_Gpu_Hal.c **** 	SizeTransfered = SizeTransfered16;
 554:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 555:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
 556:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 557:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
 558:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef ARDUINO_PLATFORM_SPI
 559:FT_Eve_Hal/FT_Gpu_Hal.c **** 	digitalWrite(host->hal_config.spi_cs_pin_no, LOW);
 560:FT_Eve_Hal/FT_Gpu_Hal.c **** 	SPI.transfer(cmd);
ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 33


 561:FT_Eve_Hal/FT_Gpu_Hal.c **** 	SPI.transfer(0);
 562:FT_Eve_Hal/FT_Gpu_Hal.c **** 	SPI.transfer(0);
 563:FT_Eve_Hal/FT_Gpu_Hal.c **** 	digitalWrite(host->hal_config.spi_cs_pin_no, HIGH);
 564:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
 565:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef MSVC_FT800EMU
 566:FT_Eve_Hal/FT_Gpu_Hal.c **** 	//Not implemented in FT800EMU
 567:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
 568:FT_Eve_Hal/FT_Gpu_Hal.c **** }
 1264              		.loc 1 568 0
 1265 0066 00BF     		nop
 1266 0068 1037     		adds	r7, r7, #16
 1267              	.LCFI90:
 1268              		.cfi_def_cfa_offset 8
 1269 006a BD46     		mov	sp, r7
 1270              	.LCFI91:
 1271              		.cfi_def_cfa_register 13
 1272              		@ sp needed
 1273 006c 80BD     		pop	{r7, pc}
 1274              	.L58:
 1275 006e 00BF     		.align	2
 1276              	.L57:
 1277 0070 00040240 		.word	1073873920
 1278 0074 00000000 		.word	hspi1
 1279 0078 9C000000 		.word	.LC4
 1280 007c 28000000 		.word	.LC1
 1281              		.cfi_endproc
 1282              	.LFE155:
 1284              		.section	.text.Ft_Gpu_ClockSelect,"ax",%progbits
 1285              		.align	1
 1286              		.global	Ft_Gpu_ClockSelect
 1287              		.syntax unified
 1288              		.thumb
 1289              		.thumb_func
 1290              		.fpu fpv5-sp-d16
 1292              	Ft_Gpu_ClockSelect:
 1293              	.LFB156:
 569:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 570:FT_Eve_Hal/FT_Gpu_Hal.c **** ft_void_t Ft_Gpu_ClockSelect(Ft_Gpu_Hal_Context_t *host,
 571:FT_Eve_Hal/FT_Gpu_Hal.c **** 		FT_GPU_PLL_SOURCE_T pllsource) {
 1294              		.loc 1 571 0
 1295              		.cfi_startproc
 1296              		@ args = 0, pretend = 0, frame = 8
 1297              		@ frame_needed = 1, uses_anonymous_args = 0
 1298 0000 80B5     		push	{r7, lr}
 1299              	.LCFI92:
 1300              		.cfi_def_cfa_offset 8
 1301              		.cfi_offset 7, -8
 1302              		.cfi_offset 14, -4
 1303 0002 82B0     		sub	sp, sp, #8
 1304              	.LCFI93:
 1305              		.cfi_def_cfa_offset 16
 1306 0004 00AF     		add	r7, sp, #0
 1307              	.LCFI94:
 1308              		.cfi_def_cfa_register 7
 1309 0006 7860     		str	r0, [r7, #4]
 1310 0008 0B46     		mov	r3, r1
 1311 000a FB70     		strb	r3, [r7, #3]
ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 34


 572:FT_Eve_Hal/FT_Gpu_Hal.c **** 	Ft_Gpu_HostCommand(host, pllsource);
 1312              		.loc 1 572 0
 1313 000c FB78     		ldrb	r3, [r7, #3]	@ zero_extendqisi2
 1314 000e 1946     		mov	r1, r3
 1315 0010 7868     		ldr	r0, [r7, #4]
 1316 0012 FFF7FEFF 		bl	Ft_Gpu_HostCommand
 573:FT_Eve_Hal/FT_Gpu_Hal.c **** }
 1317              		.loc 1 573 0
 1318 0016 00BF     		nop
 1319 0018 0837     		adds	r7, r7, #8
 1320              	.LCFI95:
 1321              		.cfi_def_cfa_offset 8
 1322 001a BD46     		mov	sp, r7
 1323              	.LCFI96:
 1324              		.cfi_def_cfa_register 13
 1325              		@ sp needed
 1326 001c 80BD     		pop	{r7, pc}
 1327              		.cfi_endproc
 1328              	.LFE156:
 1330              		.section	.text.Ft_Gpu_PLL_FreqSelect,"ax",%progbits
 1331              		.align	1
 1332              		.global	Ft_Gpu_PLL_FreqSelect
 1333              		.syntax unified
 1334              		.thumb
 1335              		.thumb_func
 1336              		.fpu fpv5-sp-d16
 1338              	Ft_Gpu_PLL_FreqSelect:
 1339              	.LFB157:
 574:FT_Eve_Hal/FT_Gpu_Hal.c **** ft_void_t Ft_Gpu_PLL_FreqSelect(Ft_Gpu_Hal_Context_t *host,
 575:FT_Eve_Hal/FT_Gpu_Hal.c **** 		FT_GPU_PLL_FREQ_T freq) {
 1340              		.loc 1 575 0
 1341              		.cfi_startproc
 1342              		@ args = 0, pretend = 0, frame = 8
 1343              		@ frame_needed = 1, uses_anonymous_args = 0
 1344 0000 80B5     		push	{r7, lr}
 1345              	.LCFI97:
 1346              		.cfi_def_cfa_offset 8
 1347              		.cfi_offset 7, -8
 1348              		.cfi_offset 14, -4
 1349 0002 82B0     		sub	sp, sp, #8
 1350              	.LCFI98:
 1351              		.cfi_def_cfa_offset 16
 1352 0004 00AF     		add	r7, sp, #0
 1353              	.LCFI99:
 1354              		.cfi_def_cfa_register 7
 1355 0006 7860     		str	r0, [r7, #4]
 1356 0008 0B46     		mov	r3, r1
 1357 000a FB70     		strb	r3, [r7, #3]
 576:FT_Eve_Hal/FT_Gpu_Hal.c **** 	Ft_Gpu_HostCommand(host, freq);
 1358              		.loc 1 576 0
 1359 000c FB78     		ldrb	r3, [r7, #3]	@ zero_extendqisi2
 1360 000e 1946     		mov	r1, r3
 1361 0010 7868     		ldr	r0, [r7, #4]
 1362 0012 FFF7FEFF 		bl	Ft_Gpu_HostCommand
 577:FT_Eve_Hal/FT_Gpu_Hal.c **** }
 1363              		.loc 1 577 0
 1364 0016 00BF     		nop
ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 35


 1365 0018 0837     		adds	r7, r7, #8
 1366              	.LCFI100:
 1367              		.cfi_def_cfa_offset 8
 1368 001a BD46     		mov	sp, r7
 1369              	.LCFI101:
 1370              		.cfi_def_cfa_register 13
 1371              		@ sp needed
 1372 001c 80BD     		pop	{r7, pc}
 1373              		.cfi_endproc
 1374              	.LFE157:
 1376              		.section	.text.Ft_Gpu_PowerModeSwitch,"ax",%progbits
 1377              		.align	1
 1378              		.global	Ft_Gpu_PowerModeSwitch
 1379              		.syntax unified
 1380              		.thumb
 1381              		.thumb_func
 1382              		.fpu fpv5-sp-d16
 1384              	Ft_Gpu_PowerModeSwitch:
 1385              	.LFB158:
 578:FT_Eve_Hal/FT_Gpu_Hal.c **** ft_void_t Ft_Gpu_PowerModeSwitch(Ft_Gpu_Hal_Context_t *host,
 579:FT_Eve_Hal/FT_Gpu_Hal.c **** 		FT_GPU_POWER_MODE_T pwrmode) {
 1386              		.loc 1 579 0
 1387              		.cfi_startproc
 1388              		@ args = 0, pretend = 0, frame = 8
 1389              		@ frame_needed = 1, uses_anonymous_args = 0
 1390 0000 80B5     		push	{r7, lr}
 1391              	.LCFI102:
 1392              		.cfi_def_cfa_offset 8
 1393              		.cfi_offset 7, -8
 1394              		.cfi_offset 14, -4
 1395 0002 82B0     		sub	sp, sp, #8
 1396              	.LCFI103:
 1397              		.cfi_def_cfa_offset 16
 1398 0004 00AF     		add	r7, sp, #0
 1399              	.LCFI104:
 1400              		.cfi_def_cfa_register 7
 1401 0006 7860     		str	r0, [r7, #4]
 1402 0008 0B46     		mov	r3, r1
 1403 000a FB70     		strb	r3, [r7, #3]
 580:FT_Eve_Hal/FT_Gpu_Hal.c **** 	Ft_Gpu_HostCommand(host, pwrmode);
 1404              		.loc 1 580 0
 1405 000c FB78     		ldrb	r3, [r7, #3]	@ zero_extendqisi2
 1406 000e 1946     		mov	r1, r3
 1407 0010 7868     		ldr	r0, [r7, #4]
 1408 0012 FFF7FEFF 		bl	Ft_Gpu_HostCommand
 581:FT_Eve_Hal/FT_Gpu_Hal.c **** }
 1409              		.loc 1 581 0
 1410 0016 00BF     		nop
 1411 0018 0837     		adds	r7, r7, #8
 1412              	.LCFI105:
 1413              		.cfi_def_cfa_offset 8
 1414 001a BD46     		mov	sp, r7
 1415              	.LCFI106:
 1416              		.cfi_def_cfa_register 13
 1417              		@ sp needed
 1418 001c 80BD     		pop	{r7, pc}
 1419              		.cfi_endproc
ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 36


 1420              	.LFE158:
 1422              		.section	.text.Ft_Gpu_CoreReset,"ax",%progbits
 1423              		.align	1
 1424              		.global	Ft_Gpu_CoreReset
 1425              		.syntax unified
 1426              		.thumb
 1427              		.thumb_func
 1428              		.fpu fpv5-sp-d16
 1430              	Ft_Gpu_CoreReset:
 1431              	.LFB159:
 582:FT_Eve_Hal/FT_Gpu_Hal.c **** ft_void_t Ft_Gpu_CoreReset(Ft_Gpu_Hal_Context_t *host) {
 1432              		.loc 1 582 0
 1433              		.cfi_startproc
 1434              		@ args = 0, pretend = 0, frame = 8
 1435              		@ frame_needed = 1, uses_anonymous_args = 0
 1436 0000 80B5     		push	{r7, lr}
 1437              	.LCFI107:
 1438              		.cfi_def_cfa_offset 8
 1439              		.cfi_offset 7, -8
 1440              		.cfi_offset 14, -4
 1441 0002 82B0     		sub	sp, sp, #8
 1442              	.LCFI108:
 1443              		.cfi_def_cfa_offset 16
 1444 0004 00AF     		add	r7, sp, #0
 1445              	.LCFI109:
 1446              		.cfi_def_cfa_register 7
 1447 0006 7860     		str	r0, [r7, #4]
 583:FT_Eve_Hal/FT_Gpu_Hal.c **** 	Ft_Gpu_HostCommand(host, FT_GPU_CORE_RESET);
 1448              		.loc 1 583 0
 1449 0008 6821     		movs	r1, #104
 1450 000a 7868     		ldr	r0, [r7, #4]
 1451 000c FFF7FEFF 		bl	Ft_Gpu_HostCommand
 584:FT_Eve_Hal/FT_Gpu_Hal.c **** }
 1452              		.loc 1 584 0
 1453 0010 00BF     		nop
 1454 0012 0837     		adds	r7, r7, #8
 1455              	.LCFI110:
 1456              		.cfi_def_cfa_offset 8
 1457 0014 BD46     		mov	sp, r7
 1458              	.LCFI111:
 1459              		.cfi_def_cfa_register 13
 1460              		@ sp needed
 1461 0016 80BD     		pop	{r7, pc}
 1462              		.cfi_endproc
 1463              	.LFE159:
 1465              		.section	.text.Ft_Gpu_81X_SelectSysCLK,"ax",%progbits
 1466              		.align	1
 1467              		.global	Ft_Gpu_81X_SelectSysCLK
 1468              		.syntax unified
 1469              		.thumb
 1470              		.thumb_func
 1471              		.fpu fpv5-sp-d16
 1473              	Ft_Gpu_81X_SelectSysCLK:
 1474              	.LFB160:
 585:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 586:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef FT_81X_ENABLE
 587:FT_Eve_Hal/FT_Gpu_Hal.c **** //This API can only be called when PLL is stopped(SLEEP mode).  For compatibility, set frequency to
ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 37


 588:FT_Eve_Hal/FT_Gpu_Hal.c **** ft_void_t Ft_Gpu_81X_SelectSysCLK(Ft_Gpu_Hal_Context_t *host,
 589:FT_Eve_Hal/FT_Gpu_Hal.c **** 		FT_GPU_81X_PLL_FREQ_T freq) {
 1475              		.loc 1 589 0
 1476              		.cfi_startproc
 1477              		@ args = 0, pretend = 0, frame = 8
 1478              		@ frame_needed = 1, uses_anonymous_args = 0
 1479 0000 80B5     		push	{r7, lr}
 1480              	.LCFI112:
 1481              		.cfi_def_cfa_offset 8
 1482              		.cfi_offset 7, -8
 1483              		.cfi_offset 14, -4
 1484 0002 82B0     		sub	sp, sp, #8
 1485              	.LCFI113:
 1486              		.cfi_def_cfa_offset 16
 1487 0004 00AF     		add	r7, sp, #0
 1488              	.LCFI114:
 1489              		.cfi_def_cfa_register 7
 1490 0006 7860     		str	r0, [r7, #4]
 1491 0008 0B46     		mov	r3, r1
 1492 000a FB70     		strb	r3, [r7, #3]
 590:FT_Eve_Hal/FT_Gpu_Hal.c **** 	if (FT_GPU_SYSCLK_72M == freq)
 1493              		.loc 1 590 0
 1494 000c FB78     		ldrb	r3, [r7, #3]	@ zero_extendqisi2
 1495 000e 062B     		cmp	r3, #6
 1496 0010 05D1     		bne	.L64
 591:FT_Eve_Hal/FT_Gpu_Hal.c **** 		Ft_Gpu_HostCommand_Ext3(host,
 1497              		.loc 1 591 0
 1498 0012 44F26161 		movw	r1, #18017
 1499 0016 7868     		ldr	r0, [r7, #4]
 1500 0018 FFF7FEFF 		bl	Ft_Gpu_HostCommand_Ext3
 592:FT_Eve_Hal/FT_Gpu_Hal.c **** 				(ft_uint32_t) 0x61 | (0x40 << 8) | (0x06 << 8));
 593:FT_Eve_Hal/FT_Gpu_Hal.c **** 	else if (FT_GPU_SYSCLK_60M == freq)
 594:FT_Eve_Hal/FT_Gpu_Hal.c **** 		Ft_Gpu_HostCommand_Ext3(host,
 595:FT_Eve_Hal/FT_Gpu_Hal.c **** 				(ft_uint32_t) 0x61 | (0x40 << 8) | (0x05 << 8));
 596:FT_Eve_Hal/FT_Gpu_Hal.c **** 	else if (FT_GPU_SYSCLK_48M == freq)
 597:FT_Eve_Hal/FT_Gpu_Hal.c **** 		Ft_Gpu_HostCommand_Ext3(host,
 598:FT_Eve_Hal/FT_Gpu_Hal.c **** 				(ft_uint32_t) 0x61 | (0x40 << 8) | (0x04 << 8));
 599:FT_Eve_Hal/FT_Gpu_Hal.c **** 	else if (FT_GPU_SYSCLK_36M == freq)
 600:FT_Eve_Hal/FT_Gpu_Hal.c **** 		Ft_Gpu_HostCommand_Ext3(host, (ft_uint32_t) 0x61 | (0x03 << 8));
 601:FT_Eve_Hal/FT_Gpu_Hal.c **** 	else if (FT_GPU_SYSCLK_24M == freq)
 602:FT_Eve_Hal/FT_Gpu_Hal.c **** 		Ft_Gpu_HostCommand_Ext3(host, (ft_uint32_t) 0x61 | (0x02 << 8));
 603:FT_Eve_Hal/FT_Gpu_Hal.c **** 	else if (FT_GPU_SYSCLK_DEFAULT == freq)		//default clock
 604:FT_Eve_Hal/FT_Gpu_Hal.c **** 		Ft_Gpu_HostCommand_Ext3(host, 0x61);
 605:FT_Eve_Hal/FT_Gpu_Hal.c **** }
 1501              		.loc 1 605 0
 1502 001c 2AE0     		b	.L70
 1503              	.L64:
 593:FT_Eve_Hal/FT_Gpu_Hal.c **** 		Ft_Gpu_HostCommand_Ext3(host,
 1504              		.loc 1 593 0
 1505 001e FB78     		ldrb	r3, [r7, #3]	@ zero_extendqisi2
 1506 0020 052B     		cmp	r3, #5
 1507 0022 05D1     		bne	.L66
 594:FT_Eve_Hal/FT_Gpu_Hal.c **** 				(ft_uint32_t) 0x61 | (0x40 << 8) | (0x05 << 8));
 1508              		.loc 1 594 0
 1509 0024 44F26151 		movw	r1, #17761
 1510 0028 7868     		ldr	r0, [r7, #4]
 1511 002a FFF7FEFF 		bl	Ft_Gpu_HostCommand_Ext3
ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 38


 1512              		.loc 1 605 0
 1513 002e 21E0     		b	.L70
 1514              	.L66:
 596:FT_Eve_Hal/FT_Gpu_Hal.c **** 		Ft_Gpu_HostCommand_Ext3(host,
 1515              		.loc 1 596 0
 1516 0030 FB78     		ldrb	r3, [r7, #3]	@ zero_extendqisi2
 1517 0032 042B     		cmp	r3, #4
 1518 0034 05D1     		bne	.L67
 597:FT_Eve_Hal/FT_Gpu_Hal.c **** 				(ft_uint32_t) 0x61 | (0x40 << 8) | (0x04 << 8));
 1519              		.loc 1 597 0
 1520 0036 44F26141 		movw	r1, #17505
 1521 003a 7868     		ldr	r0, [r7, #4]
 1522 003c FFF7FEFF 		bl	Ft_Gpu_HostCommand_Ext3
 1523              		.loc 1 605 0
 1524 0040 18E0     		b	.L70
 1525              	.L67:
 599:FT_Eve_Hal/FT_Gpu_Hal.c **** 		Ft_Gpu_HostCommand_Ext3(host, (ft_uint32_t) 0x61 | (0x03 << 8));
 1526              		.loc 1 599 0
 1527 0042 FB78     		ldrb	r3, [r7, #3]	@ zero_extendqisi2
 1528 0044 032B     		cmp	r3, #3
 1529 0046 05D1     		bne	.L68
 600:FT_Eve_Hal/FT_Gpu_Hal.c **** 	else if (FT_GPU_SYSCLK_24M == freq)
 1530              		.loc 1 600 0
 1531 0048 40F26131 		movw	r1, #865
 1532 004c 7868     		ldr	r0, [r7, #4]
 1533 004e FFF7FEFF 		bl	Ft_Gpu_HostCommand_Ext3
 1534              		.loc 1 605 0
 1535 0052 0FE0     		b	.L70
 1536              	.L68:
 601:FT_Eve_Hal/FT_Gpu_Hal.c **** 		Ft_Gpu_HostCommand_Ext3(host, (ft_uint32_t) 0x61 | (0x02 << 8));
 1537              		.loc 1 601 0
 1538 0054 FB78     		ldrb	r3, [r7, #3]	@ zero_extendqisi2
 1539 0056 022B     		cmp	r3, #2
 1540 0058 05D1     		bne	.L69
 602:FT_Eve_Hal/FT_Gpu_Hal.c **** 	else if (FT_GPU_SYSCLK_DEFAULT == freq)		//default clock
 1541              		.loc 1 602 0
 1542 005a 40F26121 		movw	r1, #609
 1543 005e 7868     		ldr	r0, [r7, #4]
 1544 0060 FFF7FEFF 		bl	Ft_Gpu_HostCommand_Ext3
 1545              		.loc 1 605 0
 1546 0064 06E0     		b	.L70
 1547              	.L69:
 603:FT_Eve_Hal/FT_Gpu_Hal.c **** 		Ft_Gpu_HostCommand_Ext3(host, 0x61);
 1548              		.loc 1 603 0
 1549 0066 FB78     		ldrb	r3, [r7, #3]	@ zero_extendqisi2
 1550 0068 002B     		cmp	r3, #0
 1551 006a 03D1     		bne	.L70
 604:FT_Eve_Hal/FT_Gpu_Hal.c **** }
 1552              		.loc 1 604 0
 1553 006c 6121     		movs	r1, #97
 1554 006e 7868     		ldr	r0, [r7, #4]
 1555 0070 FFF7FEFF 		bl	Ft_Gpu_HostCommand_Ext3
 1556              	.L70:
 1557              		.loc 1 605 0
 1558 0074 00BF     		nop
 1559 0076 0837     		adds	r7, r7, #8
 1560              	.LCFI115:
ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 39


 1561              		.cfi_def_cfa_offset 8
 1562 0078 BD46     		mov	sp, r7
 1563              	.LCFI116:
 1564              		.cfi_def_cfa_register 13
 1565              		@ sp needed
 1566 007a 80BD     		pop	{r7, pc}
 1567              		.cfi_endproc
 1568              	.LFE160:
 1570              		.section	.text.Ft_GPU_81X_PowerOffComponents,"ax",%progbits
 1571              		.align	1
 1572              		.global	Ft_GPU_81X_PowerOffComponents
 1573              		.syntax unified
 1574              		.thumb
 1575              		.thumb_func
 1576              		.fpu fpv5-sp-d16
 1578              	Ft_GPU_81X_PowerOffComponents:
 1579              	.LFB161:
 606:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 607:FT_Eve_Hal/FT_Gpu_Hal.c **** //Power down or up ROMs and ADCs.  Specified one or more elements in the FT_GPU_81X_ROM_AND_ADC_T t
 608:FT_Eve_Hal/FT_Gpu_Hal.c **** ft_void_t Ft_GPU_81X_PowerOffComponents(Ft_Gpu_Hal_Context_t *host,
 609:FT_Eve_Hal/FT_Gpu_Hal.c **** 		ft_uint8_t val) {
 1580              		.loc 1 609 0
 1581              		.cfi_startproc
 1582              		@ args = 0, pretend = 0, frame = 8
 1583              		@ frame_needed = 1, uses_anonymous_args = 0
 1584 0000 80B5     		push	{r7, lr}
 1585              	.LCFI117:
 1586              		.cfi_def_cfa_offset 8
 1587              		.cfi_offset 7, -8
 1588              		.cfi_offset 14, -4
 1589 0002 82B0     		sub	sp, sp, #8
 1590              	.LCFI118:
 1591              		.cfi_def_cfa_offset 16
 1592 0004 00AF     		add	r7, sp, #0
 1593              	.LCFI119:
 1594              		.cfi_def_cfa_register 7
 1595 0006 7860     		str	r0, [r7, #4]
 1596 0008 0B46     		mov	r3, r1
 1597 000a FB70     		strb	r3, [r7, #3]
 610:FT_Eve_Hal/FT_Gpu_Hal.c **** 	Ft_Gpu_HostCommand_Ext3(host, (ft_uint32_t) 0x49 | (val << 8));
 1598              		.loc 1 610 0
 1599 000c FB78     		ldrb	r3, [r7, #3]	@ zero_extendqisi2
 1600 000e 1B02     		lsls	r3, r3, #8
 1601 0010 43F04903 		orr	r3, r3, #73
 1602 0014 1946     		mov	r1, r3
 1603 0016 7868     		ldr	r0, [r7, #4]
 1604 0018 FFF7FEFF 		bl	Ft_Gpu_HostCommand_Ext3
 611:FT_Eve_Hal/FT_Gpu_Hal.c **** }
 1605              		.loc 1 611 0
 1606 001c 00BF     		nop
 1607 001e 0837     		adds	r7, r7, #8
 1608              	.LCFI120:
 1609              		.cfi_def_cfa_offset 8
 1610 0020 BD46     		mov	sp, r7
 1611              	.LCFI121:
 1612              		.cfi_def_cfa_register 13
 1613              		@ sp needed
ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 40


 1614 0022 80BD     		pop	{r7, pc}
 1615              		.cfi_endproc
 1616              	.LFE161:
 1618              		.section	.text.Ft_GPU_81X_PadDriveStrength,"ax",%progbits
 1619              		.align	1
 1620              		.global	Ft_GPU_81X_PadDriveStrength
 1621              		.syntax unified
 1622              		.thumb
 1623              		.thumb_func
 1624              		.fpu fpv5-sp-d16
 1626              	Ft_GPU_81X_PadDriveStrength:
 1627              	.LFB162:
 612:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 613:FT_Eve_Hal/FT_Gpu_Hal.c **** //this API sets the current strength of supported GPIO/IO group(s)
 614:FT_Eve_Hal/FT_Gpu_Hal.c **** ft_void_t Ft_GPU_81X_PadDriveStrength(Ft_Gpu_Hal_Context_t *host,
 615:FT_Eve_Hal/FT_Gpu_Hal.c **** 		FT_GPU_81X_GPIO_DRIVE_STRENGTH_T strength,
 616:FT_Eve_Hal/FT_Gpu_Hal.c **** 		FT_GPU_81X_GPIO_GROUP_T group) {
 1628              		.loc 1 616 0
 1629              		.cfi_startproc
 1630              		@ args = 0, pretend = 0, frame = 8
 1631              		@ frame_needed = 1, uses_anonymous_args = 0
 1632 0000 80B5     		push	{r7, lr}
 1633              	.LCFI122:
 1634              		.cfi_def_cfa_offset 8
 1635              		.cfi_offset 7, -8
 1636              		.cfi_offset 14, -4
 1637 0002 82B0     		sub	sp, sp, #8
 1638              	.LCFI123:
 1639              		.cfi_def_cfa_offset 16
 1640 0004 00AF     		add	r7, sp, #0
 1641              	.LCFI124:
 1642              		.cfi_def_cfa_register 7
 1643 0006 7860     		str	r0, [r7, #4]
 1644 0008 0B46     		mov	r3, r1
 1645 000a FB70     		strb	r3, [r7, #3]
 1646 000c 1346     		mov	r3, r2
 1647 000e BB70     		strb	r3, [r7, #2]
 617:FT_Eve_Hal/FT_Gpu_Hal.c **** 	Ft_Gpu_HostCommand_Ext3(host,
 618:FT_Eve_Hal/FT_Gpu_Hal.c **** 			(ft_uint32_t) 0x70 | (group << 8) | (strength << 8));
 1648              		.loc 1 618 0
 1649 0010 BB78     		ldrb	r3, [r7, #2]	@ zero_extendqisi2
 1650 0012 1B02     		lsls	r3, r3, #8
 1651 0014 1A46     		mov	r2, r3
 1652 0016 FB78     		ldrb	r3, [r7, #3]	@ zero_extendqisi2
 1653 0018 1B02     		lsls	r3, r3, #8
 1654 001a 1343     		orrs	r3, r3, r2
 617:FT_Eve_Hal/FT_Gpu_Hal.c **** 	Ft_Gpu_HostCommand_Ext3(host,
 1655              		.loc 1 617 0
 1656 001c 43F07003 		orr	r3, r3, #112
 1657 0020 1946     		mov	r1, r3
 1658 0022 7868     		ldr	r0, [r7, #4]
 1659 0024 FFF7FEFF 		bl	Ft_Gpu_HostCommand_Ext3
 619:FT_Eve_Hal/FT_Gpu_Hal.c **** }
 1660              		.loc 1 619 0
 1661 0028 00BF     		nop
 1662 002a 0837     		adds	r7, r7, #8
 1663              	.LCFI125:
ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 41


 1664              		.cfi_def_cfa_offset 8
 1665 002c BD46     		mov	sp, r7
 1666              	.LCFI126:
 1667              		.cfi_def_cfa_register 13
 1668              		@ sp needed
 1669 002e 80BD     		pop	{r7, pc}
 1670              		.cfi_endproc
 1671              	.LFE162:
 1673              		.section	.text.Ft_Gpu_81X_ResetActive,"ax",%progbits
 1674              		.align	1
 1675              		.global	Ft_Gpu_81X_ResetActive
 1676              		.syntax unified
 1677              		.thumb
 1678              		.thumb_func
 1679              		.fpu fpv5-sp-d16
 1681              	Ft_Gpu_81X_ResetActive:
 1682              	.LFB163:
 620:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 621:FT_Eve_Hal/FT_Gpu_Hal.c **** //this API will hold the system reset active, Ft_Gpu_81X_ResetRemoval() must be called to release t
 622:FT_Eve_Hal/FT_Gpu_Hal.c **** ft_void_t Ft_Gpu_81X_ResetActive(Ft_Gpu_Hal_Context_t *host) {
 1683              		.loc 1 622 0
 1684              		.cfi_startproc
 1685              		@ args = 0, pretend = 0, frame = 8
 1686              		@ frame_needed = 1, uses_anonymous_args = 0
 1687 0000 80B5     		push	{r7, lr}
 1688              	.LCFI127:
 1689              		.cfi_def_cfa_offset 8
 1690              		.cfi_offset 7, -8
 1691              		.cfi_offset 14, -4
 1692 0002 82B0     		sub	sp, sp, #8
 1693              	.LCFI128:
 1694              		.cfi_def_cfa_offset 16
 1695 0004 00AF     		add	r7, sp, #0
 1696              	.LCFI129:
 1697              		.cfi_def_cfa_register 7
 1698 0006 7860     		str	r0, [r7, #4]
 623:FT_Eve_Hal/FT_Gpu_Hal.c **** 	Ft_Gpu_HostCommand_Ext3(host, FT_GPU_81X_RESET_ACTIVE);
 1699              		.loc 1 623 0
 1700 0008 4FF41A71 		mov	r1, #616
 1701 000c 7868     		ldr	r0, [r7, #4]
 1702 000e FFF7FEFF 		bl	Ft_Gpu_HostCommand_Ext3
 624:FT_Eve_Hal/FT_Gpu_Hal.c **** }
 1703              		.loc 1 624 0
 1704 0012 00BF     		nop
 1705 0014 0837     		adds	r7, r7, #8
 1706              	.LCFI130:
 1707              		.cfi_def_cfa_offset 8
 1708 0016 BD46     		mov	sp, r7
 1709              	.LCFI131:
 1710              		.cfi_def_cfa_register 13
 1711              		@ sp needed
 1712 0018 80BD     		pop	{r7, pc}
 1713              		.cfi_endproc
 1714              	.LFE163:
 1716              		.section	.text.Ft_Gpu_81X_ResetRemoval,"ax",%progbits
 1717              		.align	1
 1718              		.global	Ft_Gpu_81X_ResetRemoval
ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 42


 1719              		.syntax unified
 1720              		.thumb
 1721              		.thumb_func
 1722              		.fpu fpv5-sp-d16
 1724              	Ft_Gpu_81X_ResetRemoval:
 1725              	.LFB164:
 625:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 626:FT_Eve_Hal/FT_Gpu_Hal.c **** //This API will release the system reset, and the system will exit reset and behave as after POR, s
 627:FT_Eve_Hal/FT_Gpu_Hal.c **** ft_void_t Ft_Gpu_81X_ResetRemoval(Ft_Gpu_Hal_Context_t *host) {
 1726              		.loc 1 627 0
 1727              		.cfi_startproc
 1728              		@ args = 0, pretend = 0, frame = 8
 1729              		@ frame_needed = 1, uses_anonymous_args = 0
 1730 0000 80B5     		push	{r7, lr}
 1731              	.LCFI132:
 1732              		.cfi_def_cfa_offset 8
 1733              		.cfi_offset 7, -8
 1734              		.cfi_offset 14, -4
 1735 0002 82B0     		sub	sp, sp, #8
 1736              	.LCFI133:
 1737              		.cfi_def_cfa_offset 16
 1738 0004 00AF     		add	r7, sp, #0
 1739              	.LCFI134:
 1740              		.cfi_def_cfa_register 7
 1741 0006 7860     		str	r0, [r7, #4]
 628:FT_Eve_Hal/FT_Gpu_Hal.c **** 	Ft_Gpu_HostCommand_Ext3(host, FT_GPU_81X_RESET_REMOVAL);
 1742              		.loc 1 628 0
 1743 0008 42F26801 		movw	r1, #8296
 1744 000c 7868     		ldr	r0, [r7, #4]
 1745 000e FFF7FEFF 		bl	Ft_Gpu_HostCommand_Ext3
 629:FT_Eve_Hal/FT_Gpu_Hal.c **** }
 1746              		.loc 1 629 0
 1747 0012 00BF     		nop
 1748 0014 0837     		adds	r7, r7, #8
 1749              	.LCFI135:
 1750              		.cfi_def_cfa_offset 8
 1751 0016 BD46     		mov	sp, r7
 1752              	.LCFI136:
 1753              		.cfi_def_cfa_register 13
 1754              		@ sp needed
 1755 0018 80BD     		pop	{r7, pc}
 1756              		.cfi_endproc
 1757              	.LFE164:
 1759              		.section	.text.Ft_Gpu_HostCommand_Ext3,"ax",%progbits
 1760              		.align	1
 1761              		.global	Ft_Gpu_HostCommand_Ext3
 1762              		.syntax unified
 1763              		.thumb
 1764              		.thumb_func
 1765              		.fpu fpv5-sp-d16
 1767              	Ft_Gpu_HostCommand_Ext3:
 1768              	.LFB165:
 630:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
 631:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 632:FT_Eve_Hal/FT_Gpu_Hal.c **** //This API sends a 3byte command to the host
 633:FT_Eve_Hal/FT_Gpu_Hal.c **** ft_void_t Ft_Gpu_HostCommand_Ext3(Ft_Gpu_Hal_Context_t *host, ft_uint32_t cmd) {
 1769              		.loc 1 633 0
ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 43


 1770              		.cfi_startproc
 1771              		@ args = 0, pretend = 0, frame = 16
 1772              		@ frame_needed = 1, uses_anonymous_args = 0
 1773 0000 80B5     		push	{r7, lr}
 1774              	.LCFI137:
 1775              		.cfi_def_cfa_offset 8
 1776              		.cfi_offset 7, -8
 1777              		.cfi_offset 14, -4
 1778 0002 84B0     		sub	sp, sp, #16
 1779              	.LCFI138:
 1780              		.cfi_def_cfa_offset 24
 1781 0004 00AF     		add	r7, sp, #0
 1782              	.LCFI139:
 1783              		.cfi_def_cfa_register 7
 1784 0006 7860     		str	r0, [r7, #4]
 1785 0008 3960     		str	r1, [r7]
 634:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef STM32F7
 635:FT_Eve_Hal/FT_Gpu_Hal.c **** 	unsigned char cTempAddr[3];							// FT800 Memory Address
 636:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 637:FT_Eve_Hal/FT_Gpu_Hal.c **** 	cTempAddr[2] = (char) (cmd | 0xff);	// Compose the command and address to send
 1786              		.loc 1 637 0
 1787 000a FF23     		movs	r3, #255
 1788 000c BB72     		strb	r3, [r7, #10]
 638:FT_Eve_Hal/FT_Gpu_Hal.c **** 	cTempAddr[1] = (char) ((cmd >> 8) & 0xff);					// middle byte
 1789              		.loc 1 638 0
 1790 000e 3B68     		ldr	r3, [r7]
 1791 0010 1B0A     		lsrs	r3, r3, #8
 1792 0012 DBB2     		uxtb	r3, r3
 1793 0014 7B72     		strb	r3, [r7, #9]
 639:FT_Eve_Hal/FT_Gpu_Hal.c **** 	cTempAddr[0] = (char) ((cmd >> 16) & 0xff);						// low byte
 1794              		.loc 1 639 0
 1795 0016 3B68     		ldr	r3, [r7]
 1796 0018 1B0C     		lsrs	r3, r3, #16
 1797 001a DBB2     		uxtb	r3, r3
 1798 001c 3B72     		strb	r3, [r7, #8]
 640:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 641:FT_Eve_Hal/FT_Gpu_Hal.c **** 	HAL_GPIO_WritePin(GPIOB, FT800_CS_N, GPIO_PIN_RESET);// Set chip select low
 1799              		.loc 1 641 0
 1800 001e 0022     		movs	r2, #0
 1801 0020 0221     		movs	r1, #2
 1802 0022 1448     		ldr	r0, .L80
 1803 0024 FFF7FEFF 		bl	HAL_GPIO_WritePin
 1804              	.LBB15:
 642:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 643:FT_Eve_Hal/FT_Gpu_Hal.c **** 	for (int i = 2; i >= 0; i--) {
 1805              		.loc 1 643 0
 1806 0028 0223     		movs	r3, #2
 1807 002a FB60     		str	r3, [r7, #12]
 1808 002c 16E0     		b	.L76
 1809              	.L79:
 644:FT_Eve_Hal/FT_Gpu_Hal.c **** 		if (HAL_SPI_Transmit(&hspi1, (uint8_t *) &cTempAddr[i], 1,
 1810              		.loc 1 644 0
 1811 002e 07F10802 		add	r2, r7, #8
 1812 0032 FB68     		ldr	r3, [r7, #12]
 1813 0034 D118     		adds	r1, r2, r3
 1814 0036 4FF0FF33 		mov	r3, #-1
 1815 003a 0122     		movs	r2, #1
ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 44


 1816 003c 0E48     		ldr	r0, .L80+4
 1817 003e FFF7FEFF 		bl	HAL_SPI_Transmit
 1818 0042 0346     		mov	r3, r0
 1819 0044 002B     		cmp	r3, #0
 1820 0046 03D0     		beq	.L77
 1821              	.LBB16:
 645:FT_Eve_Hal/FT_Gpu_Hal.c **** 		HAL_MAX_DELAY) != HAL_OK) {
 646:FT_Eve_Hal/FT_Gpu_Hal.c **** 			my_printf("FAILED TO TRANSMIT in Ft_Gpu_HostCommand\n");
 1822              		.loc 1 646 0
 1823 0048 0C48     		ldr	r0, .L80+8
 1824 004a FFF7FEFF 		bl	my_printf
 1825              	.LBE16:
 1826 004e 02E0     		b	.L78
 1827              	.L77:
 1828              	.LBB17:
 647:FT_Eve_Hal/FT_Gpu_Hal.c **** 		} 			// Send Memory Write plus high address byte
 648:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 649:FT_Eve_Hal/FT_Gpu_Hal.c **** 		else {
 650:FT_Eve_Hal/FT_Gpu_Hal.c **** 			my_printf("SUCCESSFUL TRANSMISSION\n");
 1829              		.loc 1 650 0
 1830 0050 0B48     		ldr	r0, .L80+12
 1831 0052 FFF7FEFF 		bl	my_printf
 1832              	.L78:
 1833              	.LBE17:
 643:FT_Eve_Hal/FT_Gpu_Hal.c **** 		if (HAL_SPI_Transmit(&hspi1, (uint8_t *) &cTempAddr[i], 1,
 1834              		.loc 1 643 0 discriminator 2
 1835 0056 FB68     		ldr	r3, [r7, #12]
 1836 0058 013B     		subs	r3, r3, #1
 1837 005a FB60     		str	r3, [r7, #12]
 1838              	.L76:
 643:FT_Eve_Hal/FT_Gpu_Hal.c **** 		if (HAL_SPI_Transmit(&hspi1, (uint8_t *) &cTempAddr[i], 1,
 1839              		.loc 1 643 0 is_stmt 0 discriminator 1
 1840 005c FB68     		ldr	r3, [r7, #12]
 1841 005e 002B     		cmp	r3, #0
 1842 0060 E5DA     		bge	.L79
 1843              	.LBE15:
 651:FT_Eve_Hal/FT_Gpu_Hal.c **** 		}
 652:FT_Eve_Hal/FT_Gpu_Hal.c **** 	}
 653:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 654:FT_Eve_Hal/FT_Gpu_Hal.c **** 	HAL_GPIO_WritePin(GPIOB, FT800_CS_N, GPIO_PIN_SET);	// Set chip select high
 1844              		.loc 1 654 0 is_stmt 1
 1845 0062 0122     		movs	r2, #1
 1846 0064 0221     		movs	r1, #2
 1847 0066 0348     		ldr	r0, .L80
 1848 0068 FFF7FEFF 		bl	HAL_GPIO_WritePin
 655:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
 656:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef FT900_PLATFORM
 657:FT_Eve_Hal/FT_Gpu_Hal.c **** 	ft_uint8_t hcmd[4] = {0};
 658:FT_Eve_Hal/FT_Gpu_Hal.c **** 	hcmd[0] = cmd & 0xff;
 659:FT_Eve_Hal/FT_Gpu_Hal.c **** 	hcmd[1] = (cmd>>8) & 0xff;
 660:FT_Eve_Hal/FT_Gpu_Hal.c **** 	hcmd[2] = (cmd>>16) & 0xff;
 661:FT_Eve_Hal/FT_Gpu_Hal.c **** 	hcmd[3] = 0;
 662:FT_Eve_Hal/FT_Gpu_Hal.c **** 	spi_open(SPIM,host->hal_config.spi_cs_pin_no);
 663:FT_Eve_Hal/FT_Gpu_Hal.c **** 	spi_writen(SPIM,hcmd,3);
 664:FT_Eve_Hal/FT_Gpu_Hal.c **** 	spi_close(SPIM,host->hal_config.spi_cs_pin_no);
 665:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 666:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 45


 667:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef MSVC_PLATFORM_SPI
 668:FT_Eve_Hal/FT_Gpu_Hal.c **** 	ft_uint8_t Transfer_Array[3];
 669:FT_Eve_Hal/FT_Gpu_Hal.c **** 	ft_uint32_t SizeTransfered;
 670:FT_Eve_Hal/FT_Gpu_Hal.c **** 	ft_uint16_t SizeTransfered16;
 671:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 672:FT_Eve_Hal/FT_Gpu_Hal.c **** 	Transfer_Array[0] = cmd;
 673:FT_Eve_Hal/FT_Gpu_Hal.c **** 	Transfer_Array[1] = (cmd>>8) & 0xff;
 674:FT_Eve_Hal/FT_Gpu_Hal.c **** 	Transfer_Array[2] = (cmd>>16) & 0xff;
 675:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef MSVC_PLATFORM_LIBMPSSE
 676:FT_Eve_Hal/FT_Gpu_Hal.c **** 	SPI_Write(host->hal_handle,Transfer_Array,sizeof(Transfer_Array),&SizeTransfered,SPI_TRANSFER_OPTI
 677:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
 678:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 679:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef MSVC_PLATFORM_Lib4222
 680:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 681:FT_Eve_Hal/FT_Gpu_Hal.c **** 	FT4222_SPIMaster_SingleWrite((FT_HANDLE)host->hal_handle, Transfer_Array,sizeof(Transfer_Array),&S
 682:FT_Eve_Hal/FT_Gpu_Hal.c **** 	SizeTransfered = SizeTransfered16;
 683:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 684:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
 685:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
 686:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef ARDUINO_PLATFORM_SPI
 687:FT_Eve_Hal/FT_Gpu_Hal.c **** 	digitalWrite(host->hal_config.spi_cs_pin_no, LOW);
 688:FT_Eve_Hal/FT_Gpu_Hal.c **** 	SPI.transfer(cmd);
 689:FT_Eve_Hal/FT_Gpu_Hal.c **** 	SPI.transfer((cmd>>8) & 0xff);
 690:FT_Eve_Hal/FT_Gpu_Hal.c **** 	SPI.transfer((cmd>>16) & 0xff);
 691:FT_Eve_Hal/FT_Gpu_Hal.c **** 	digitalWrite(host->hal_config.spi_cs_pin_no, HIGH);
 692:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
 693:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef MSVC_FT800EMU
 694:FT_Eve_Hal/FT_Gpu_Hal.c **** 	//Not implemented in FT800EMU
 695:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
 696:FT_Eve_Hal/FT_Gpu_Hal.c **** }
 1849              		.loc 1 696 0
 1850 006c 00BF     		nop
 1851 006e 1037     		adds	r7, r7, #16
 1852              	.LCFI140:
 1853              		.cfi_def_cfa_offset 8
 1854 0070 BD46     		mov	sp, r7
 1855              	.LCFI141:
 1856              		.cfi_def_cfa_register 13
 1857              		@ sp needed
 1858 0072 80BD     		pop	{r7, pc}
 1859              	.L81:
 1860              		.align	2
 1861              	.L80:
 1862 0074 00040240 		.word	1073873920
 1863 0078 00000000 		.word	hspi1
 1864 007c 9C000000 		.word	.LC4
 1865 0080 28000000 		.word	.LC1
 1866              		.cfi_endproc
 1867              	.LFE165:
 1869              		.section	.text.Ft_Gpu_Hal_Updatecmdfifo,"ax",%progbits
 1870              		.align	1
 1871              		.global	Ft_Gpu_Hal_Updatecmdfifo
 1872              		.syntax unified
 1873              		.thumb
 1874              		.thumb_func
 1875              		.fpu fpv5-sp-d16
 1877              	Ft_Gpu_Hal_Updatecmdfifo:
ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 46


 1878              	.LFB166:
 697:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 698:FT_Eve_Hal/FT_Gpu_Hal.c **** ft_void_t Ft_Gpu_Hal_Updatecmdfifo(Ft_Gpu_Hal_Context_t *host,
 699:FT_Eve_Hal/FT_Gpu_Hal.c **** 		ft_uint32_t count) {
 1879              		.loc 1 699 0
 1880              		.cfi_startproc
 1881              		@ args = 0, pretend = 0, frame = 8
 1882              		@ frame_needed = 1, uses_anonymous_args = 0
 1883 0000 80B5     		push	{r7, lr}
 1884              	.LCFI142:
 1885              		.cfi_def_cfa_offset 8
 1886              		.cfi_offset 7, -8
 1887              		.cfi_offset 14, -4
 1888 0002 82B0     		sub	sp, sp, #8
 1889              	.LCFI143:
 1890              		.cfi_def_cfa_offset 16
 1891 0004 00AF     		add	r7, sp, #0
 1892              	.LCFI144:
 1893              		.cfi_def_cfa_register 7
 1894 0006 7860     		str	r0, [r7, #4]
 1895 0008 3960     		str	r1, [r7]
 700:FT_Eve_Hal/FT_Gpu_Hal.c **** 	host->ft_cmd_fifo_wp = (host->ft_cmd_fifo_wp + count) & 4095;
 1896              		.loc 1 700 0
 1897 000a 7B68     		ldr	r3, [r7, #4]
 1898 000c 1A89     		ldrh	r2, [r3, #8]
 1899 000e 3B68     		ldr	r3, [r7]
 1900 0010 9BB2     		uxth	r3, r3
 1901 0012 1344     		add	r3, r3, r2
 1902 0014 9BB2     		uxth	r3, r3
 1903 0016 C3F30B03 		ubfx	r3, r3, #0, #12
 1904 001a 9AB2     		uxth	r2, r3
 1905 001c 7B68     		ldr	r3, [r7, #4]
 1906 001e 1A81     		strh	r2, [r3, #8]	@ movhi
 701:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 702:FT_Eve_Hal/FT_Gpu_Hal.c **** 	//4 byte alignment
 703:FT_Eve_Hal/FT_Gpu_Hal.c **** 	host->ft_cmd_fifo_wp = (host->ft_cmd_fifo_wp + 3) & 0xffc;
 1907              		.loc 1 703 0
 1908 0020 7B68     		ldr	r3, [r7, #4]
 1909 0022 1B89     		ldrh	r3, [r3, #8]
 1910 0024 0333     		adds	r3, r3, #3
 1911 0026 9AB2     		uxth	r2, r3
 1912 0028 40F6FC73 		movw	r3, #4092
 1913 002c 1340     		ands	r3, r3, r2
 1914 002e 9AB2     		uxth	r2, r3
 1915 0030 7B68     		ldr	r3, [r7, #4]
 1916 0032 1A81     		strh	r2, [r3, #8]	@ movhi
 704:FT_Eve_Hal/FT_Gpu_Hal.c **** 	Ft_Gpu_Hal_Wr16(host, REG_CMD_WRITE, host->ft_cmd_fifo_wp);
 1917              		.loc 1 704 0
 1918 0034 7B68     		ldr	r3, [r7, #4]
 1919 0036 1B89     		ldrh	r3, [r3, #8]
 1920 0038 1A46     		mov	r2, r3
 1921 003a 0449     		ldr	r1, .L83
 1922 003c 7868     		ldr	r0, [r7, #4]
 1923 003e FFF7FEFF 		bl	Ft_Gpu_Hal_Wr16
 705:FT_Eve_Hal/FT_Gpu_Hal.c **** }
 1924              		.loc 1 705 0
 1925 0042 00BF     		nop
ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 47


 1926 0044 0837     		adds	r7, r7, #8
 1927              	.LCFI145:
 1928              		.cfi_def_cfa_offset 8
 1929 0046 BD46     		mov	sp, r7
 1930              	.LCFI146:
 1931              		.cfi_def_cfa_register 13
 1932              		@ sp needed
 1933 0048 80BD     		pop	{r7, pc}
 1934              	.L84:
 1935 004a 00BF     		.align	2
 1936              	.L83:
 1937 004c FC203000 		.word	3154172
 1938              		.cfi_endproc
 1939              	.LFE166:
 1941              		.section	.text.Ft_Gpu_Cmdfifo_Freespace,"ax",%progbits
 1942              		.align	1
 1943              		.global	Ft_Gpu_Cmdfifo_Freespace
 1944              		.syntax unified
 1945              		.thumb
 1946              		.thumb_func
 1947              		.fpu fpv5-sp-d16
 1949              	Ft_Gpu_Cmdfifo_Freespace:
 1950              	.LFB167:
 706:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 707:FT_Eve_Hal/FT_Gpu_Hal.c **** ft_uint16_t Ft_Gpu_Cmdfifo_Freespace(Ft_Gpu_Hal_Context_t *host) {
 1951              		.loc 1 707 0
 1952              		.cfi_startproc
 1953              		@ args = 0, pretend = 0, frame = 16
 1954              		@ frame_needed = 1, uses_anonymous_args = 0
 1955 0000 90B5     		push	{r4, r7, lr}
 1956              	.LCFI147:
 1957              		.cfi_def_cfa_offset 12
 1958              		.cfi_offset 4, -12
 1959              		.cfi_offset 7, -8
 1960              		.cfi_offset 14, -4
 1961 0002 85B0     		sub	sp, sp, #20
 1962              	.LCFI148:
 1963              		.cfi_def_cfa_offset 32
 1964 0004 00AF     		add	r7, sp, #0
 1965              	.LCFI149:
 1966              		.cfi_def_cfa_register 7
 1967 0006 7860     		str	r0, [r7, #4]
 708:FT_Eve_Hal/FT_Gpu_Hal.c **** 	ft_uint16_t fullness, retval;
 709:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 710:FT_Eve_Hal/FT_Gpu_Hal.c **** 	//host->ft_cmd_fifo_wp = Ft_Gpu_Hal_Rd16(host,REG_CMD_WRITE);
 711:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 712:FT_Eve_Hal/FT_Gpu_Hal.c **** 	fullness = (host->ft_cmd_fifo_wp - Ft_Gpu_Hal_Rd16(host, REG_CMD_READ))
 1968              		.loc 1 712 0
 1969 0008 7B68     		ldr	r3, [r7, #4]
 1970 000a 1C89     		ldrh	r4, [r3, #8]
 1971 000c 0949     		ldr	r1, .L87
 1972 000e 7868     		ldr	r0, [r7, #4]
 1973 0010 FFF7FEFF 		bl	Ft_Gpu_Hal_Rd16
 1974 0014 0346     		mov	r3, r0
 713:FT_Eve_Hal/FT_Gpu_Hal.c **** 			& 4095;
 1975              		.loc 1 713 0
 1976 0016 E31A     		subs	r3, r4, r3
ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 48


 1977 0018 9BB2     		uxth	r3, r3
 712:FT_Eve_Hal/FT_Gpu_Hal.c **** 			& 4095;
 1978              		.loc 1 712 0
 1979 001a C3F30B03 		ubfx	r3, r3, #0, #12
 1980 001e FB81     		strh	r3, [r7, #14]	@ movhi
 714:FT_Eve_Hal/FT_Gpu_Hal.c **** 	retval = (FT_CMD_FIFO_SIZE - 4) - fullness;
 1981              		.loc 1 714 0
 1982 0020 FB89     		ldrh	r3, [r7, #14]	@ movhi
 1983 0022 C3F57F63 		rsb	r3, r3, #4080
 1984 0026 0C33     		adds	r3, r3, #12
 1985 0028 BB81     		strh	r3, [r7, #12]	@ movhi
 715:FT_Eve_Hal/FT_Gpu_Hal.c **** 	return (retval);
 1986              		.loc 1 715 0
 1987 002a BB89     		ldrh	r3, [r7, #12]
 716:FT_Eve_Hal/FT_Gpu_Hal.c **** }
 1988              		.loc 1 716 0
 1989 002c 1846     		mov	r0, r3
 1990 002e 1437     		adds	r7, r7, #20
 1991              	.LCFI150:
 1992              		.cfi_def_cfa_offset 12
 1993 0030 BD46     		mov	sp, r7
 1994              	.LCFI151:
 1995              		.cfi_def_cfa_register 13
 1996              		@ sp needed
 1997 0032 90BD     		pop	{r4, r7, pc}
 1998              	.L88:
 1999              		.align	2
 2000              	.L87:
 2001 0034 F8203000 		.word	3154168
 2002              		.cfi_endproc
 2003              	.LFE167:
 2005              		.section	.text.Ft_Gpu_Hal_WrCmdBuf,"ax",%progbits
 2006              		.align	1
 2007              		.global	Ft_Gpu_Hal_WrCmdBuf
 2008              		.syntax unified
 2009              		.thumb
 2010              		.thumb_func
 2011              		.fpu fpv5-sp-d16
 2013              	Ft_Gpu_Hal_WrCmdBuf:
 2014              	.LFB168:
 717:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 718:FT_Eve_Hal/FT_Gpu_Hal.c **** ft_void_t Ft_Gpu_Hal_WrCmdBuf(Ft_Gpu_Hal_Context_t *host, ft_uint8_t *buffer,
 719:FT_Eve_Hal/FT_Gpu_Hal.c **** 		ft_uint32_t count) {
 2015              		.loc 1 719 0
 2016              		.cfi_startproc
 2017              		@ args = 0, pretend = 0, frame = 32
 2018              		@ frame_needed = 1, uses_anonymous_args = 0
 2019 0000 80B5     		push	{r7, lr}
 2020              	.LCFI152:
 2021              		.cfi_def_cfa_offset 8
 2022              		.cfi_offset 7, -8
 2023              		.cfi_offset 14, -4
 2024 0002 88B0     		sub	sp, sp, #32
 2025              	.LCFI153:
 2026              		.cfi_def_cfa_offset 40
 2027 0004 00AF     		add	r7, sp, #0
 2028              	.LCFI154:
ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 49


 2029              		.cfi_def_cfa_register 7
 2030 0006 F860     		str	r0, [r7, #12]
 2031 0008 B960     		str	r1, [r7, #8]
 2032 000a 7A60     		str	r2, [r7, #4]
 720:FT_Eve_Hal/FT_Gpu_Hal.c **** 	ft_int32_t length = 0, SizeTransfered = 0, availablefreesize;
 2033              		.loc 1 720 0
 2034 000c 0023     		movs	r3, #0
 2035 000e FB61     		str	r3, [r7, #28]
 2036 0010 0023     		movs	r3, #0
 2037 0012 BB61     		str	r3, [r7, #24]
 2038              	.L93:
 721:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 722:FT_Eve_Hal/FT_Gpu_Hal.c **** #define MAX_CMD_FIFO_TRANSFER   Ft_Gpu_Cmdfifo_Freespace(host)
 723:FT_Eve_Hal/FT_Gpu_Hal.c **** 	do {
 724:FT_Eve_Hal/FT_Gpu_Hal.c **** 		length = count;
 2039              		.loc 1 724 0
 2040 0014 7B68     		ldr	r3, [r7, #4]
 2041 0016 FB61     		str	r3, [r7, #28]
 725:FT_Eve_Hal/FT_Gpu_Hal.c **** 		availablefreesize = MAX_CMD_FIFO_TRANSFER;
 2042              		.loc 1 725 0
 2043 0018 F868     		ldr	r0, [r7, #12]
 2044 001a FFF7FEFF 		bl	Ft_Gpu_Cmdfifo_Freespace
 2045 001e 0346     		mov	r3, r0
 2046 0020 7B61     		str	r3, [r7, #20]
 726:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 727:FT_Eve_Hal/FT_Gpu_Hal.c **** 		if (length > availablefreesize) {
 2047              		.loc 1 727 0
 2048 0022 FA69     		ldr	r2, [r7, #28]
 2049 0024 7B69     		ldr	r3, [r7, #20]
 2050 0026 9A42     		cmp	r2, r3
 2051 0028 01DD     		ble	.L90
 728:FT_Eve_Hal/FT_Gpu_Hal.c **** 			length = availablefreesize;
 2052              		.loc 1 728 0
 2053 002a 7B69     		ldr	r3, [r7, #20]
 2054 002c FB61     		str	r3, [r7, #28]
 2055              	.L90:
 729:FT_Eve_Hal/FT_Gpu_Hal.c **** 		}
 730:FT_Eve_Hal/FT_Gpu_Hal.c **** 		Ft_Gpu_Hal_CheckCmdBuffer(host, length);
 2056              		.loc 1 730 0
 2057 002e FB69     		ldr	r3, [r7, #28]
 2058 0030 1946     		mov	r1, r3
 2059 0032 F868     		ldr	r0, [r7, #12]
 2060 0034 FFF7FEFF 		bl	Ft_Gpu_Hal_CheckCmdBuffer
 731:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 732:FT_Eve_Hal/FT_Gpu_Hal.c **** 		Ft_Gpu_Hal_StartCmdTransfer(host, FT_GPU_WRITE, length);
 2061              		.loc 1 732 0
 2062 0038 FB69     		ldr	r3, [r7, #28]
 2063 003a 9BB2     		uxth	r3, r3
 2064 003c 1A46     		mov	r2, r3
 2065 003e 0121     		movs	r1, #1
 2066 0040 F868     		ldr	r0, [r7, #12]
 2067 0042 FFF7FEFF 		bl	Ft_Gpu_Hal_StartCmdTransfer
 733:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef STM32F7
 734:FT_Eve_Hal/FT_Gpu_Hal.c **** 		SizeTransfered = 0;
 2068              		.loc 1 734 0
 2069 0046 0023     		movs	r3, #0
 2070 0048 BB61     		str	r3, [r7, #24]
ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 50


 735:FT_Eve_Hal/FT_Gpu_Hal.c **** 		while (length--) {
 2071              		.loc 1 735 0
 2072 004a 0BE0     		b	.L91
 2073              	.L92:
 736:FT_Eve_Hal/FT_Gpu_Hal.c **** 			Ft_Gpu_Hal_Transfer8(host, *buffer);
 2074              		.loc 1 736 0
 2075 004c BB68     		ldr	r3, [r7, #8]
 2076 004e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2077 0050 1946     		mov	r1, r3
 2078 0052 F868     		ldr	r0, [r7, #12]
 2079 0054 FFF7FEFF 		bl	Ft_Gpu_Hal_Transfer8
 737:FT_Eve_Hal/FT_Gpu_Hal.c **** 			buffer++;
 2080              		.loc 1 737 0
 2081 0058 BB68     		ldr	r3, [r7, #8]
 2082 005a 0133     		adds	r3, r3, #1
 2083 005c BB60     		str	r3, [r7, #8]
 738:FT_Eve_Hal/FT_Gpu_Hal.c **** 			SizeTransfered++;
 2084              		.loc 1 738 0
 2085 005e BB69     		ldr	r3, [r7, #24]
 2086 0060 0133     		adds	r3, r3, #1
 2087 0062 BB61     		str	r3, [r7, #24]
 2088              	.L91:
 735:FT_Eve_Hal/FT_Gpu_Hal.c **** 			Ft_Gpu_Hal_Transfer8(host, *buffer);
 2089              		.loc 1 735 0
 2090 0064 FB69     		ldr	r3, [r7, #28]
 2091 0066 5A1E     		subs	r2, r3, #1
 2092 0068 FA61     		str	r2, [r7, #28]
 2093 006a 002B     		cmp	r3, #0
 2094 006c EED1     		bne	.L92
 739:FT_Eve_Hal/FT_Gpu_Hal.c **** 		}
 740:FT_Eve_Hal/FT_Gpu_Hal.c **** 		length = SizeTransfered;
 2095              		.loc 1 740 0
 2096 006e BB69     		ldr	r3, [r7, #24]
 2097 0070 FB61     		str	r3, [r7, #28]
 741:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
 742:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef FT900_PLATFORM
 743:FT_Eve_Hal/FT_Gpu_Hal.c **** 		spi_writen(SPIM,buffer,length);
 744:FT_Eve_Hal/FT_Gpu_Hal.c **** 		buffer += length;
 745:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
 746:FT_Eve_Hal/FT_Gpu_Hal.c **** #if defined(ARDUINO_PLATFORM_SPI) || defined(MSVC_FT800EMU)
 747:FT_Eve_Hal/FT_Gpu_Hal.c **** 		SizeTransfered = 0;
 748:FT_Eve_Hal/FT_Gpu_Hal.c **** 		while (length--) {
 749:FT_Eve_Hal/FT_Gpu_Hal.c **** 			Ft_Gpu_Hal_Transfer8(host,*buffer);
 750:FT_Eve_Hal/FT_Gpu_Hal.c **** 			buffer++;
 751:FT_Eve_Hal/FT_Gpu_Hal.c **** 			SizeTransfered ++;
 752:FT_Eve_Hal/FT_Gpu_Hal.c **** 		}
 753:FT_Eve_Hal/FT_Gpu_Hal.c **** 		length = SizeTransfered;
 754:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
 755:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 756:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef MSVC_PLATFORM_SPI
 757:FT_Eve_Hal/FT_Gpu_Hal.c **** 		{
 758:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef MSVC_PLATFORM_LIBMPSSE
 759:FT_Eve_Hal/FT_Gpu_Hal.c **** 			SPI_Write(host->hal_handle,buffer,length,&SizeTransfered,SPI_TRANSFER_OPTIONS_SIZE_IN_BYTES);
 760:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
 761:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef MSVC_PLATFORM_Lib4222
 762:FT_Eve_Hal/FT_Gpu_Hal.c **** 			ft_uint16_t SizeTransfered16;
 763:FT_Eve_Hal/FT_Gpu_Hal.c **** 			FT4222_SPIMaster_SingleWrite((FT_HANDLE)host->hal_handle, buffer,length,&SizeTransfered16,TRUE);
ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 51


 764:FT_Eve_Hal/FT_Gpu_Hal.c **** 			SizeTransfered = SizeTransfered16;
 765:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 766:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
 767:FT_Eve_Hal/FT_Gpu_Hal.c **** 			length = SizeTransfered;
 768:FT_Eve_Hal/FT_Gpu_Hal.c **** 			buffer += SizeTransfered;
 769:FT_Eve_Hal/FT_Gpu_Hal.c **** 		}
 770:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
 771:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 772:FT_Eve_Hal/FT_Gpu_Hal.c **** 		Ft_Gpu_Hal_EndTransfer(host);
 2098              		.loc 1 772 0
 2099 0072 F868     		ldr	r0, [r7, #12]
 2100 0074 FFF7FEFF 		bl	Ft_Gpu_Hal_EndTransfer
 773:FT_Eve_Hal/FT_Gpu_Hal.c **** 		Ft_Gpu_Hal_Updatecmdfifo(host, length);
 2101              		.loc 1 773 0
 2102 0078 FB69     		ldr	r3, [r7, #28]
 2103 007a 1946     		mov	r1, r3
 2104 007c F868     		ldr	r0, [r7, #12]
 2105 007e FFF7FEFF 		bl	Ft_Gpu_Hal_Updatecmdfifo
 774:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 775:FT_Eve_Hal/FT_Gpu_Hal.c **** 		Ft_Gpu_Hal_WaitCmdfifo_empty(host);
 2106              		.loc 1 775 0
 2107 0082 F868     		ldr	r0, [r7, #12]
 2108 0084 FFF7FEFF 		bl	Ft_Gpu_Hal_WaitCmdfifo_empty
 776:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 777:FT_Eve_Hal/FT_Gpu_Hal.c **** 		count -= length;
 2109              		.loc 1 777 0
 2110 0088 FB69     		ldr	r3, [r7, #28]
 2111 008a 7A68     		ldr	r2, [r7, #4]
 2112 008c D31A     		subs	r3, r2, r3
 2113 008e 7B60     		str	r3, [r7, #4]
 778:FT_Eve_Hal/FT_Gpu_Hal.c **** 	} while (count > 0);
 2114              		.loc 1 778 0
 2115 0090 7B68     		ldr	r3, [r7, #4]
 2116 0092 002B     		cmp	r3, #0
 2117 0094 BED1     		bne	.L93
 779:FT_Eve_Hal/FT_Gpu_Hal.c **** }
 2118              		.loc 1 779 0
 2119 0096 00BF     		nop
 2120 0098 2037     		adds	r7, r7, #32
 2121              	.LCFI155:
 2122              		.cfi_def_cfa_offset 8
 2123 009a BD46     		mov	sp, r7
 2124              	.LCFI156:
 2125              		.cfi_def_cfa_register 13
 2126              		@ sp needed
 2127 009c 80BD     		pop	{r7, pc}
 2128              		.cfi_endproc
 2129              	.LFE168:
 2131              		.section	.text.Ft_Gpu_Hal_CheckCmdBuffer,"ax",%progbits
 2132              		.align	1
 2133              		.global	Ft_Gpu_Hal_CheckCmdBuffer
 2134              		.syntax unified
 2135              		.thumb
 2136              		.thumb_func
 2137              		.fpu fpv5-sp-d16
 2139              	Ft_Gpu_Hal_CheckCmdBuffer:
 2140              	.LFB169:
ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 52


 780:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 781:FT_Eve_Hal/FT_Gpu_Hal.c **** #if defined (ARDUINO_PLATFORM_SPI) || defined (FT900_PLATFORM)
 782:FT_Eve_Hal/FT_Gpu_Hal.c **** ft_void_t Ft_Gpu_Hal_WrCmdBufFromFlash(Ft_Gpu_Hal_Context_t *host,FT_PROGMEM ft_prog_uchar8_t *buff
 783:FT_Eve_Hal/FT_Gpu_Hal.c **** {
 784:FT_Eve_Hal/FT_Gpu_Hal.c **** 	ft_uint32_t length =0, SizeTransfered = 0;
 785:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 786:FT_Eve_Hal/FT_Gpu_Hal.c **** #define MAX_CMD_FIFO_TRANSFER   Ft_Gpu_Cmdfifo_Freespace(host)
 787:FT_Eve_Hal/FT_Gpu_Hal.c **** 	do {
 788:FT_Eve_Hal/FT_Gpu_Hal.c **** 		length = count;
 789:FT_Eve_Hal/FT_Gpu_Hal.c **** 		if (length > MAX_CMD_FIFO_TRANSFER) {
 790:FT_Eve_Hal/FT_Gpu_Hal.c **** 			length = MAX_CMD_FIFO_TRANSFER;
 791:FT_Eve_Hal/FT_Gpu_Hal.c **** 		}
 792:FT_Eve_Hal/FT_Gpu_Hal.c **** 		Ft_Gpu_Hal_CheckCmdBuffer(host,length);
 793:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 794:FT_Eve_Hal/FT_Gpu_Hal.c **** 		Ft_Gpu_Hal_StartCmdTransfer(host,FT_GPU_WRITE,length);
 795:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 796:FT_Eve_Hal/FT_Gpu_Hal.c **** 		SizeTransfered = 0;
 797:FT_Eve_Hal/FT_Gpu_Hal.c **** 		while (length--) {
 798:FT_Eve_Hal/FT_Gpu_Hal.c **** 			Ft_Gpu_Hal_Transfer8(host,ft_pgm_read_byte_near(buffer));
 799:FT_Eve_Hal/FT_Gpu_Hal.c **** 			buffer++;
 800:FT_Eve_Hal/FT_Gpu_Hal.c **** 			SizeTransfered ++;
 801:FT_Eve_Hal/FT_Gpu_Hal.c **** 		}
 802:FT_Eve_Hal/FT_Gpu_Hal.c **** 		length = SizeTransfered;
 803:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 804:FT_Eve_Hal/FT_Gpu_Hal.c **** 		Ft_Gpu_Hal_EndTransfer(host);
 805:FT_Eve_Hal/FT_Gpu_Hal.c **** 		Ft_Gpu_Hal_Updatecmdfifo(host,length);
 806:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 807:FT_Eve_Hal/FT_Gpu_Hal.c **** 		Ft_Gpu_Hal_WaitCmdfifo_empty(host);
 808:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 809:FT_Eve_Hal/FT_Gpu_Hal.c **** 		count -= length;
 810:FT_Eve_Hal/FT_Gpu_Hal.c **** 	}while (count > 0);
 811:FT_Eve_Hal/FT_Gpu_Hal.c **** }
 812:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
 813:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 814:FT_Eve_Hal/FT_Gpu_Hal.c **** ft_void_t Ft_Gpu_Hal_CheckCmdBuffer(Ft_Gpu_Hal_Context_t *host,
 815:FT_Eve_Hal/FT_Gpu_Hal.c **** 		ft_uint32_t count) {
 2141              		.loc 1 815 0
 2142              		.cfi_startproc
 2143              		@ args = 0, pretend = 0, frame = 16
 2144              		@ frame_needed = 1, uses_anonymous_args = 0
 2145 0000 80B5     		push	{r7, lr}
 2146              	.LCFI157:
 2147              		.cfi_def_cfa_offset 8
 2148              		.cfi_offset 7, -8
 2149              		.cfi_offset 14, -4
 2150 0002 84B0     		sub	sp, sp, #16
 2151              	.LCFI158:
 2152              		.cfi_def_cfa_offset 24
 2153 0004 00AF     		add	r7, sp, #0
 2154              	.LCFI159:
 2155              		.cfi_def_cfa_register 7
 2156 0006 7860     		str	r0, [r7, #4]
 2157 0008 3960     		str	r1, [r7]
 2158              	.L95:
 816:FT_Eve_Hal/FT_Gpu_Hal.c **** 	ft_uint16_t getfreespace;
 817:FT_Eve_Hal/FT_Gpu_Hal.c **** 	do {
 818:FT_Eve_Hal/FT_Gpu_Hal.c **** 		// FIXME: This can get stuck, non-even is returned in case of coprocessor issue
ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 53


 819:FT_Eve_Hal/FT_Gpu_Hal.c **** 		getfreespace = Ft_Gpu_Cmdfifo_Freespace(host);
 2159              		.loc 1 819 0 discriminator 1
 2160 000a 7868     		ldr	r0, [r7, #4]
 2161 000c FFF7FEFF 		bl	Ft_Gpu_Cmdfifo_Freespace
 2162 0010 0346     		mov	r3, r0
 2163 0012 FB81     		strh	r3, [r7, #14]	@ movhi
 820:FT_Eve_Hal/FT_Gpu_Hal.c **** 	} while (getfreespace < count);
 2164              		.loc 1 820 0 discriminator 1
 2165 0014 FB89     		ldrh	r3, [r7, #14]
 2166 0016 3A68     		ldr	r2, [r7]
 2167 0018 9A42     		cmp	r2, r3
 2168 001a F6D8     		bhi	.L95
 821:FT_Eve_Hal/FT_Gpu_Hal.c **** }
 2169              		.loc 1 821 0
 2170 001c 00BF     		nop
 2171 001e 1037     		adds	r7, r7, #16
 2172              	.LCFI160:
 2173              		.cfi_def_cfa_offset 8
 2174 0020 BD46     		mov	sp, r7
 2175              	.LCFI161:
 2176              		.cfi_def_cfa_register 13
 2177              		@ sp needed
 2178 0022 80BD     		pop	{r7, pc}
 2179              		.cfi_endproc
 2180              	.LFE169:
 2182              		.section	.text.Ft_Gpu_Hal_WaitCmdfifo_empty,"ax",%progbits
 2183              		.align	1
 2184              		.global	Ft_Gpu_Hal_WaitCmdfifo_empty
 2185              		.syntax unified
 2186              		.thumb
 2187              		.thumb_func
 2188              		.fpu fpv5-sp-d16
 2190              	Ft_Gpu_Hal_WaitCmdfifo_empty:
 2191              	.LFB170:
 822:FT_Eve_Hal/FT_Gpu_Hal.c **** ft_void_t Ft_Gpu_Hal_WaitCmdfifo_empty(Ft_Gpu_Hal_Context_t *host) {
 2192              		.loc 1 822 0
 2193              		.cfi_startproc
 2194              		@ args = 0, pretend = 0, frame = 8
 2195              		@ frame_needed = 1, uses_anonymous_args = 0
 2196 0000 90B5     		push	{r4, r7, lr}
 2197              	.LCFI162:
 2198              		.cfi_def_cfa_offset 12
 2199              		.cfi_offset 4, -12
 2200              		.cfi_offset 7, -8
 2201              		.cfi_offset 14, -4
 2202 0002 83B0     		sub	sp, sp, #12
 2203              	.LCFI163:
 2204              		.cfi_def_cfa_offset 24
 2205 0004 00AF     		add	r7, sp, #0
 2206              	.LCFI164:
 2207              		.cfi_def_cfa_register 7
 2208 0006 7860     		str	r0, [r7, #4]
 823:FT_Eve_Hal/FT_Gpu_Hal.c **** 	while (Ft_Gpu_Hal_Rd16(host, REG_CMD_READ)
 2209              		.loc 1 823 0
 2210 0008 00BF     		nop
 2211              	.L97:
 2212              		.loc 1 823 0 is_stmt 0 discriminator 1
ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 54


 2213 000a 0C49     		ldr	r1, .L98
 2214 000c 7868     		ldr	r0, [r7, #4]
 2215 000e FFF7FEFF 		bl	Ft_Gpu_Hal_Rd16
 2216 0012 0346     		mov	r3, r0
 2217 0014 1C46     		mov	r4, r3
 824:FT_Eve_Hal/FT_Gpu_Hal.c **** 			!= Ft_Gpu_Hal_Rd16(host, REG_CMD_WRITE))
 2218              		.loc 1 824 0 is_stmt 1 discriminator 1
 2219 0016 0A49     		ldr	r1, .L98+4
 2220 0018 7868     		ldr	r0, [r7, #4]
 2221 001a FFF7FEFF 		bl	Ft_Gpu_Hal_Rd16
 2222 001e 0346     		mov	r3, r0
 823:FT_Eve_Hal/FT_Gpu_Hal.c **** 	while (Ft_Gpu_Hal_Rd16(host, REG_CMD_READ)
 2223              		.loc 1 823 0 discriminator 1
 2224 0020 9C42     		cmp	r4, r3
 2225 0022 F2D1     		bne	.L97
 825:FT_Eve_Hal/FT_Gpu_Hal.c **** 		;
 826:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 827:FT_Eve_Hal/FT_Gpu_Hal.c **** 	host->ft_cmd_fifo_wp = Ft_Gpu_Hal_Rd16(host, REG_CMD_WRITE);
 2226              		.loc 1 827 0
 2227 0024 0649     		ldr	r1, .L98+4
 2228 0026 7868     		ldr	r0, [r7, #4]
 2229 0028 FFF7FEFF 		bl	Ft_Gpu_Hal_Rd16
 2230 002c 0346     		mov	r3, r0
 2231 002e 1A46     		mov	r2, r3
 2232 0030 7B68     		ldr	r3, [r7, #4]
 2233 0032 1A81     		strh	r2, [r3, #8]	@ movhi
 828:FT_Eve_Hal/FT_Gpu_Hal.c **** }
 2234              		.loc 1 828 0
 2235 0034 00BF     		nop
 2236 0036 0C37     		adds	r7, r7, #12
 2237              	.LCFI165:
 2238              		.cfi_def_cfa_offset 12
 2239 0038 BD46     		mov	sp, r7
 2240              	.LCFI166:
 2241              		.cfi_def_cfa_register 13
 2242              		@ sp needed
 2243 003a 90BD     		pop	{r4, r7, pc}
 2244              	.L99:
 2245              		.align	2
 2246              	.L98:
 2247 003c F8203000 		.word	3154168
 2248 0040 FC203000 		.word	3154172
 2249              		.cfi_endproc
 2250              	.LFE170:
 2252              		.section	.text.Ft_Gpu_Hal_WrCmdBuf_nowait,"ax",%progbits
 2253              		.align	1
 2254              		.global	Ft_Gpu_Hal_WrCmdBuf_nowait
 2255              		.syntax unified
 2256              		.thumb
 2257              		.thumb_func
 2258              		.fpu fpv5-sp-d16
 2260              	Ft_Gpu_Hal_WrCmdBuf_nowait:
 2261              	.LFB171:
 829:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 830:FT_Eve_Hal/FT_Gpu_Hal.c **** ft_void_t Ft_Gpu_Hal_WrCmdBuf_nowait(Ft_Gpu_Hal_Context_t *host,
 831:FT_Eve_Hal/FT_Gpu_Hal.c **** 		ft_uint8_t *buffer, ft_uint32_t count) {
 2262              		.loc 1 831 0
ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 55


 2263              		.cfi_startproc
 2264              		@ args = 0, pretend = 0, frame = 24
 2265              		@ frame_needed = 1, uses_anonymous_args = 0
 2266 0000 80B5     		push	{r7, lr}
 2267              	.LCFI167:
 2268              		.cfi_def_cfa_offset 8
 2269              		.cfi_offset 7, -8
 2270              		.cfi_offset 14, -4
 2271 0002 86B0     		sub	sp, sp, #24
 2272              	.LCFI168:
 2273              		.cfi_def_cfa_offset 32
 2274 0004 00AF     		add	r7, sp, #0
 2275              	.LCFI169:
 2276              		.cfi_def_cfa_register 7
 2277 0006 F860     		str	r0, [r7, #12]
 2278 0008 B960     		str	r1, [r7, #8]
 2279 000a 7A60     		str	r2, [r7, #4]
 832:FT_Eve_Hal/FT_Gpu_Hal.c **** 	ft_uint32_t length = 0, SizeTransfered = 0;
 2280              		.loc 1 832 0
 2281 000c 0023     		movs	r3, #0
 2282 000e 7B61     		str	r3, [r7, #20]
 2283 0010 0023     		movs	r3, #0
 2284 0012 3B61     		str	r3, [r7, #16]
 2285              	.L104:
 833:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 834:FT_Eve_Hal/FT_Gpu_Hal.c **** #define MAX_CMD_FIFO_TRANSFER   Ft_Gpu_Cmdfifo_Freespace(host)
 835:FT_Eve_Hal/FT_Gpu_Hal.c **** 	do {
 836:FT_Eve_Hal/FT_Gpu_Hal.c **** 		length = count;
 2286              		.loc 1 836 0
 2287 0014 7B68     		ldr	r3, [r7, #4]
 2288 0016 7B61     		str	r3, [r7, #20]
 837:FT_Eve_Hal/FT_Gpu_Hal.c **** 		if (length > MAX_CMD_FIFO_TRANSFER) {
 2289              		.loc 1 837 0
 2290 0018 F868     		ldr	r0, [r7, #12]
 2291 001a FFF7FEFF 		bl	Ft_Gpu_Cmdfifo_Freespace
 2292 001e 0346     		mov	r3, r0
 2293 0020 1A46     		mov	r2, r3
 2294 0022 7B69     		ldr	r3, [r7, #20]
 2295 0024 9342     		cmp	r3, r2
 2296 0026 04D9     		bls	.L101
 838:FT_Eve_Hal/FT_Gpu_Hal.c **** 			length = MAX_CMD_FIFO_TRANSFER;
 2297              		.loc 1 838 0
 2298 0028 F868     		ldr	r0, [r7, #12]
 2299 002a FFF7FEFF 		bl	Ft_Gpu_Cmdfifo_Freespace
 2300 002e 0346     		mov	r3, r0
 2301 0030 7B61     		str	r3, [r7, #20]
 2302              	.L101:
 839:FT_Eve_Hal/FT_Gpu_Hal.c **** 		}
 840:FT_Eve_Hal/FT_Gpu_Hal.c **** 		Ft_Gpu_Hal_CheckCmdBuffer(host, length);
 2303              		.loc 1 840 0
 2304 0032 7969     		ldr	r1, [r7, #20]
 2305 0034 F868     		ldr	r0, [r7, #12]
 2306 0036 FFF7FEFF 		bl	Ft_Gpu_Hal_CheckCmdBuffer
 841:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 842:FT_Eve_Hal/FT_Gpu_Hal.c **** 		Ft_Gpu_Hal_StartCmdTransfer(host, FT_GPU_WRITE, length);
 2307              		.loc 1 842 0
 2308 003a 7B69     		ldr	r3, [r7, #20]
ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 56


 2309 003c 9BB2     		uxth	r3, r3
 2310 003e 1A46     		mov	r2, r3
 2311 0040 0121     		movs	r1, #1
 2312 0042 F868     		ldr	r0, [r7, #12]
 2313 0044 FFF7FEFF 		bl	Ft_Gpu_Hal_StartCmdTransfer
 843:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef STM32F7
 844:FT_Eve_Hal/FT_Gpu_Hal.c **** 		SizeTransfered = 0;
 2314              		.loc 1 844 0
 2315 0048 0023     		movs	r3, #0
 2316 004a 3B61     		str	r3, [r7, #16]
 845:FT_Eve_Hal/FT_Gpu_Hal.c **** 		while (length--) {
 2317              		.loc 1 845 0
 2318 004c 0BE0     		b	.L102
 2319              	.L103:
 846:FT_Eve_Hal/FT_Gpu_Hal.c **** 			Ft_Gpu_Hal_Transfer8(host, *buffer);
 2320              		.loc 1 846 0
 2321 004e BB68     		ldr	r3, [r7, #8]
 2322 0050 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2323 0052 1946     		mov	r1, r3
 2324 0054 F868     		ldr	r0, [r7, #12]
 2325 0056 FFF7FEFF 		bl	Ft_Gpu_Hal_Transfer8
 847:FT_Eve_Hal/FT_Gpu_Hal.c **** 			buffer++;
 2326              		.loc 1 847 0
 2327 005a BB68     		ldr	r3, [r7, #8]
 2328 005c 0133     		adds	r3, r3, #1
 2329 005e BB60     		str	r3, [r7, #8]
 848:FT_Eve_Hal/FT_Gpu_Hal.c **** 			SizeTransfered++;
 2330              		.loc 1 848 0
 2331 0060 3B69     		ldr	r3, [r7, #16]
 2332 0062 0133     		adds	r3, r3, #1
 2333 0064 3B61     		str	r3, [r7, #16]
 2334              	.L102:
 845:FT_Eve_Hal/FT_Gpu_Hal.c **** 			Ft_Gpu_Hal_Transfer8(host, *buffer);
 2335              		.loc 1 845 0
 2336 0066 7B69     		ldr	r3, [r7, #20]
 2337 0068 5A1E     		subs	r2, r3, #1
 2338 006a 7A61     		str	r2, [r7, #20]
 2339 006c 002B     		cmp	r3, #0
 2340 006e EED1     		bne	.L103
 849:FT_Eve_Hal/FT_Gpu_Hal.c **** 		}
 850:FT_Eve_Hal/FT_Gpu_Hal.c **** 		length = SizeTransfered;
 2341              		.loc 1 850 0
 2342 0070 3B69     		ldr	r3, [r7, #16]
 2343 0072 7B61     		str	r3, [r7, #20]
 851:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
 852:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef FT900_PLATFORM
 853:FT_Eve_Hal/FT_Gpu_Hal.c **** 		spi_writen(SPIM,buffer,length);
 854:FT_Eve_Hal/FT_Gpu_Hal.c **** 		buffer += length;
 855:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 856:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
 857:FT_Eve_Hal/FT_Gpu_Hal.c **** 		//#ifdef ARDUINO_PLATFORM_SPI
 858:FT_Eve_Hal/FT_Gpu_Hal.c **** #if defined(ARDUINO_PLATFORM_SPI) || defined(MSVC_FT800EMU)
 859:FT_Eve_Hal/FT_Gpu_Hal.c **** 		SizeTransfered = 0;
 860:FT_Eve_Hal/FT_Gpu_Hal.c **** 		while (length--) {
 861:FT_Eve_Hal/FT_Gpu_Hal.c **** 			Ft_Gpu_Hal_Transfer8(host,*buffer);
 862:FT_Eve_Hal/FT_Gpu_Hal.c **** 			buffer++;
 863:FT_Eve_Hal/FT_Gpu_Hal.c **** 			SizeTransfered ++;
ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 57


 864:FT_Eve_Hal/FT_Gpu_Hal.c **** 		}
 865:FT_Eve_Hal/FT_Gpu_Hal.c **** 		length = SizeTransfered;
 866:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
 867:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 868:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef MSVC_PLATFORM_SPI
 869:FT_Eve_Hal/FT_Gpu_Hal.c **** 		{
 870:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef MSVC_PLATFORM_LIBMPSSE
 871:FT_Eve_Hal/FT_Gpu_Hal.c **** 			SPI_Write(host->hal_handle,buffer,length,&SizeTransfered,SPI_TRANSFER_OPTIONS_SIZE_IN_BYTES);
 872:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 873:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
 874:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef MSVC_PLATFORM_Lib4222
 875:FT_Eve_Hal/FT_Gpu_Hal.c **** 			ft_uint16_t SizeTransfered16;
 876:FT_Eve_Hal/FT_Gpu_Hal.c **** 			FT4222_SPIMaster_SingleWrite((FT_HANDLE)host->hal_handle, buffer,length,&SizeTransfered16,TRUE);
 877:FT_Eve_Hal/FT_Gpu_Hal.c **** 			SizeTransfered = SizeTransfered16;
 878:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 879:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
 880:FT_Eve_Hal/FT_Gpu_Hal.c **** 			length = SizeTransfered;
 881:FT_Eve_Hal/FT_Gpu_Hal.c **** 			buffer += SizeTransfered;
 882:FT_Eve_Hal/FT_Gpu_Hal.c **** 		}
 883:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
 884:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 885:FT_Eve_Hal/FT_Gpu_Hal.c **** 		Ft_Gpu_Hal_EndTransfer(host);
 2344              		.loc 1 885 0
 2345 0074 F868     		ldr	r0, [r7, #12]
 2346 0076 FFF7FEFF 		bl	Ft_Gpu_Hal_EndTransfer
 886:FT_Eve_Hal/FT_Gpu_Hal.c **** 		Ft_Gpu_Hal_Updatecmdfifo(host, length);
 2347              		.loc 1 886 0
 2348 007a 7969     		ldr	r1, [r7, #20]
 2349 007c F868     		ldr	r0, [r7, #12]
 2350 007e FFF7FEFF 		bl	Ft_Gpu_Hal_Updatecmdfifo
 887:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 888:FT_Eve_Hal/FT_Gpu_Hal.c **** 		//	Ft_Gpu_Hal_WaitCmdfifo_empty(host);
 889:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 890:FT_Eve_Hal/FT_Gpu_Hal.c **** 		count -= length;
 2351              		.loc 1 890 0
 2352 0082 7A68     		ldr	r2, [r7, #4]
 2353 0084 7B69     		ldr	r3, [r7, #20]
 2354 0086 D31A     		subs	r3, r2, r3
 2355 0088 7B60     		str	r3, [r7, #4]
 891:FT_Eve_Hal/FT_Gpu_Hal.c **** 	} while (count > 0);
 2356              		.loc 1 891 0
 2357 008a 7B68     		ldr	r3, [r7, #4]
 2358 008c 002B     		cmp	r3, #0
 2359 008e C1D1     		bne	.L104
 892:FT_Eve_Hal/FT_Gpu_Hal.c **** }
 2360              		.loc 1 892 0
 2361 0090 00BF     		nop
 2362 0092 1837     		adds	r7, r7, #24
 2363              	.LCFI170:
 2364              		.cfi_def_cfa_offset 8
 2365 0094 BD46     		mov	sp, r7
 2366              	.LCFI171:
 2367              		.cfi_def_cfa_register 13
 2368              		@ sp needed
 2369 0096 80BD     		pop	{r7, pc}
 2370              		.cfi_endproc
 2371              	.LFE171:
ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 58


 2373              		.section	.text.Ft_Gpu_Hal_WaitCmdfifo_empty_status,"ax",%progbits
 2374              		.align	1
 2375              		.global	Ft_Gpu_Hal_WaitCmdfifo_empty_status
 2376              		.syntax unified
 2377              		.thumb
 2378              		.thumb_func
 2379              		.fpu fpv5-sp-d16
 2381              	Ft_Gpu_Hal_WaitCmdfifo_empty_status:
 2382              	.LFB172:
 893:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 894:FT_Eve_Hal/FT_Gpu_Hal.c **** ft_uint8_t Ft_Gpu_Hal_WaitCmdfifo_empty_status(Ft_Gpu_Hal_Context_t *host) {
 2383              		.loc 1 894 0
 2384              		.cfi_startproc
 2385              		@ args = 0, pretend = 0, frame = 8
 2386              		@ frame_needed = 1, uses_anonymous_args = 0
 2387 0000 90B5     		push	{r4, r7, lr}
 2388              	.LCFI172:
 2389              		.cfi_def_cfa_offset 12
 2390              		.cfi_offset 4, -12
 2391              		.cfi_offset 7, -8
 2392              		.cfi_offset 14, -4
 2393 0002 83B0     		sub	sp, sp, #12
 2394              	.LCFI173:
 2395              		.cfi_def_cfa_offset 24
 2396 0004 00AF     		add	r7, sp, #0
 2397              	.LCFI174:
 2398              		.cfi_def_cfa_register 7
 2399 0006 7860     		str	r0, [r7, #4]
 895:FT_Eve_Hal/FT_Gpu_Hal.c **** 	if (Ft_Gpu_Hal_Rd16(host, REG_CMD_READ)
 2400              		.loc 1 895 0
 2401 0008 0D49     		ldr	r1, .L108
 2402 000a 7868     		ldr	r0, [r7, #4]
 2403 000c FFF7FEFF 		bl	Ft_Gpu_Hal_Rd16
 2404 0010 0346     		mov	r3, r0
 2405 0012 1C46     		mov	r4, r3
 896:FT_Eve_Hal/FT_Gpu_Hal.c **** 			!= Ft_Gpu_Hal_Rd16(host, REG_CMD_WRITE)) {
 2406              		.loc 1 896 0
 2407 0014 0B49     		ldr	r1, .L108+4
 2408 0016 7868     		ldr	r0, [r7, #4]
 2409 0018 FFF7FEFF 		bl	Ft_Gpu_Hal_Rd16
 2410 001c 0346     		mov	r3, r0
 895:FT_Eve_Hal/FT_Gpu_Hal.c **** 	if (Ft_Gpu_Hal_Rd16(host, REG_CMD_READ)
 2411              		.loc 1 895 0
 2412 001e 9C42     		cmp	r4, r3
 2413 0020 01D0     		beq	.L106
 897:FT_Eve_Hal/FT_Gpu_Hal.c **** 		return 0;
 2414              		.loc 1 897 0
 2415 0022 0023     		movs	r3, #0
 2416 0024 08E0     		b	.L107
 2417              	.L106:
 898:FT_Eve_Hal/FT_Gpu_Hal.c **** 	} else {
 899:FT_Eve_Hal/FT_Gpu_Hal.c **** 		host->ft_cmd_fifo_wp = Ft_Gpu_Hal_Rd16(host, REG_CMD_WRITE);
 2418              		.loc 1 899 0
 2419 0026 0749     		ldr	r1, .L108+4
 2420 0028 7868     		ldr	r0, [r7, #4]
 2421 002a FFF7FEFF 		bl	Ft_Gpu_Hal_Rd16
 2422 002e 0346     		mov	r3, r0
ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 59


 2423 0030 1A46     		mov	r2, r3
 2424 0032 7B68     		ldr	r3, [r7, #4]
 2425 0034 1A81     		strh	r2, [r3, #8]	@ movhi
 900:FT_Eve_Hal/FT_Gpu_Hal.c **** 		return 1;
 2426              		.loc 1 900 0
 2427 0036 0123     		movs	r3, #1
 2428              	.L107:
 901:FT_Eve_Hal/FT_Gpu_Hal.c **** 	}
 902:FT_Eve_Hal/FT_Gpu_Hal.c **** }
 2429              		.loc 1 902 0
 2430 0038 1846     		mov	r0, r3
 2431 003a 0C37     		adds	r7, r7, #12
 2432              	.LCFI175:
 2433              		.cfi_def_cfa_offset 12
 2434 003c BD46     		mov	sp, r7
 2435              	.LCFI176:
 2436              		.cfi_def_cfa_register 13
 2437              		@ sp needed
 2438 003e 90BD     		pop	{r4, r7, pc}
 2439              	.L109:
 2440              		.align	2
 2441              	.L108:
 2442 0040 F8203000 		.word	3154168
 2443 0044 FC203000 		.word	3154172
 2444              		.cfi_endproc
 2445              	.LFE172:
 2447              		.section	.text.Ft_Gpu_Hal_WaitLogo_Finish,"ax",%progbits
 2448              		.align	1
 2449              		.global	Ft_Gpu_Hal_WaitLogo_Finish
 2450              		.syntax unified
 2451              		.thumb
 2452              		.thumb_func
 2453              		.fpu fpv5-sp-d16
 2455              	Ft_Gpu_Hal_WaitLogo_Finish:
 2456              	.LFB173:
 903:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 904:FT_Eve_Hal/FT_Gpu_Hal.c **** ft_void_t Ft_Gpu_Hal_WaitLogo_Finish(Ft_Gpu_Hal_Context_t *host) {
 2457              		.loc 1 904 0
 2458              		.cfi_startproc
 2459              		@ args = 0, pretend = 0, frame = 16
 2460              		@ frame_needed = 1, uses_anonymous_args = 0
 2461 0000 80B5     		push	{r7, lr}
 2462              	.LCFI177:
 2463              		.cfi_def_cfa_offset 8
 2464              		.cfi_offset 7, -8
 2465              		.cfi_offset 14, -4
 2466 0002 84B0     		sub	sp, sp, #16
 2467              	.LCFI178:
 2468              		.cfi_def_cfa_offset 24
 2469 0004 00AF     		add	r7, sp, #0
 2470              	.LCFI179:
 2471              		.cfi_def_cfa_register 7
 2472 0006 7860     		str	r0, [r7, #4]
 2473              	.L111:
 905:FT_Eve_Hal/FT_Gpu_Hal.c **** 	ft_int16_t cmdrdptr, cmdwrptr;
 906:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 907:FT_Eve_Hal/FT_Gpu_Hal.c **** 	do {
ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 60


 908:FT_Eve_Hal/FT_Gpu_Hal.c **** 		cmdrdptr = Ft_Gpu_Hal_Rd16(host, REG_CMD_READ);
 2474              		.loc 1 908 0 discriminator 3
 2475 0008 0E49     		ldr	r1, .L112
 2476 000a 7868     		ldr	r0, [r7, #4]
 2477 000c FFF7FEFF 		bl	Ft_Gpu_Hal_Rd16
 2478 0010 0346     		mov	r3, r0
 2479 0012 FB81     		strh	r3, [r7, #14]	@ movhi
 909:FT_Eve_Hal/FT_Gpu_Hal.c **** 		cmdwrptr = Ft_Gpu_Hal_Rd16(host, REG_CMD_WRITE);
 2480              		.loc 1 909 0 discriminator 3
 2481 0014 0C49     		ldr	r1, .L112+4
 2482 0016 7868     		ldr	r0, [r7, #4]
 2483 0018 FFF7FEFF 		bl	Ft_Gpu_Hal_Rd16
 2484 001c 0346     		mov	r3, r0
 2485 001e BB81     		strh	r3, [r7, #12]	@ movhi
 910:FT_Eve_Hal/FT_Gpu_Hal.c **** 	} while ((cmdwrptr != cmdrdptr) || (cmdrdptr != 0));
 2486              		.loc 1 910 0 discriminator 3
 2487 0020 B7F90C20 		ldrsh	r2, [r7, #12]
 2488 0024 B7F90E30 		ldrsh	r3, [r7, #14]
 2489 0028 9A42     		cmp	r2, r3
 2490 002a EDD1     		bne	.L111
 2491              		.loc 1 910 0 is_stmt 0 discriminator 2
 2492 002c B7F90E30 		ldrsh	r3, [r7, #14]
 2493 0030 002B     		cmp	r3, #0
 2494 0032 E9D1     		bne	.L111
 911:FT_Eve_Hal/FT_Gpu_Hal.c **** 	host->ft_cmd_fifo_wp = 0;
 2495              		.loc 1 911 0 is_stmt 1
 2496 0034 7B68     		ldr	r3, [r7, #4]
 2497 0036 0022     		movs	r2, #0
 2498 0038 1A81     		strh	r2, [r3, #8]	@ movhi
 912:FT_Eve_Hal/FT_Gpu_Hal.c **** }
 2499              		.loc 1 912 0
 2500 003a 00BF     		nop
 2501 003c 1037     		adds	r7, r7, #16
 2502              	.LCFI180:
 2503              		.cfi_def_cfa_offset 8
 2504 003e BD46     		mov	sp, r7
 2505              	.LCFI181:
 2506              		.cfi_def_cfa_register 13
 2507              		@ sp needed
 2508 0040 80BD     		pop	{r7, pc}
 2509              	.L113:
 2510 0042 00BF     		.align	2
 2511              	.L112:
 2512 0044 F8203000 		.word	3154168
 2513 0048 FC203000 		.word	3154172
 2514              		.cfi_endproc
 2515              	.LFE173:
 2517              		.section	.text.Ft_Gpu_Hal_ResetCmdFifo,"ax",%progbits
 2518              		.align	1
 2519              		.global	Ft_Gpu_Hal_ResetCmdFifo
 2520              		.syntax unified
 2521              		.thumb
 2522              		.thumb_func
 2523              		.fpu fpv5-sp-d16
 2525              	Ft_Gpu_Hal_ResetCmdFifo:
 2526              	.LFB174:
 913:FT_Eve_Hal/FT_Gpu_Hal.c **** 
ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 61


 914:FT_Eve_Hal/FT_Gpu_Hal.c **** ft_void_t Ft_Gpu_Hal_ResetCmdFifo(Ft_Gpu_Hal_Context_t *host) {
 2527              		.loc 1 914 0
 2528              		.cfi_startproc
 2529              		@ args = 0, pretend = 0, frame = 8
 2530              		@ frame_needed = 1, uses_anonymous_args = 0
 2531              		@ link register save eliminated.
 2532 0000 80B4     		push	{r7}
 2533              	.LCFI182:
 2534              		.cfi_def_cfa_offset 4
 2535              		.cfi_offset 7, -4
 2536 0002 83B0     		sub	sp, sp, #12
 2537              	.LCFI183:
 2538              		.cfi_def_cfa_offset 16
 2539 0004 00AF     		add	r7, sp, #0
 2540              	.LCFI184:
 2541              		.cfi_def_cfa_register 7
 2542 0006 7860     		str	r0, [r7, #4]
 915:FT_Eve_Hal/FT_Gpu_Hal.c **** 	host->ft_cmd_fifo_wp = 0;
 2543              		.loc 1 915 0
 2544 0008 7B68     		ldr	r3, [r7, #4]
 2545 000a 0022     		movs	r2, #0
 2546 000c 1A81     		strh	r2, [r3, #8]	@ movhi
 916:FT_Eve_Hal/FT_Gpu_Hal.c **** }
 2547              		.loc 1 916 0
 2548 000e 00BF     		nop
 2549 0010 0C37     		adds	r7, r7, #12
 2550              	.LCFI185:
 2551              		.cfi_def_cfa_offset 4
 2552 0012 BD46     		mov	sp, r7
 2553              	.LCFI186:
 2554              		.cfi_def_cfa_register 13
 2555              		@ sp needed
 2556 0014 5DF8047B 		ldr	r7, [sp], #4
 2557              	.LCFI187:
 2558              		.cfi_restore 7
 2559              		.cfi_def_cfa_offset 0
 2560 0018 7047     		bx	lr
 2561              		.cfi_endproc
 2562              	.LFE174:
 2564              		.section	.text.Ft_Gpu_Hal_WrCmd32,"ax",%progbits
 2565              		.align	1
 2566              		.global	Ft_Gpu_Hal_WrCmd32
 2567              		.syntax unified
 2568              		.thumb
 2569              		.thumb_func
 2570              		.fpu fpv5-sp-d16
 2572              	Ft_Gpu_Hal_WrCmd32:
 2573              	.LFB175:
 917:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 918:FT_Eve_Hal/FT_Gpu_Hal.c **** ft_void_t Ft_Gpu_Hal_WrCmd32(Ft_Gpu_Hal_Context_t *host, ft_uint32_t cmd) {
 2574              		.loc 1 918 0
 2575              		.cfi_startproc
 2576              		@ args = 0, pretend = 0, frame = 8
 2577              		@ frame_needed = 1, uses_anonymous_args = 0
 2578 0000 80B5     		push	{r7, lr}
 2579              	.LCFI188:
 2580              		.cfi_def_cfa_offset 8
ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 62


 2581              		.cfi_offset 7, -8
 2582              		.cfi_offset 14, -4
 2583 0002 82B0     		sub	sp, sp, #8
 2584              	.LCFI189:
 2585              		.cfi_def_cfa_offset 16
 2586 0004 00AF     		add	r7, sp, #0
 2587              	.LCFI190:
 2588              		.cfi_def_cfa_register 7
 2589 0006 7860     		str	r0, [r7, #4]
 2590 0008 3960     		str	r1, [r7]
 919:FT_Eve_Hal/FT_Gpu_Hal.c **** 	Ft_Gpu_Hal_CheckCmdBuffer(host, sizeof(cmd));
 2591              		.loc 1 919 0
 2592 000a 0421     		movs	r1, #4
 2593 000c 7868     		ldr	r0, [r7, #4]
 2594 000e FFF7FEFF 		bl	Ft_Gpu_Hal_CheckCmdBuffer
 920:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 921:FT_Eve_Hal/FT_Gpu_Hal.c **** 	Ft_Gpu_Hal_Wr32(host, RAM_CMD + host->ft_cmd_fifo_wp, cmd);
 2595              		.loc 1 921 0
 2596 0012 7B68     		ldr	r3, [r7, #4]
 2597 0014 1B89     		ldrh	r3, [r3, #8]
 2598 0016 03F54213 		add	r3, r3, #3178496
 2599 001a 3A68     		ldr	r2, [r7]
 2600 001c 1946     		mov	r1, r3
 2601 001e 7868     		ldr	r0, [r7, #4]
 2602 0020 FFF7FEFF 		bl	Ft_Gpu_Hal_Wr32
 922:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 923:FT_Eve_Hal/FT_Gpu_Hal.c **** 	Ft_Gpu_Hal_Updatecmdfifo(host, sizeof(cmd));
 2603              		.loc 1 923 0
 2604 0024 0421     		movs	r1, #4
 2605 0026 7868     		ldr	r0, [r7, #4]
 2606 0028 FFF7FEFF 		bl	Ft_Gpu_Hal_Updatecmdfifo
 924:FT_Eve_Hal/FT_Gpu_Hal.c **** }
 2607              		.loc 1 924 0
 2608 002c 00BF     		nop
 2609 002e 0837     		adds	r7, r7, #8
 2610              	.LCFI191:
 2611              		.cfi_def_cfa_offset 8
 2612 0030 BD46     		mov	sp, r7
 2613              	.LCFI192:
 2614              		.cfi_def_cfa_register 13
 2615              		@ sp needed
 2616 0032 80BD     		pop	{r7, pc}
 2617              		.cfi_endproc
 2618              	.LFE175:
 2620              		.section	.text.Ft_Gpu_Hal_ResetDLBuffer,"ax",%progbits
 2621              		.align	1
 2622              		.global	Ft_Gpu_Hal_ResetDLBuffer
 2623              		.syntax unified
 2624              		.thumb
 2625              		.thumb_func
 2626              		.fpu fpv5-sp-d16
 2628              	Ft_Gpu_Hal_ResetDLBuffer:
 2629              	.LFB176:
 925:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 926:FT_Eve_Hal/FT_Gpu_Hal.c **** ft_void_t Ft_Gpu_Hal_ResetDLBuffer(Ft_Gpu_Hal_Context_t *host) {
 2630              		.loc 1 926 0
 2631              		.cfi_startproc
ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 63


 2632              		@ args = 0, pretend = 0, frame = 8
 2633              		@ frame_needed = 1, uses_anonymous_args = 0
 2634              		@ link register save eliminated.
 2635 0000 80B4     		push	{r7}
 2636              	.LCFI193:
 2637              		.cfi_def_cfa_offset 4
 2638              		.cfi_offset 7, -4
 2639 0002 83B0     		sub	sp, sp, #12
 2640              	.LCFI194:
 2641              		.cfi_def_cfa_offset 16
 2642 0004 00AF     		add	r7, sp, #0
 2643              	.LCFI195:
 2644              		.cfi_def_cfa_register 7
 2645 0006 7860     		str	r0, [r7, #4]
 927:FT_Eve_Hal/FT_Gpu_Hal.c **** 	host->ft_dl_buff_wp = 0;
 2646              		.loc 1 927 0
 2647 0008 7B68     		ldr	r3, [r7, #4]
 2648 000a 0022     		movs	r2, #0
 2649 000c 5A81     		strh	r2, [r3, #10]	@ movhi
 928:FT_Eve_Hal/FT_Gpu_Hal.c **** }
 2650              		.loc 1 928 0
 2651 000e 00BF     		nop
 2652 0010 0C37     		adds	r7, r7, #12
 2653              	.LCFI196:
 2654              		.cfi_def_cfa_offset 4
 2655 0012 BD46     		mov	sp, r7
 2656              	.LCFI197:
 2657              		.cfi_def_cfa_register 13
 2658              		@ sp needed
 2659 0014 5DF8047B 		ldr	r7, [sp], #4
 2660              	.LCFI198:
 2661              		.cfi_restore 7
 2662              		.cfi_def_cfa_offset 0
 2663 0018 7047     		bx	lr
 2664              		.cfi_endproc
 2665              	.LFE176:
 2667              		.section	.text.Ft_Gpu_Hal_Powercycle,"ax",%progbits
 2668              		.align	1
 2669              		.global	Ft_Gpu_Hal_Powercycle
 2670              		.syntax unified
 2671              		.thumb
 2672              		.thumb_func
 2673              		.fpu fpv5-sp-d16
 2675              	Ft_Gpu_Hal_Powercycle:
 2676              	.LFB177:
 929:FT_Eve_Hal/FT_Gpu_Hal.c **** /* Toggle PD_N pin of FT800 board for a power cycle*/
 930:FT_Eve_Hal/FT_Gpu_Hal.c **** ft_void_t Ft_Gpu_Hal_Powercycle(Ft_Gpu_Hal_Context_t *host, ft_bool_t up) {
 2677              		.loc 1 930 0
 2678              		.cfi_startproc
 2679              		@ args = 0, pretend = 0, frame = 8
 2680              		@ frame_needed = 1, uses_anonymous_args = 0
 2681 0000 80B5     		push	{r7, lr}
 2682              	.LCFI199:
 2683              		.cfi_def_cfa_offset 8
 2684              		.cfi_offset 7, -8
 2685              		.cfi_offset 14, -4
 2686 0002 82B0     		sub	sp, sp, #8
ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 64


 2687              	.LCFI200:
 2688              		.cfi_def_cfa_offset 16
 2689 0004 00AF     		add	r7, sp, #0
 2690              	.LCFI201:
 2691              		.cfi_def_cfa_register 7
 2692 0006 7860     		str	r0, [r7, #4]
 2693 0008 0B46     		mov	r3, r1
 2694 000a FB70     		strb	r3, [r7, #3]
 931:FT_Eve_Hal/FT_Gpu_Hal.c **** 	if (up) {
 2695              		.loc 1 931 0
 2696 000c FB78     		ldrb	r3, [r7, #3]	@ zero_extendqisi2
 2697 000e 002B     		cmp	r3, #0
 2698 0010 10D0     		beq	.L118
 932:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef STM32F7
 933:FT_Eve_Hal/FT_Gpu_Hal.c **** 		HAL_GPIO_WritePin(GPIOB, FT800_PD_N, GPIO_PIN_RESET); // Reset FT800
 2699              		.loc 1 933 0
 2700 0012 0022     		movs	r2, #0
 2701 0014 0121     		movs	r1, #1
 2702 0016 1148     		ldr	r0, .L121
 2703 0018 FFF7FEFF 		bl	HAL_GPIO_WritePin
 934:FT_Eve_Hal/FT_Gpu_Hal.c **** 		HAL_Delay(20);												// Wait 20ms
 2704              		.loc 1 934 0
 2705 001c 1420     		movs	r0, #20
 2706 001e FFF7FEFF 		bl	HAL_Delay
 935:FT_Eve_Hal/FT_Gpu_Hal.c **** 		HAL_GPIO_WritePin(GPIOB, FT800_PD_N, GPIO_PIN_SET); // FT800 is awake
 2707              		.loc 1 935 0
 2708 0022 0122     		movs	r2, #1
 2709 0024 0121     		movs	r1, #1
 2710 0026 0D48     		ldr	r0, .L121
 2711 0028 FFF7FEFF 		bl	HAL_GPIO_WritePin
 936:FT_Eve_Hal/FT_Gpu_Hal.c **** 		HAL_Delay(20);
 2712              		.loc 1 936 0
 2713 002c 1420     		movs	r0, #20
 2714 002e FFF7FEFF 		bl	HAL_Delay
 937:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
 938:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef MSVC_PLATFORM
 939:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef MSVC_PLATFORM_LIBMPSSE
 940:FT_Eve_Hal/FT_Gpu_Hal.c **** 		//FT_WriteGPIO(host->hal_handle, 0xBB, 0x08);//PDN set to 0 ,connect BLUE wire of MPSSE to PDN# o
 941:FT_Eve_Hal/FT_Gpu_Hal.c **** 		FT_WriteGPIO(host->hal_handle, (1 << host->hal_config.pdn_pin_no) | 0x3B, (0<<host->hal_config.pd
 942:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 943:FT_Eve_Hal/FT_Gpu_Hal.c **** 		Ft_Gpu_Hal_Sleep(20);
 944:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 945:FT_Eve_Hal/FT_Gpu_Hal.c **** 		//FT_WriteGPIO(host->hal_handle, 0xBB, 0x88);//PDN set to 1
 946:FT_Eve_Hal/FT_Gpu_Hal.c **** 		FT_WriteGPIO(host->hal_handle, (1 << host->hal_config.pdn_pin_no) | 0x3B, (1<<host->hal_config.pd
 947:FT_Eve_Hal/FT_Gpu_Hal.c **** 		Ft_Gpu_Hal_Sleep(20);
 948:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
 949:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef MSVC_PLATFORM_Lib4222
 950:FT_Eve_Hal/FT_Gpu_Hal.c **** 		FT_STATUS status;
 951:FT_Eve_Hal/FT_Gpu_Hal.c **** 		status = FT4222_GPIO_Write((FT_HANDLE)host->hal_handle,GPIO_PORT0,0);
 952:FT_Eve_Hal/FT_Gpu_Hal.c **** 		Ft_Gpu_Hal_Sleep(20);
 953:FT_Eve_Hal/FT_Gpu_Hal.c **** 		status = FT4222_GPIO_Write((FT_HANDLE)host->hal_handle,GPIO_PORT0,1);
 954:FT_Eve_Hal/FT_Gpu_Hal.c **** 		Ft_Gpu_Hal_Sleep(20);
 955:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 956:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
 957:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 958:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
 959:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef ARDUINO_PLATFORM
ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 65


 960:FT_Eve_Hal/FT_Gpu_Hal.c **** 		digitalWrite(host->hal_config.pdn_pin_no, LOW);
 961:FT_Eve_Hal/FT_Gpu_Hal.c **** 		Ft_Gpu_Hal_Sleep(20);
 962:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 963:FT_Eve_Hal/FT_Gpu_Hal.c **** 		digitalWrite(host->hal_config.pdn_pin_no, HIGH);
 964:FT_Eve_Hal/FT_Gpu_Hal.c **** 		Ft_Gpu_Hal_Sleep(20);
 965:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
 966:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef FT900_PLATFORM
 967:FT_Eve_Hal/FT_Gpu_Hal.c **** 		gpio_write(host->hal_config.pdn_pin_no, 0);
 968:FT_Eve_Hal/FT_Gpu_Hal.c **** 		ft_delay(20);
 969:FT_Eve_Hal/FT_Gpu_Hal.c **** 		gpio_write(host->hal_config.pdn_pin_no, 1);
 970:FT_Eve_Hal/FT_Gpu_Hal.c **** 		ft_delay(20);
 971:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
 972:FT_Eve_Hal/FT_Gpu_Hal.c **** 	} else {
 973:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef STM32F7
 974:FT_Eve_Hal/FT_Gpu_Hal.c **** 		HAL_GPIO_WritePin(GPIOB, FT800_PD_N, GPIO_PIN_SET); // FT800 is awake
 975:FT_Eve_Hal/FT_Gpu_Hal.c **** 		HAL_Delay(20);
 976:FT_Eve_Hal/FT_Gpu_Hal.c **** 		HAL_GPIO_WritePin(GPIOB, FT800_PD_N, GPIO_PIN_RESET); // Reset FT800
 977:FT_Eve_Hal/FT_Gpu_Hal.c **** 		HAL_Delay(20);												// Wait 20ms
 978:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
 979:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef MSVC_PLATFORM
 980:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef MSVC_PLATFORM_LIBMPSSE
 981:FT_Eve_Hal/FT_Gpu_Hal.c **** 		//FT_WriteGPIO(host->hal_handle, 0xBB, 0x88);//PDN set to 1
 982:FT_Eve_Hal/FT_Gpu_Hal.c **** 		FT_WriteGPIO(host->hal_handle, (1 << host->hal_config.pdn_pin_no) | 0x3B, (1<<host->hal_config.pd
 983:FT_Eve_Hal/FT_Gpu_Hal.c **** 		Ft_Gpu_Hal_Sleep(20);
 984:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 985:FT_Eve_Hal/FT_Gpu_Hal.c **** 		//FT_WriteGPIO(host->hal_handle, 0xBB, 0x08);//PDN set to 0 ,connect BLUE wire of MPSSE to PDN# o
 986:FT_Eve_Hal/FT_Gpu_Hal.c **** 		FT_WriteGPIO(host->hal_handle, (1 << host->hal_config.pdn_pin_no) | 0x3B, (0<<host->hal_config.pd
 987:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 988:FT_Eve_Hal/FT_Gpu_Hal.c **** 		Ft_Gpu_Hal_Sleep(20);
 989:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
 990:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef MSVC_PLATFORM_Lib4222
 991:FT_Eve_Hal/FT_Gpu_Hal.c **** 		FT4222_GPIO_Write((FT_HANDLE)host->hal_handle,GPIO_PORT0,1);
 992:FT_Eve_Hal/FT_Gpu_Hal.c **** 		Ft_Gpu_Hal_Sleep(20);
 993:FT_Eve_Hal/FT_Gpu_Hal.c **** 		FT4222_GPIO_Write((FT_HANDLE)host->hal_handle,GPIO_PORT0,0);
 994:FT_Eve_Hal/FT_Gpu_Hal.c **** 		Ft_Gpu_Hal_Sleep(20);
 995:FT_Eve_Hal/FT_Gpu_Hal.c **** 
 996:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
 997:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
 998:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef ARDUINO_PLATFORM
 999:FT_Eve_Hal/FT_Gpu_Hal.c **** 		digitalWrite(host->hal_config.pdn_pin_no, HIGH);
1000:FT_Eve_Hal/FT_Gpu_Hal.c **** 		Ft_Gpu_Hal_Sleep(20);
1001:FT_Eve_Hal/FT_Gpu_Hal.c **** 
1002:FT_Eve_Hal/FT_Gpu_Hal.c **** 		digitalWrite(host->hal_config.pdn_pin_no, LOW);
1003:FT_Eve_Hal/FT_Gpu_Hal.c **** 		Ft_Gpu_Hal_Sleep(20);
1004:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
1005:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef FT900_PLATFORM
1006:FT_Eve_Hal/FT_Gpu_Hal.c **** 		gpio_write(host->hal_config.pdn_pin_no, 1);
1007:FT_Eve_Hal/FT_Gpu_Hal.c **** 		ft_delay(20);
1008:FT_Eve_Hal/FT_Gpu_Hal.c **** 		gpio_write(host->hal_config.pdn_pin_no, 0);
1009:FT_Eve_Hal/FT_Gpu_Hal.c **** 		ft_delay(20);
1010:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
1011:FT_Eve_Hal/FT_Gpu_Hal.c **** 
1012:FT_Eve_Hal/FT_Gpu_Hal.c **** 	}
1013:FT_Eve_Hal/FT_Gpu_Hal.c **** }
 2715              		.loc 1 1013 0
 2716 0032 0FE0     		b	.L120
 2717              	.L118:
ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 66


 974:FT_Eve_Hal/FT_Gpu_Hal.c **** 		HAL_Delay(20);
 2718              		.loc 1 974 0
 2719 0034 0122     		movs	r2, #1
 2720 0036 0121     		movs	r1, #1
 2721 0038 0848     		ldr	r0, .L121
 2722 003a FFF7FEFF 		bl	HAL_GPIO_WritePin
 975:FT_Eve_Hal/FT_Gpu_Hal.c **** 		HAL_GPIO_WritePin(GPIOB, FT800_PD_N, GPIO_PIN_RESET); // Reset FT800
 2723              		.loc 1 975 0
 2724 003e 1420     		movs	r0, #20
 2725 0040 FFF7FEFF 		bl	HAL_Delay
 976:FT_Eve_Hal/FT_Gpu_Hal.c **** 		HAL_Delay(20);												// Wait 20ms
 2726              		.loc 1 976 0
 2727 0044 0022     		movs	r2, #0
 2728 0046 0121     		movs	r1, #1
 2729 0048 0448     		ldr	r0, .L121
 2730 004a FFF7FEFF 		bl	HAL_GPIO_WritePin
 977:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
 2731              		.loc 1 977 0
 2732 004e 1420     		movs	r0, #20
 2733 0050 FFF7FEFF 		bl	HAL_Delay
 2734              	.L120:
 2735              		.loc 1 1013 0
 2736 0054 00BF     		nop
 2737 0056 0837     		adds	r7, r7, #8
 2738              	.LCFI202:
 2739              		.cfi_def_cfa_offset 8
 2740 0058 BD46     		mov	sp, r7
 2741              	.LCFI203:
 2742              		.cfi_def_cfa_register 13
 2743              		@ sp needed
 2744 005a 80BD     		pop	{r7, pc}
 2745              	.L122:
 2746              		.align	2
 2747              	.L121:
 2748 005c 00040240 		.word	1073873920
 2749              		.cfi_endproc
 2750              	.LFE177:
 2752              		.section	.text.Ft_Gpu_Hal_WrMemFromFlash,"ax",%progbits
 2753              		.align	1
 2754              		.global	Ft_Gpu_Hal_WrMemFromFlash
 2755              		.syntax unified
 2756              		.thumb
 2757              		.thumb_func
 2758              		.fpu fpv5-sp-d16
 2760              	Ft_Gpu_Hal_WrMemFromFlash:
 2761              	.LFB178:
1014:FT_Eve_Hal/FT_Gpu_Hal.c **** ft_void_t Ft_Gpu_Hal_WrMemFromFlash(Ft_Gpu_Hal_Context_t *host,
1015:FT_Eve_Hal/FT_Gpu_Hal.c **** 		ft_uint32_t addr, const ft_uint8_t *buffer, ft_uint32_t length) {
 2762              		.loc 1 1015 0
 2763              		.cfi_startproc
 2764              		@ args = 0, pretend = 0, frame = 24
 2765              		@ frame_needed = 1, uses_anonymous_args = 0
 2766 0000 80B5     		push	{r7, lr}
 2767              	.LCFI204:
 2768              		.cfi_def_cfa_offset 8
 2769              		.cfi_offset 7, -8
 2770              		.cfi_offset 14, -4
ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 67


 2771 0002 86B0     		sub	sp, sp, #24
 2772              	.LCFI205:
 2773              		.cfi_def_cfa_offset 32
 2774 0004 00AF     		add	r7, sp, #0
 2775              	.LCFI206:
 2776              		.cfi_def_cfa_register 7
 2777 0006 F860     		str	r0, [r7, #12]
 2778 0008 B960     		str	r1, [r7, #8]
 2779 000a 7A60     		str	r2, [r7, #4]
 2780 000c 3B60     		str	r3, [r7]
1016:FT_Eve_Hal/FT_Gpu_Hal.c **** 	ft_uint32_t SizeTransfered = 0;
 2781              		.loc 1 1016 0
 2782 000e 0023     		movs	r3, #0
 2783 0010 7B61     		str	r3, [r7, #20]
1017:FT_Eve_Hal/FT_Gpu_Hal.c **** 
1018:FT_Eve_Hal/FT_Gpu_Hal.c **** 	Ft_Gpu_Hal_StartTransfer(host, FT_GPU_WRITE, addr);
 2784              		.loc 1 1018 0
 2785 0012 BA68     		ldr	r2, [r7, #8]
 2786 0014 0121     		movs	r1, #1
 2787 0016 F868     		ldr	r0, [r7, #12]
 2788 0018 FFF7FEFF 		bl	Ft_Gpu_Hal_StartTransfer
1019:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef STM32F7
1020:FT_Eve_Hal/FT_Gpu_Hal.c **** 	while (length--) {
 2789              		.loc 1 1020 0
 2790 001c 08E0     		b	.L124
 2791              	.L125:
1021:FT_Eve_Hal/FT_Gpu_Hal.c **** 		Ft_Gpu_Hal_Transfer8(host, *buffer);
 2792              		.loc 1 1021 0
 2793 001e 7B68     		ldr	r3, [r7, #4]
 2794 0020 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2795 0022 1946     		mov	r1, r3
 2796 0024 F868     		ldr	r0, [r7, #12]
 2797 0026 FFF7FEFF 		bl	Ft_Gpu_Hal_Transfer8
1022:FT_Eve_Hal/FT_Gpu_Hal.c **** 		buffer++;
 2798              		.loc 1 1022 0
 2799 002a 7B68     		ldr	r3, [r7, #4]
 2800 002c 0133     		adds	r3, r3, #1
 2801 002e 7B60     		str	r3, [r7, #4]
 2802              	.L124:
1020:FT_Eve_Hal/FT_Gpu_Hal.c **** 		Ft_Gpu_Hal_Transfer8(host, *buffer);
 2803              		.loc 1 1020 0
 2804 0030 3B68     		ldr	r3, [r7]
 2805 0032 5A1E     		subs	r2, r3, #1
 2806 0034 3A60     		str	r2, [r7]
 2807 0036 002B     		cmp	r3, #0
 2808 0038 F1D1     		bne	.L125
1023:FT_Eve_Hal/FT_Gpu_Hal.c **** 	}
1024:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
1025:FT_Eve_Hal/FT_Gpu_Hal.c **** #if defined(ARDUINO_PLATFORM_SPI) || defined(MSVC_FT800EMU) || defined(FT900_PLATFORM)
1026:FT_Eve_Hal/FT_Gpu_Hal.c **** 	while (length--) {
1027:FT_Eve_Hal/FT_Gpu_Hal.c **** 		Ft_Gpu_Hal_Transfer8(host,ft_pgm_read_byte_near(buffer));
1028:FT_Eve_Hal/FT_Gpu_Hal.c **** 		buffer++;
1029:FT_Eve_Hal/FT_Gpu_Hal.c **** 	}
1030:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
1031:FT_Eve_Hal/FT_Gpu_Hal.c **** 
1032:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef MSVC_PLATFORM_SPI
1033:FT_Eve_Hal/FT_Gpu_Hal.c **** 	{
ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 68


1034:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef MSVC_PLATFORM_LIBMPSSE
1035:FT_Eve_Hal/FT_Gpu_Hal.c **** 		SPI_Write((FT_HANDLE)host->hal_handle,buffer,length,&SizeTransfered,SPI_TRANSFER_OPTIONS_SIZE_IN_
1036:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
1037:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef MSVC_PLATFORM_Lib4222
1038:FT_Eve_Hal/FT_Gpu_Hal.c **** 		/* TBD - check for chunks of 64kb */
1039:FT_Eve_Hal/FT_Gpu_Hal.c **** 		ft_uint16_t SizeTransfered16;
1040:FT_Eve_Hal/FT_Gpu_Hal.c **** 		FT4222_SPIMaster_SingleWrite((FT_HANDLE)host->hal_handle, (uint8 *)buffer,length,&SizeTransfered1
1041:FT_Eve_Hal/FT_Gpu_Hal.c **** 		SizeTransfered = SizeTransfered16;
1042:FT_Eve_Hal/FT_Gpu_Hal.c **** 
1043:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
1044:FT_Eve_Hal/FT_Gpu_Hal.c **** 	}
1045:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
1046:FT_Eve_Hal/FT_Gpu_Hal.c **** 	Ft_Gpu_Hal_EndTransfer(host);
 2809              		.loc 1 1046 0
 2810 003a F868     		ldr	r0, [r7, #12]
 2811 003c FFF7FEFF 		bl	Ft_Gpu_Hal_EndTransfer
1047:FT_Eve_Hal/FT_Gpu_Hal.c **** }
 2812              		.loc 1 1047 0
 2813 0040 00BF     		nop
 2814 0042 1837     		adds	r7, r7, #24
 2815              	.LCFI207:
 2816              		.cfi_def_cfa_offset 8
 2817 0044 BD46     		mov	sp, r7
 2818              	.LCFI208:
 2819              		.cfi_def_cfa_register 13
 2820              		@ sp needed
 2821 0046 80BD     		pop	{r7, pc}
 2822              		.cfi_endproc
 2823              	.LFE178:
 2825              		.section	.text.Ft_Gpu_Hal_WrMem,"ax",%progbits
 2826              		.align	1
 2827              		.global	Ft_Gpu_Hal_WrMem
 2828              		.syntax unified
 2829              		.thumb
 2830              		.thumb_func
 2831              		.fpu fpv5-sp-d16
 2833              	Ft_Gpu_Hal_WrMem:
 2834              	.LFB179:
1048:FT_Eve_Hal/FT_Gpu_Hal.c **** 
1049:FT_Eve_Hal/FT_Gpu_Hal.c **** ft_void_t Ft_Gpu_Hal_WrMem(Ft_Gpu_Hal_Context_t *host, ft_uint32_t addr,
1050:FT_Eve_Hal/FT_Gpu_Hal.c **** 		const ft_uint8_t *buffer, ft_uint32_t length) {
 2835              		.loc 1 1050 0
 2836              		.cfi_startproc
 2837              		@ args = 0, pretend = 0, frame = 24
 2838              		@ frame_needed = 1, uses_anonymous_args = 0
 2839 0000 80B5     		push	{r7, lr}
 2840              	.LCFI209:
 2841              		.cfi_def_cfa_offset 8
 2842              		.cfi_offset 7, -8
 2843              		.cfi_offset 14, -4
 2844 0002 86B0     		sub	sp, sp, #24
 2845              	.LCFI210:
 2846              		.cfi_def_cfa_offset 32
 2847 0004 00AF     		add	r7, sp, #0
 2848              	.LCFI211:
 2849              		.cfi_def_cfa_register 7
 2850 0006 F860     		str	r0, [r7, #12]
ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 69


 2851 0008 B960     		str	r1, [r7, #8]
 2852 000a 7A60     		str	r2, [r7, #4]
 2853 000c 3B60     		str	r3, [r7]
1051:FT_Eve_Hal/FT_Gpu_Hal.c **** 	ft_uint32_t SizeTransfered = 0;
 2854              		.loc 1 1051 0
 2855 000e 0023     		movs	r3, #0
 2856 0010 7B61     		str	r3, [r7, #20]
1052:FT_Eve_Hal/FT_Gpu_Hal.c **** 
1053:FT_Eve_Hal/FT_Gpu_Hal.c **** 	Ft_Gpu_Hal_StartTransfer(host, FT_GPU_WRITE, addr);
 2857              		.loc 1 1053 0
 2858 0012 BA68     		ldr	r2, [r7, #8]
 2859 0014 0121     		movs	r1, #1
 2860 0016 F868     		ldr	r0, [r7, #12]
 2861 0018 FFF7FEFF 		bl	Ft_Gpu_Hal_StartTransfer
1054:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef STM32F7
1055:FT_Eve_Hal/FT_Gpu_Hal.c **** 	while (length--) {
 2862              		.loc 1 1055 0
 2863 001c 08E0     		b	.L127
 2864              	.L128:
1056:FT_Eve_Hal/FT_Gpu_Hal.c **** 		Ft_Gpu_Hal_Transfer8(host, *buffer);
 2865              		.loc 1 1056 0
 2866 001e 7B68     		ldr	r3, [r7, #4]
 2867 0020 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2868 0022 1946     		mov	r1, r3
 2869 0024 F868     		ldr	r0, [r7, #12]
 2870 0026 FFF7FEFF 		bl	Ft_Gpu_Hal_Transfer8
1057:FT_Eve_Hal/FT_Gpu_Hal.c **** 		buffer++;
 2871              		.loc 1 1057 0
 2872 002a 7B68     		ldr	r3, [r7, #4]
 2873 002c 0133     		adds	r3, r3, #1
 2874 002e 7B60     		str	r3, [r7, #4]
 2875              	.L127:
1055:FT_Eve_Hal/FT_Gpu_Hal.c **** 		Ft_Gpu_Hal_Transfer8(host, *buffer);
 2876              		.loc 1 1055 0
 2877 0030 3B68     		ldr	r3, [r7]
 2878 0032 5A1E     		subs	r2, r3, #1
 2879 0034 3A60     		str	r2, [r7]
 2880 0036 002B     		cmp	r3, #0
 2881 0038 F1D1     		bne	.L128
1058:FT_Eve_Hal/FT_Gpu_Hal.c **** 	}
1059:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
1060:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef FT900_PLATFORM
1061:FT_Eve_Hal/FT_Gpu_Hal.c **** 
1062:FT_Eve_Hal/FT_Gpu_Hal.c **** 	spi_writen(SPIM,buffer,length);
1063:FT_Eve_Hal/FT_Gpu_Hal.c **** 
1064:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
1065:FT_Eve_Hal/FT_Gpu_Hal.c **** #if defined(ARDUINO_PLATFORM_SPI) || defined(MSVC_FT800EMU)
1066:FT_Eve_Hal/FT_Gpu_Hal.c **** 	while (length--) {
1067:FT_Eve_Hal/FT_Gpu_Hal.c **** 		Ft_Gpu_Hal_Transfer8(host,*buffer);
1068:FT_Eve_Hal/FT_Gpu_Hal.c **** 		buffer++;
1069:FT_Eve_Hal/FT_Gpu_Hal.c **** 	}
1070:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
1071:FT_Eve_Hal/FT_Gpu_Hal.c **** 
1072:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef MSVC_PLATFORM_SPI
1073:FT_Eve_Hal/FT_Gpu_Hal.c **** 	{
1074:FT_Eve_Hal/FT_Gpu_Hal.c **** 
1075:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef MSVC_PLATFORM_LIBMPSSE
ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 70


1076:FT_Eve_Hal/FT_Gpu_Hal.c **** 		SPI_Write((FT_HANDLE)host->hal_handle,buffer,length,&SizeTransfered,SPI_TRANSFER_OPTIONS_SIZE_IN_
1077:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
1078:FT_Eve_Hal/FT_Gpu_Hal.c **** 
1079:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef MSVC_PLATFORM_Lib4222
1080:FT_Eve_Hal/FT_Gpu_Hal.c **** 		/* TBD - chunk them into 64kb */
1081:FT_Eve_Hal/FT_Gpu_Hal.c **** 		ft_uint16_t SizeTransfered16;
1082:FT_Eve_Hal/FT_Gpu_Hal.c **** 		FT4222_SPIMaster_SingleWrite((FT_HANDLE)host->hal_handle, (uint8 *)buffer,length,&SizeTransfered1
1083:FT_Eve_Hal/FT_Gpu_Hal.c **** 		SizeTransfered = SizeTransfered16;
1084:FT_Eve_Hal/FT_Gpu_Hal.c **** 
1085:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
1086:FT_Eve_Hal/FT_Gpu_Hal.c **** 	}
1087:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
1088:FT_Eve_Hal/FT_Gpu_Hal.c **** 
1089:FT_Eve_Hal/FT_Gpu_Hal.c **** 	Ft_Gpu_Hal_EndTransfer(host);
 2882              		.loc 1 1089 0
 2883 003a F868     		ldr	r0, [r7, #12]
 2884 003c FFF7FEFF 		bl	Ft_Gpu_Hal_EndTransfer
1090:FT_Eve_Hal/FT_Gpu_Hal.c **** }
 2885              		.loc 1 1090 0
 2886 0040 00BF     		nop
 2887 0042 1837     		adds	r7, r7, #24
 2888              	.LCFI212:
 2889              		.cfi_def_cfa_offset 8
 2890 0044 BD46     		mov	sp, r7
 2891              	.LCFI213:
 2892              		.cfi_def_cfa_register 13
 2893              		@ sp needed
 2894 0046 80BD     		pop	{r7, pc}
 2895              		.cfi_endproc
 2896              	.LFE179:
 2898              		.section	.text.Ft_Gpu_Hal_RdMem,"ax",%progbits
 2899              		.align	1
 2900              		.global	Ft_Gpu_Hal_RdMem
 2901              		.syntax unified
 2902              		.thumb
 2903              		.thumb_func
 2904              		.fpu fpv5-sp-d16
 2906              	Ft_Gpu_Hal_RdMem:
 2907              	.LFB180:
1091:FT_Eve_Hal/FT_Gpu_Hal.c **** 
1092:FT_Eve_Hal/FT_Gpu_Hal.c **** ft_void_t Ft_Gpu_Hal_RdMem(Ft_Gpu_Hal_Context_t *host, ft_uint32_t addr,
1093:FT_Eve_Hal/FT_Gpu_Hal.c **** 		ft_uint8_t *buffer, ft_uint32_t length) {
 2908              		.loc 1 1093 0
 2909              		.cfi_startproc
 2910              		@ args = 0, pretend = 0, frame = 24
 2911              		@ frame_needed = 1, uses_anonymous_args = 0
 2912 0000 80B5     		push	{r7, lr}
 2913              	.LCFI214:
 2914              		.cfi_def_cfa_offset 8
 2915              		.cfi_offset 7, -8
 2916              		.cfi_offset 14, -4
 2917 0002 86B0     		sub	sp, sp, #24
 2918              	.LCFI215:
 2919              		.cfi_def_cfa_offset 32
 2920 0004 00AF     		add	r7, sp, #0
 2921              	.LCFI216:
 2922              		.cfi_def_cfa_register 7
ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 71


 2923 0006 F860     		str	r0, [r7, #12]
 2924 0008 B960     		str	r1, [r7, #8]
 2925 000a 7A60     		str	r2, [r7, #4]
 2926 000c 3B60     		str	r3, [r7]
1094:FT_Eve_Hal/FT_Gpu_Hal.c **** 	ft_uint32_t SizeTransfered = 0;
 2927              		.loc 1 1094 0
 2928 000e 0023     		movs	r3, #0
 2929 0010 7B61     		str	r3, [r7, #20]
1095:FT_Eve_Hal/FT_Gpu_Hal.c **** 
1096:FT_Eve_Hal/FT_Gpu_Hal.c **** 	Ft_Gpu_Hal_StartTransfer(host, FT_GPU_READ, addr);
 2930              		.loc 1 1096 0
 2931 0012 BA68     		ldr	r2, [r7, #8]
 2932 0014 0021     		movs	r1, #0
 2933 0016 F868     		ldr	r0, [r7, #12]
 2934 0018 FFF7FEFF 		bl	Ft_Gpu_Hal_StartTransfer
1097:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef STM32F7
1098:FT_Eve_Hal/FT_Gpu_Hal.c **** 	while (length--) {
 2935              		.loc 1 1098 0
 2936 001c 0AE0     		b	.L130
 2937              	.L131:
1099:FT_Eve_Hal/FT_Gpu_Hal.c **** 		*buffer = Ft_Gpu_Hal_Transfer8(host, 0);
 2938              		.loc 1 1099 0
 2939 001e 0021     		movs	r1, #0
 2940 0020 F868     		ldr	r0, [r7, #12]
 2941 0022 FFF7FEFF 		bl	Ft_Gpu_Hal_Transfer8
 2942 0026 0346     		mov	r3, r0
 2943 0028 1A46     		mov	r2, r3
 2944 002a 7B68     		ldr	r3, [r7, #4]
 2945 002c 1A70     		strb	r2, [r3]
1100:FT_Eve_Hal/FT_Gpu_Hal.c **** 		buffer++;
 2946              		.loc 1 1100 0
 2947 002e 7B68     		ldr	r3, [r7, #4]
 2948 0030 0133     		adds	r3, r3, #1
 2949 0032 7B60     		str	r3, [r7, #4]
 2950              	.L130:
1098:FT_Eve_Hal/FT_Gpu_Hal.c **** 		*buffer = Ft_Gpu_Hal_Transfer8(host, 0);
 2951              		.loc 1 1098 0
 2952 0034 3B68     		ldr	r3, [r7]
 2953 0036 5A1E     		subs	r2, r3, #1
 2954 0038 3A60     		str	r2, [r7]
 2955 003a 002B     		cmp	r3, #0
 2956 003c EFD1     		bne	.L131
1101:FT_Eve_Hal/FT_Gpu_Hal.c **** 	}
1102:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
1103:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef FT900_PLATFORM
1104:FT_Eve_Hal/FT_Gpu_Hal.c **** 	unsigned char spiData[2] = {0};
1105:FT_Eve_Hal/FT_Gpu_Hal.c **** 	spi_readn(SPIM,spiData,host->spinumdummy);
1106:FT_Eve_Hal/FT_Gpu_Hal.c **** 	spi_readn(SPIM,buffer,length);
1107:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
1108:FT_Eve_Hal/FT_Gpu_Hal.c **** #if defined(ARDUINO_PLATFORM_SPI) || defined(MSVC_FT800EMU)
1109:FT_Eve_Hal/FT_Gpu_Hal.c **** 	while (length--) {
1110:FT_Eve_Hal/FT_Gpu_Hal.c **** 		*buffer = Ft_Gpu_Hal_Transfer8(host,0);
1111:FT_Eve_Hal/FT_Gpu_Hal.c **** 		buffer++;
1112:FT_Eve_Hal/FT_Gpu_Hal.c **** 	}
1113:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
1114:FT_Eve_Hal/FT_Gpu_Hal.c **** 
1115:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef MSVC_PLATFORM_SPI
ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 72


1116:FT_Eve_Hal/FT_Gpu_Hal.c **** 	{
1117:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef MSVC_PLATFORM_LIBMPSSE
1118:FT_Eve_Hal/FT_Gpu_Hal.c **** 		SPI_Read((FT_HANDLE)host->hal_handle,buffer,length,&SizeTransfered,SPI_TRANSFER_OPTIONS_SIZE_IN_B
1119:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
1120:FT_Eve_Hal/FT_Gpu_Hal.c **** 
1121:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef MSVC_PLATFORM_Lib4222
1122:FT_Eve_Hal/FT_Gpu_Hal.c **** 		/* TBD - chunk into 64kb */
1123:FT_Eve_Hal/FT_Gpu_Hal.c **** 		ft_uint16_t SizeTransfered16;
1124:FT_Eve_Hal/FT_Gpu_Hal.c **** 		FT4222_SPIMaster_SingleRead((FT_HANDLE)host->hal_handle, (uint8 *)buffer,length,&SizeTransfered16
1125:FT_Eve_Hal/FT_Gpu_Hal.c **** 		SizeTransfered = SizeTransfered16;
1126:FT_Eve_Hal/FT_Gpu_Hal.c **** 
1127:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
1128:FT_Eve_Hal/FT_Gpu_Hal.c **** 	}
1129:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
1130:FT_Eve_Hal/FT_Gpu_Hal.c **** 
1131:FT_Eve_Hal/FT_Gpu_Hal.c **** 	Ft_Gpu_Hal_EndTransfer(host);
 2957              		.loc 1 1131 0
 2958 003e F868     		ldr	r0, [r7, #12]
 2959 0040 FFF7FEFF 		bl	Ft_Gpu_Hal_EndTransfer
1132:FT_Eve_Hal/FT_Gpu_Hal.c **** }
 2960              		.loc 1 1132 0
 2961 0044 00BF     		nop
 2962 0046 1837     		adds	r7, r7, #24
 2963              	.LCFI217:
 2964              		.cfi_def_cfa_offset 8
 2965 0048 BD46     		mov	sp, r7
 2966              	.LCFI218:
 2967              		.cfi_def_cfa_register 13
 2968              		@ sp needed
 2969 004a 80BD     		pop	{r7, pc}
 2970              		.cfi_endproc
 2971              	.LFE180:
 2973              		.section	.text.Ft_Gpu_Hal_Dec2Ascii,"ax",%progbits
 2974              		.align	1
 2975              		.global	Ft_Gpu_Hal_Dec2Ascii
 2976              		.syntax unified
 2977              		.thumb
 2978              		.thumb_func
 2979              		.fpu fpv5-sp-d16
 2981              	Ft_Gpu_Hal_Dec2Ascii:
 2982              	.LFB181:
1133:FT_Eve_Hal/FT_Gpu_Hal.c **** 
1134:FT_Eve_Hal/FT_Gpu_Hal.c **** /* Helper api for dec to ascii */
1135:FT_Eve_Hal/FT_Gpu_Hal.c **** ft_int32_t Ft_Gpu_Hal_Dec2Ascii(ft_char8_t *pSrc, ft_int32_t value) {
 2983              		.loc 1 1135 0
 2984              		.cfi_startproc
 2985              		@ args = 0, pretend = 0, frame = 48
 2986              		@ frame_needed = 1, uses_anonymous_args = 0
 2987 0000 80B5     		push	{r7, lr}
 2988              	.LCFI219:
 2989              		.cfi_def_cfa_offset 8
 2990              		.cfi_offset 7, -8
 2991              		.cfi_offset 14, -4
 2992 0002 8CB0     		sub	sp, sp, #48
 2993              	.LCFI220:
 2994              		.cfi_def_cfa_offset 56
 2995 0004 00AF     		add	r7, sp, #0
ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 73


 2996              	.LCFI221:
 2997              		.cfi_def_cfa_register 7
 2998 0006 7860     		str	r0, [r7, #4]
 2999 0008 3960     		str	r1, [r7]
1136:FT_Eve_Hal/FT_Gpu_Hal.c **** 	ft_int16_t Length;
1137:FT_Eve_Hal/FT_Gpu_Hal.c **** 	ft_char8_t *pdst, charval;
1138:FT_Eve_Hal/FT_Gpu_Hal.c **** 	ft_int32_t CurrVal = value, tmpval, i;
 3000              		.loc 1 1138 0
 3001 000a 3B68     		ldr	r3, [r7]
 3002 000c BB62     		str	r3, [r7, #40]
1139:FT_Eve_Hal/FT_Gpu_Hal.c **** 	ft_char8_t tmparray[16], idx = 0;
 3003              		.loc 1 1139 0
 3004 000e 0023     		movs	r3, #0
 3005 0010 87F82330 		strb	r3, [r7, #35]
1140:FT_Eve_Hal/FT_Gpu_Hal.c **** 
1141:FT_Eve_Hal/FT_Gpu_Hal.c **** 	Length = strlen(pSrc);
 3006              		.loc 1 1141 0
 3007 0014 7868     		ldr	r0, [r7, #4]
 3008 0016 FFF7FEFF 		bl	strlen
 3009 001a 0346     		mov	r3, r0
 3010 001c 3B84     		strh	r3, [r7, #32]	@ movhi
1142:FT_Eve_Hal/FT_Gpu_Hal.c **** 	pdst = pSrc + Length;
 3011              		.loc 1 1142 0
 3012 001e B7F92030 		ldrsh	r3, [r7, #32]
 3013 0022 7A68     		ldr	r2, [r7, #4]
 3014 0024 1344     		add	r3, r3, r2
 3015 0026 FB62     		str	r3, [r7, #44]
1143:FT_Eve_Hal/FT_Gpu_Hal.c **** 
1144:FT_Eve_Hal/FT_Gpu_Hal.c **** 	if (0 == value) {
 3016              		.loc 1 1144 0
 3017 0028 3B68     		ldr	r3, [r7]
 3018 002a 002B     		cmp	r3, #0
 3019 002c 0BD1     		bne	.L133
1145:FT_Eve_Hal/FT_Gpu_Hal.c **** 		*pdst++ = '0';
 3020              		.loc 1 1145 0
 3021 002e FB6A     		ldr	r3, [r7, #44]
 3022 0030 5A1C     		adds	r2, r3, #1
 3023 0032 FA62     		str	r2, [r7, #44]
 3024 0034 3022     		movs	r2, #48
 3025 0036 1A70     		strb	r2, [r3]
1146:FT_Eve_Hal/FT_Gpu_Hal.c **** 		*pdst++ = '\0';
 3026              		.loc 1 1146 0
 3027 0038 FB6A     		ldr	r3, [r7, #44]
 3028 003a 5A1C     		adds	r2, r3, #1
 3029 003c FA62     		str	r2, [r7, #44]
 3030 003e 0022     		movs	r2, #0
 3031 0040 1A70     		strb	r2, [r3]
1147:FT_Eve_Hal/FT_Gpu_Hal.c **** 		return 0;
 3032              		.loc 1 1147 0
 3033 0042 0023     		movs	r3, #0
 3034 0044 4EE0     		b	.L140
 3035              	.L133:
1148:FT_Eve_Hal/FT_Gpu_Hal.c **** 	}
1149:FT_Eve_Hal/FT_Gpu_Hal.c **** 
1150:FT_Eve_Hal/FT_Gpu_Hal.c **** 	if (CurrVal < 0) {
 3036              		.loc 1 1150 0
 3037 0046 BB6A     		ldr	r3, [r7, #40]
ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 74


 3038 0048 002B     		cmp	r3, #0
 3039 004a 29DA     		bge	.L136
1151:FT_Eve_Hal/FT_Gpu_Hal.c **** 		*pdst++ = '-';
 3040              		.loc 1 1151 0
 3041 004c FB6A     		ldr	r3, [r7, #44]
 3042 004e 5A1C     		adds	r2, r3, #1
 3043 0050 FA62     		str	r2, [r7, #44]
 3044 0052 2D22     		movs	r2, #45
 3045 0054 1A70     		strb	r2, [r3]
1152:FT_Eve_Hal/FT_Gpu_Hal.c **** 		CurrVal = -CurrVal;
 3046              		.loc 1 1152 0
 3047 0056 BB6A     		ldr	r3, [r7, #40]
 3048 0058 5B42     		negs	r3, r3
 3049 005a BB62     		str	r3, [r7, #40]
1153:FT_Eve_Hal/FT_Gpu_Hal.c **** 	}
1154:FT_Eve_Hal/FT_Gpu_Hal.c **** 	/* insert the value */
1155:FT_Eve_Hal/FT_Gpu_Hal.c **** 	while (CurrVal > 0) {
 3050              		.loc 1 1155 0
 3051 005c 20E0     		b	.L136
 3052              	.L137:
1156:FT_Eve_Hal/FT_Gpu_Hal.c **** 		tmpval = CurrVal;
 3053              		.loc 1 1156 0
 3054 005e BB6A     		ldr	r3, [r7, #40]
 3055 0060 FB61     		str	r3, [r7, #28]
1157:FT_Eve_Hal/FT_Gpu_Hal.c **** 		CurrVal /= 10;
 3056              		.loc 1 1157 0
 3057 0062 BB6A     		ldr	r3, [r7, #40]
 3058 0064 214A     		ldr	r2, .L141
 3059 0066 82FB0312 		smull	r1, r2, r2, r3
 3060 006a 9210     		asrs	r2, r2, #2
 3061 006c DB17     		asrs	r3, r3, #31
 3062 006e D31A     		subs	r3, r2, r3
 3063 0070 BB62     		str	r3, [r7, #40]
1158:FT_Eve_Hal/FT_Gpu_Hal.c **** 		tmpval = tmpval - CurrVal * 10;
 3064              		.loc 1 1158 0
 3065 0072 BB6A     		ldr	r3, [r7, #40]
 3066 0074 6FF00902 		mvn	r2, #9
 3067 0078 02FB03F3 		mul	r3, r2, r3
 3068 007c FA69     		ldr	r2, [r7, #28]
 3069 007e 1344     		add	r3, r3, r2
 3070 0080 FB61     		str	r3, [r7, #28]
1159:FT_Eve_Hal/FT_Gpu_Hal.c **** 		charval = '0' + tmpval;
 3071              		.loc 1 1159 0
 3072 0082 FB69     		ldr	r3, [r7, #28]
 3073 0084 DBB2     		uxtb	r3, r3
 3074 0086 3033     		adds	r3, r3, #48
 3075 0088 FB76     		strb	r3, [r7, #27]
1160:FT_Eve_Hal/FT_Gpu_Hal.c **** 		tmparray[idx++] = charval;
 3076              		.loc 1 1160 0
 3077 008a 97F82330 		ldrb	r3, [r7, #35]	@ zero_extendqisi2
 3078 008e 5A1C     		adds	r2, r3, #1
 3079 0090 87F82320 		strb	r2, [r7, #35]
 3080 0094 07F13002 		add	r2, r7, #48
 3081 0098 1344     		add	r3, r3, r2
 3082 009a FA7E     		ldrb	r2, [r7, #27]
 3083 009c 03F8282C 		strb	r2, [r3, #-40]
 3084              	.L136:
ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 75


1155:FT_Eve_Hal/FT_Gpu_Hal.c **** 		tmpval = CurrVal;
 3085              		.loc 1 1155 0
 3086 00a0 BB6A     		ldr	r3, [r7, #40]
 3087 00a2 002B     		cmp	r3, #0
 3088 00a4 DBDC     		bgt	.L137
1161:FT_Eve_Hal/FT_Gpu_Hal.c **** 	}
1162:FT_Eve_Hal/FT_Gpu_Hal.c **** 
1163:FT_Eve_Hal/FT_Gpu_Hal.c **** 	for (i = 0; i < idx; i++) {
 3089              		.loc 1 1163 0
 3090 00a6 0023     		movs	r3, #0
 3091 00a8 7B62     		str	r3, [r7, #36]
 3092 00aa 10E0     		b	.L138
 3093              	.L139:
1164:FT_Eve_Hal/FT_Gpu_Hal.c **** 		*pdst++ = tmparray[idx - i - 1];
 3094              		.loc 1 1164 0 discriminator 3
 3095 00ac 97F82320 		ldrb	r2, [r7, #35]	@ zero_extendqisi2
 3096 00b0 7B6A     		ldr	r3, [r7, #36]
 3097 00b2 D31A     		subs	r3, r2, r3
 3098 00b4 5A1E     		subs	r2, r3, #1
 3099 00b6 FB6A     		ldr	r3, [r7, #44]
 3100 00b8 591C     		adds	r1, r3, #1
 3101 00ba F962     		str	r1, [r7, #44]
 3102 00bc 07F13001 		add	r1, r7, #48
 3103 00c0 0A44     		add	r2, r2, r1
 3104 00c2 12F8282C 		ldrb	r2, [r2, #-40]	@ zero_extendqisi2
 3105 00c6 1A70     		strb	r2, [r3]
1163:FT_Eve_Hal/FT_Gpu_Hal.c **** 		*pdst++ = tmparray[idx - i - 1];
 3106              		.loc 1 1163 0 discriminator 3
 3107 00c8 7B6A     		ldr	r3, [r7, #36]
 3108 00ca 0133     		adds	r3, r3, #1
 3109 00cc 7B62     		str	r3, [r7, #36]
 3110              	.L138:
1163:FT_Eve_Hal/FT_Gpu_Hal.c **** 		*pdst++ = tmparray[idx - i - 1];
 3111              		.loc 1 1163 0 is_stmt 0 discriminator 1
 3112 00ce 97F82330 		ldrb	r3, [r7, #35]	@ zero_extendqisi2
 3113 00d2 7A6A     		ldr	r2, [r7, #36]
 3114 00d4 9A42     		cmp	r2, r3
 3115 00d6 E9DB     		blt	.L139
1165:FT_Eve_Hal/FT_Gpu_Hal.c **** 	}
1166:FT_Eve_Hal/FT_Gpu_Hal.c **** 	*pdst++ = '\0';
 3116              		.loc 1 1166 0 is_stmt 1
 3117 00d8 FB6A     		ldr	r3, [r7, #44]
 3118 00da 5A1C     		adds	r2, r3, #1
 3119 00dc FA62     		str	r2, [r7, #44]
 3120 00de 0022     		movs	r2, #0
 3121 00e0 1A70     		strb	r2, [r3]
1167:FT_Eve_Hal/FT_Gpu_Hal.c **** 
1168:FT_Eve_Hal/FT_Gpu_Hal.c **** 	return 0;
 3122              		.loc 1 1168 0
 3123 00e2 0023     		movs	r3, #0
 3124              	.L140:
1169:FT_Eve_Hal/FT_Gpu_Hal.c **** }
 3125              		.loc 1 1169 0 discriminator 1
 3126 00e4 1846     		mov	r0, r3
 3127 00e6 3037     		adds	r7, r7, #48
 3128              	.LCFI222:
 3129              		.cfi_def_cfa_offset 8
ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 76


 3130 00e8 BD46     		mov	sp, r7
 3131              	.LCFI223:
 3132              		.cfi_def_cfa_register 13
 3133              		@ sp needed
 3134 00ea 80BD     		pop	{r7, pc}
 3135              	.L142:
 3136              		.align	2
 3137              	.L141:
 3138 00ec 67666666 		.word	1717986919
 3139              		.cfi_endproc
 3140              	.LFE181:
 3142              		.section	.text.Ft_Gpu_Hal_Sleep,"ax",%progbits
 3143              		.align	1
 3144              		.global	Ft_Gpu_Hal_Sleep
 3145              		.syntax unified
 3146              		.thumb
 3147              		.thumb_func
 3148              		.fpu fpv5-sp-d16
 3150              	Ft_Gpu_Hal_Sleep:
 3151              	.LFB182:
1170:FT_Eve_Hal/FT_Gpu_Hal.c **** 
1171:FT_Eve_Hal/FT_Gpu_Hal.c **** ft_void_t Ft_Gpu_Hal_Sleep(ft_uint32_t ms) {
 3152              		.loc 1 1171 0
 3153              		.cfi_startproc
 3154              		@ args = 0, pretend = 0, frame = 8
 3155              		@ frame_needed = 1, uses_anonymous_args = 0
 3156 0000 80B5     		push	{r7, lr}
 3157              	.LCFI224:
 3158              		.cfi_def_cfa_offset 8
 3159              		.cfi_offset 7, -8
 3160              		.cfi_offset 14, -4
 3161 0002 82B0     		sub	sp, sp, #8
 3162              	.LCFI225:
 3163              		.cfi_def_cfa_offset 16
 3164 0004 00AF     		add	r7, sp, #0
 3165              	.LCFI226:
 3166              		.cfi_def_cfa_register 7
 3167 0006 7860     		str	r0, [r7, #4]
1172:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef STM32F7
1173:FT_Eve_Hal/FT_Gpu_Hal.c **** 	HAL_Delay(ms);
 3168              		.loc 1 1173 0
 3169 0008 7868     		ldr	r0, [r7, #4]
 3170 000a FFF7FEFF 		bl	HAL_Delay
1174:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
1175:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef FT900_PLATFORM
1176:FT_Eve_Hal/FT_Gpu_Hal.c **** 	delayms(ms);
1177:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
1178:FT_Eve_Hal/FT_Gpu_Hal.c **** #if defined(MSVC_PLATFORM) || defined(MSVC_FT800EMU)
1179:FT_Eve_Hal/FT_Gpu_Hal.c **** 	Sleep(ms);
1180:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
1181:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef ARDUINO_PLATFORM
1182:FT_Eve_Hal/FT_Gpu_Hal.c **** 	delay(ms);
1183:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
1184:FT_Eve_Hal/FT_Gpu_Hal.c **** }
 3171              		.loc 1 1184 0
 3172 000e 00BF     		nop
 3173 0010 0837     		adds	r7, r7, #8
ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 77


 3174              	.LCFI227:
 3175              		.cfi_def_cfa_offset 8
 3176 0012 BD46     		mov	sp, r7
 3177              	.LCFI228:
 3178              		.cfi_def_cfa_register 13
 3179              		@ sp needed
 3180 0014 80BD     		pop	{r7, pc}
 3181              		.cfi_endproc
 3182              	.LFE182:
 3184              		.section	.text.Ft_Gpu_Hal_SetSPI,"ax",%progbits
 3185              		.align	1
 3186              		.global	Ft_Gpu_Hal_SetSPI
 3187              		.syntax unified
 3188              		.thumb
 3189              		.thumb_func
 3190              		.fpu fpv5-sp-d16
 3192              	Ft_Gpu_Hal_SetSPI:
 3193              	.LFB183:
1185:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef FT_81X_ENABLE
1186:FT_Eve_Hal/FT_Gpu_Hal.c **** ft_int16_t Ft_Gpu_Hal_SetSPI(Ft_Gpu_Hal_Context_t *host,
1187:FT_Eve_Hal/FT_Gpu_Hal.c **** 		FT_GPU_SPI_NUMCHANNELS_T numchnls, FT_GPU_SPI_NUMDUMMYBYTES numdummy) {
 3194              		.loc 1 1187 0
 3195              		.cfi_startproc
 3196              		@ args = 0, pretend = 0, frame = 16
 3197              		@ frame_needed = 1, uses_anonymous_args = 0
 3198 0000 80B5     		push	{r7, lr}
 3199              	.LCFI229:
 3200              		.cfi_def_cfa_offset 8
 3201              		.cfi_offset 7, -8
 3202              		.cfi_offset 14, -4
 3203 0002 84B0     		sub	sp, sp, #16
 3204              	.LCFI230:
 3205              		.cfi_def_cfa_offset 24
 3206 0004 00AF     		add	r7, sp, #0
 3207              	.LCFI231:
 3208              		.cfi_def_cfa_register 7
 3209 0006 7860     		str	r0, [r7, #4]
 3210 0008 0B46     		mov	r3, r1
 3211 000a FB70     		strb	r3, [r7, #3]
 3212 000c 1346     		mov	r3, r2
 3213 000e BB70     		strb	r3, [r7, #2]
1188:FT_Eve_Hal/FT_Gpu_Hal.c **** 	ft_uint8_t writebyte = 0;
 3214              		.loc 1 1188 0
 3215 0010 0023     		movs	r3, #0
 3216 0012 FB73     		strb	r3, [r7, #15]
1189:FT_Eve_Hal/FT_Gpu_Hal.c **** 	/* error check */
1190:FT_Eve_Hal/FT_Gpu_Hal.c **** 	if ((numchnls > FT_GPU_SPI_QUAD_CHANNEL) || (numdummy > FT_GPU_SPI_TWODUMMY)
 3217              		.loc 1 1190 0
 3218 0014 FB78     		ldrb	r3, [r7, #3]	@ zero_extendqisi2
 3219 0016 022B     		cmp	r3, #2
 3220 0018 05D8     		bhi	.L145
 3221              		.loc 1 1190 0 is_stmt 0 discriminator 1
 3222 001a BB78     		ldrb	r3, [r7, #2]	@ zero_extendqisi2
 3223 001c 022B     		cmp	r3, #2
 3224 001e 02D8     		bhi	.L145
1191:FT_Eve_Hal/FT_Gpu_Hal.c **** 			|| (numdummy < FT_GPU_SPI_ONEDUMMY)) {
 3225              		.loc 1 1191 0 is_stmt 1
ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 78


 3226 0020 BB78     		ldrb	r3, [r7, #2]	@ zero_extendqisi2
 3227 0022 002B     		cmp	r3, #0
 3228 0024 02D1     		bne	.L146
 3229              	.L145:
1192:FT_Eve_Hal/FT_Gpu_Hal.c **** 		return -1;														//error
 3230              		.loc 1 1192 0
 3231 0026 4FF0FF33 		mov	r3, #-1
 3232 002a 17E0     		b	.L147
 3233              	.L146:
1193:FT_Eve_Hal/FT_Gpu_Hal.c **** 	}
1194:FT_Eve_Hal/FT_Gpu_Hal.c **** 
1195:FT_Eve_Hal/FT_Gpu_Hal.c **** 	host->spichannel = numchnls;
 3234              		.loc 1 1195 0
 3235 002c 7B68     		ldr	r3, [r7, #4]
 3236 002e FA78     		ldrb	r2, [r7, #3]
 3237 0030 1A75     		strb	r2, [r3, #20]
1196:FT_Eve_Hal/FT_Gpu_Hal.c **** 	writebyte = host->spichannel;
 3238              		.loc 1 1196 0
 3239 0032 7B68     		ldr	r3, [r7, #4]
 3240 0034 1B7D     		ldrb	r3, [r3, #20]
 3241 0036 FB73     		strb	r3, [r7, #15]
1197:FT_Eve_Hal/FT_Gpu_Hal.c **** 	host->spinumdummy = numdummy;
 3242              		.loc 1 1197 0
 3243 0038 7B68     		ldr	r3, [r7, #4]
 3244 003a BA78     		ldrb	r2, [r7, #2]
 3245 003c 5A75     		strb	r2, [r3, #21]
1198:FT_Eve_Hal/FT_Gpu_Hal.c **** 
1199:FT_Eve_Hal/FT_Gpu_Hal.c **** 	if (FT_GPU_SPI_TWODUMMY == host->spinumdummy) {
 3246              		.loc 1 1199 0
 3247 003e 7B68     		ldr	r3, [r7, #4]
 3248 0040 5B7D     		ldrb	r3, [r3, #21]	@ zero_extendqisi2
 3249 0042 022B     		cmp	r3, #2
 3250 0044 03D1     		bne	.L148
1200:FT_Eve_Hal/FT_Gpu_Hal.c **** 		writebyte |= FT_SPI_TWO_DUMMY_BYTE;
 3251              		.loc 1 1200 0
 3252 0046 FB7B     		ldrb	r3, [r7, #15]
 3253 0048 43F00403 		orr	r3, r3, #4
 3254 004c FB73     		strb	r3, [r7, #15]
 3255              	.L148:
1201:FT_Eve_Hal/FT_Gpu_Hal.c **** 	}
1202:FT_Eve_Hal/FT_Gpu_Hal.c **** 	Ft_Gpu_Hal_Wr8(host, REG_SPI_WIDTH, writebyte);
 3256              		.loc 1 1202 0
 3257 004e FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 3258 0050 1A46     		mov	r2, r3
 3259 0052 0449     		ldr	r1, .L149
 3260 0054 7868     		ldr	r0, [r7, #4]
 3261 0056 FFF7FEFF 		bl	Ft_Gpu_Hal_Wr8
1203:FT_Eve_Hal/FT_Gpu_Hal.c **** 	/* set the parameters in hal context and also set into ft81x */
1204:FT_Eve_Hal/FT_Gpu_Hal.c **** 	return 0;
 3262              		.loc 1 1204 0
 3263 005a 0023     		movs	r3, #0
 3264              	.L147:
1205:FT_Eve_Hal/FT_Gpu_Hal.c **** }
 3265              		.loc 1 1205 0
 3266 005c 1846     		mov	r0, r3
 3267 005e 1037     		adds	r7, r7, #16
 3268              	.LCFI232:
ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 79


 3269              		.cfi_def_cfa_offset 8
 3270 0060 BD46     		mov	sp, r7
 3271              	.LCFI233:
 3272              		.cfi_def_cfa_register 13
 3273              		@ sp needed
 3274 0062 80BD     		pop	{r7, pc}
 3275              	.L150:
 3276              		.align	2
 3277              	.L149:
 3278 0064 88213000 		.word	3154312
 3279              		.cfi_endproc
 3280              	.LFE183:
 3282              		.section	.text.ft_millis,"ax",%progbits
 3283              		.align	1
 3284              		.global	ft_millis
 3285              		.syntax unified
 3286              		.thumb
 3287              		.thumb_func
 3288              		.fpu fpv5-sp-d16
 3290              	ft_millis:
 3291              	.LFB184:
1206:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
1207:FT_Eve_Hal/FT_Gpu_Hal.c **** 
1208:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef FT900_PLATFORM
1209:FT_Eve_Hal/FT_Gpu_Hal.c **** /* Helper api for millis */
1210:FT_Eve_Hal/FT_Gpu_Hal.c **** /* api to return the time in ms. 0 after reset */
1211:FT_Eve_Hal/FT_Gpu_Hal.c **** 
1212:FT_Eve_Hal/FT_Gpu_Hal.c **** /* Globals for polling implementation */
1213:FT_Eve_Hal/FT_Gpu_Hal.c **** ft_uint32_t ft_millis_curr = 0,ft_millis_prev = 0;
1214:FT_Eve_Hal/FT_Gpu_Hal.c **** 
1215:FT_Eve_Hal/FT_Gpu_Hal.c **** /* Globals for interrupt implementation */
1216:FT_Eve_Hal/FT_Gpu_Hal.c **** ft_uint32_t ft_TotalMilliseconds = 0;
1217:FT_Eve_Hal/FT_Gpu_Hal.c **** 
1218:FT_Eve_Hal/FT_Gpu_Hal.c **** ft_void_t ft_millis_ticker()
1219:FT_Eve_Hal/FT_Gpu_Hal.c **** {
1220:FT_Eve_Hal/FT_Gpu_Hal.c **** 	timer_disable_interrupt(FT900_FT_MILLIS_TIMER);
1221:FT_Eve_Hal/FT_Gpu_Hal.c **** 	/* Clear the interrupt and increment the counter */
1222:FT_Eve_Hal/FT_Gpu_Hal.c **** 	timer_is_interrupted(FT900_FT_MILLIS_TIMER);
1223:FT_Eve_Hal/FT_Gpu_Hal.c **** 
1224:FT_Eve_Hal/FT_Gpu_Hal.c **** 	ft_TotalMilliseconds += 1;
1225:FT_Eve_Hal/FT_Gpu_Hal.c **** 	timer_enable_interrupt(FT900_FT_MILLIS_TIMER);
1226:FT_Eve_Hal/FT_Gpu_Hal.c **** }
1227:FT_Eve_Hal/FT_Gpu_Hal.c **** ft_void_t ft_millis_init()
1228:FT_Eve_Hal/FT_Gpu_Hal.c **** {
1229:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef FT900_PLATFORM
1230:FT_Eve_Hal/FT_Gpu_Hal.c **** 	ft_millis_curr = 0;
1231:FT_Eve_Hal/FT_Gpu_Hal.c **** 	ft_millis_prev = 0;
1232:FT_Eve_Hal/FT_Gpu_Hal.c **** 
1233:FT_Eve_Hal/FT_Gpu_Hal.c **** 	sys_enable(sys_device_timer_wdt);
1234:FT_Eve_Hal/FT_Gpu_Hal.c **** 	timer_prescaler(FT900_TIMER_PRESCALE_VALUE);
1235:FT_Eve_Hal/FT_Gpu_Hal.c **** 	timer_init(FT900_FT_MILLIS_TIMER,FT900_TIMER_OVERFLOW_VALUE,timer_direction_up,timer_prescaler_sel
1236:FT_Eve_Hal/FT_Gpu_Hal.c **** 
1237:FT_Eve_Hal/FT_Gpu_Hal.c **** 	interrupt_attach(interrupt_timers, 17, ft_millis_ticker);
1238:FT_Eve_Hal/FT_Gpu_Hal.c **** 
1239:FT_Eve_Hal/FT_Gpu_Hal.c **** 	/* enabling the interrupts for timer */
1240:FT_Eve_Hal/FT_Gpu_Hal.c **** 	timer_enable_interrupt(FT900_FT_MILLIS_TIMER);
1241:FT_Eve_Hal/FT_Gpu_Hal.c **** 
ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 80


1242:FT_Eve_Hal/FT_Gpu_Hal.c **** 	timer_start(FT900_FT_MILLIS_TIMER);
1243:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
1244:FT_Eve_Hal/FT_Gpu_Hal.c **** }
1245:FT_Eve_Hal/FT_Gpu_Hal.c **** /* Need to ensure that below api is called at least once in 6.5 seconds duration for FT900 platform
1246:FT_Eve_Hal/FT_Gpu_Hal.c **** /* global counter to loopback after ~49.71 days */
1247:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
1248:FT_Eve_Hal/FT_Gpu_Hal.c **** 
1249:FT_Eve_Hal/FT_Gpu_Hal.c **** ft_uint32_t ft_millis() {
 3292              		.loc 1 1249 0
 3293              		.cfi_startproc
 3294              		@ args = 0, pretend = 0, frame = 0
 3295              		@ frame_needed = 1, uses_anonymous_args = 0
 3296 0000 80B5     		push	{r7, lr}
 3297              	.LCFI234:
 3298              		.cfi_def_cfa_offset 8
 3299              		.cfi_offset 7, -8
 3300              		.cfi_offset 14, -4
 3301 0002 00AF     		add	r7, sp, #0
 3302              	.LCFI235:
 3303              		.cfi_def_cfa_register 7
1250:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef STM32F7
1251:FT_Eve_Hal/FT_Gpu_Hal.c **** 	return HAL_GetTick();
 3304              		.loc 1 1251 0
 3305 0004 FFF7FEFF 		bl	HAL_GetTick
 3306 0008 0346     		mov	r3, r0
1252:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
1253:FT_Eve_Hal/FT_Gpu_Hal.c **** }
 3307              		.loc 1 1253 0
 3308 000a 1846     		mov	r0, r3
 3309 000c 80BD     		pop	{r7, pc}
 3310              		.cfi_endproc
 3311              	.LFE184:
 3313              		.section	.text.ft_millis_exit,"ax",%progbits
 3314              		.align	1
 3315              		.global	ft_millis_exit
 3316              		.syntax unified
 3317              		.thumb
 3318              		.thumb_func
 3319              		.fpu fpv5-sp-d16
 3321              	ft_millis_exit:
 3322              	.LFB185:
1254:FT_Eve_Hal/FT_Gpu_Hal.c **** //#if defined(ARDUINO_PLATFORM) ||defined(MSVC_PLATFORM) || defined(MSVC_FT800EMU)
1255:FT_Eve_Hal/FT_Gpu_Hal.c **** //	return millis();
1256:FT_Eve_Hal/FT_Gpu_Hal.c **** //#endif
1257:FT_Eve_Hal/FT_Gpu_Hal.c **** //#ifdef FT900_PLATFORM
1258:FT_Eve_Hal/FT_Gpu_Hal.c **** //
1259:FT_Eve_Hal/FT_Gpu_Hal.c **** //	/* Polling implementation */
1260:FT_Eve_Hal/FT_Gpu_Hal.c **** //#if 0
1261:FT_Eve_Hal/FT_Gpu_Hal.c **** //	ft_uint32_t currtime;
1262:FT_Eve_Hal/FT_Gpu_Hal.c **** //	currtime = ft900_timer_get_value(FT900_FT_MILLIS_TIMER);
1263:FT_Eve_Hal/FT_Gpu_Hal.c **** //
1264:FT_Eve_Hal/FT_Gpu_Hal.c **** //	if(ft_millis_prev > currtime)
1265:FT_Eve_Hal/FT_Gpu_Hal.c **** //	{
1266:FT_Eve_Hal/FT_Gpu_Hal.c **** //		/* loop back condition */
1267:FT_Eve_Hal/FT_Gpu_Hal.c **** //		ft_millis_curr += ((FT900_TIMER_MAX_VALUE - ft_millis_prev + currtime)/10);
1268:FT_Eve_Hal/FT_Gpu_Hal.c **** //	}
1269:FT_Eve_Hal/FT_Gpu_Hal.c **** //	else
ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 81


1270:FT_Eve_Hal/FT_Gpu_Hal.c **** //	{
1271:FT_Eve_Hal/FT_Gpu_Hal.c **** //		ft_millis_curr += ((currtime - ft_millis_prev)/10);
1272:FT_Eve_Hal/FT_Gpu_Hal.c **** //	}
1273:FT_Eve_Hal/FT_Gpu_Hal.c **** //	ft_millis_prev = currtime;
1274:FT_Eve_Hal/FT_Gpu_Hal.c **** //	//printf("current time %d \n",ft_millis_curr);
1275:FT_Eve_Hal/FT_Gpu_Hal.c **** //	return ft_millis_curr;
1276:FT_Eve_Hal/FT_Gpu_Hal.c **** //#endif
1277:FT_Eve_Hal/FT_Gpu_Hal.c **** //
1278:FT_Eve_Hal/FT_Gpu_Hal.c **** //	/* Interrupt implementation */
1279:FT_Eve_Hal/FT_Gpu_Hal.c **** //	return (ft_TotalMilliseconds);
1280:FT_Eve_Hal/FT_Gpu_Hal.c **** //#endif
1281:FT_Eve_Hal/FT_Gpu_Hal.c **** //}
1282:FT_Eve_Hal/FT_Gpu_Hal.c **** 
1283:FT_Eve_Hal/FT_Gpu_Hal.c **** ft_void_t ft_millis_exit() {
 3323              		.loc 1 1283 0
 3324              		.cfi_startproc
 3325              		@ args = 0, pretend = 0, frame = 0
 3326              		@ frame_needed = 1, uses_anonymous_args = 0
 3327              		@ link register save eliminated.
 3328 0000 80B4     		push	{r7}
 3329              	.LCFI236:
 3330              		.cfi_def_cfa_offset 4
 3331              		.cfi_offset 7, -4
 3332 0002 00AF     		add	r7, sp, #0
 3333              	.LCFI237:
 3334              		.cfi_def_cfa_register 7
1284:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef FT900_PLATFORM
1285:FT_Eve_Hal/FT_Gpu_Hal.c **** 	timer_stop(FT900_FT_MILLIS_TIMER);
1286:FT_Eve_Hal/FT_Gpu_Hal.c **** 	timer_disable_interrupt(FT900_FT_MILLIS_TIMER);
1287:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
1288:FT_Eve_Hal/FT_Gpu_Hal.c **** }
 3335              		.loc 1 1288 0
 3336 0004 00BF     		nop
 3337 0006 BD46     		mov	sp, r7
 3338              	.LCFI238:
 3339              		.cfi_def_cfa_register 13
 3340              		@ sp needed
 3341 0008 5DF8047B 		ldr	r7, [sp], #4
 3342              	.LCFI239:
 3343              		.cfi_restore 7
 3344              		.cfi_def_cfa_offset 0
 3345 000c 7047     		bx	lr
 3346              		.cfi_endproc
 3347              	.LFE185:
 3349              		.section	.text.Ft_Fifo_Init,"ax",%progbits
 3350              		.align	1
 3351              		.global	Ft_Fifo_Init
 3352              		.syntax unified
 3353              		.thumb
 3354              		.thumb_func
 3355              		.fpu fpv5-sp-d16
 3357              	Ft_Fifo_Init:
 3358              	.LFB186:
1289:FT_Eve_Hal/FT_Gpu_Hal.c **** /* FIFO related apis */
1290:FT_Eve_Hal/FT_Gpu_Hal.c **** //Init all the parameters of fifo buffer
1291:FT_Eve_Hal/FT_Gpu_Hal.c **** ft_void_t Ft_Fifo_Init(Ft_Fifo_t *pFifo, ft_uint32_t StartAddress,
1292:FT_Eve_Hal/FT_Gpu_Hal.c **** 		ft_uint32_t Length, ft_uint32_t HWReadRegAddress,
ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 82


1293:FT_Eve_Hal/FT_Gpu_Hal.c **** 		ft_uint32_t HWWriteRegAddress) {
 3359              		.loc 1 1293 0
 3360              		.cfi_startproc
 3361              		@ args = 4, pretend = 0, frame = 16
 3362              		@ frame_needed = 1, uses_anonymous_args = 0
 3363              		@ link register save eliminated.
 3364 0000 80B4     		push	{r7}
 3365              	.LCFI240:
 3366              		.cfi_def_cfa_offset 4
 3367              		.cfi_offset 7, -4
 3368 0002 85B0     		sub	sp, sp, #20
 3369              	.LCFI241:
 3370              		.cfi_def_cfa_offset 24
 3371 0004 00AF     		add	r7, sp, #0
 3372              	.LCFI242:
 3373              		.cfi_def_cfa_register 7
 3374 0006 F860     		str	r0, [r7, #12]
 3375 0008 B960     		str	r1, [r7, #8]
 3376 000a 7A60     		str	r2, [r7, #4]
 3377 000c 3B60     		str	r3, [r7]
1294:FT_Eve_Hal/FT_Gpu_Hal.c **** 	/* update the context parameters */
1295:FT_Eve_Hal/FT_Gpu_Hal.c **** 	pFifo->fifo_buff = StartAddress;
 3378              		.loc 1 1295 0
 3379 000e FB68     		ldr	r3, [r7, #12]
 3380 0010 BA68     		ldr	r2, [r7, #8]
 3381 0012 1A60     		str	r2, [r3]
1296:FT_Eve_Hal/FT_Gpu_Hal.c **** 	pFifo->fifo_len = Length;
 3382              		.loc 1 1296 0
 3383 0014 7A68     		ldr	r2, [r7, #4]
 3384 0016 FB68     		ldr	r3, [r7, #12]
 3385 0018 5A60     		str	r2, [r3, #4]
1297:FT_Eve_Hal/FT_Gpu_Hal.c **** 	pFifo->fifo_rp = pFifo->fifo_wp = 0;
 3386              		.loc 1 1297 0
 3387 001a FB68     		ldr	r3, [r7, #12]
 3388 001c 0022     		movs	r2, #0
 3389 001e 9A60     		str	r2, [r3, #8]
 3390 0020 FB68     		ldr	r3, [r7, #12]
 3391 0022 9A68     		ldr	r2, [r3, #8]
 3392 0024 FB68     		ldr	r3, [r7, #12]
 3393 0026 DA60     		str	r2, [r3, #12]
1298:FT_Eve_Hal/FT_Gpu_Hal.c **** 
1299:FT_Eve_Hal/FT_Gpu_Hal.c **** 	/* update the hardware register addresses - specific to FT800 series chips */
1300:FT_Eve_Hal/FT_Gpu_Hal.c **** 	pFifo->HW_Read_Reg = HWReadRegAddress;
 3394              		.loc 1 1300 0
 3395 0028 FB68     		ldr	r3, [r7, #12]
 3396 002a 3A68     		ldr	r2, [r7]
 3397 002c 1A61     		str	r2, [r3, #16]
1301:FT_Eve_Hal/FT_Gpu_Hal.c **** 	pFifo->HW_Write_Reg = HWWriteRegAddress;
 3398              		.loc 1 1301 0
 3399 002e FB68     		ldr	r3, [r7, #12]
 3400 0030 BA69     		ldr	r2, [r7, #24]
 3401 0032 5A61     		str	r2, [r3, #20]
1302:FT_Eve_Hal/FT_Gpu_Hal.c **** }
 3402              		.loc 1 1302 0
 3403 0034 00BF     		nop
 3404 0036 1437     		adds	r7, r7, #20
 3405              	.LCFI243:
ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 83


 3406              		.cfi_def_cfa_offset 4
 3407 0038 BD46     		mov	sp, r7
 3408              	.LCFI244:
 3409              		.cfi_def_cfa_register 13
 3410              		@ sp needed
 3411 003a 5DF8047B 		ldr	r7, [sp], #4
 3412              	.LCFI245:
 3413              		.cfi_restore 7
 3414              		.cfi_def_cfa_offset 0
 3415 003e 7047     		bx	lr
 3416              		.cfi_endproc
 3417              	.LFE186:
 3419              		.section	.text.Ft_Fifo_Update,"ax",%progbits
 3420              		.align	1
 3421              		.global	Ft_Fifo_Update
 3422              		.syntax unified
 3423              		.thumb
 3424              		.thumb_func
 3425              		.fpu fpv5-sp-d16
 3427              	Ft_Fifo_Update:
 3428              	.LFB187:
1303:FT_Eve_Hal/FT_Gpu_Hal.c **** 
1304:FT_Eve_Hal/FT_Gpu_Hal.c **** //update both the read and write pointers
1305:FT_Eve_Hal/FT_Gpu_Hal.c **** ft_void_t Ft_Fifo_Update(Ft_Gpu_Hal_Context_t *host, Ft_Fifo_t *pFifo) {
 3429              		.loc 1 1305 0
 3430              		.cfi_startproc
 3431              		@ args = 0, pretend = 0, frame = 8
 3432              		@ frame_needed = 1, uses_anonymous_args = 0
 3433 0000 80B5     		push	{r7, lr}
 3434              	.LCFI246:
 3435              		.cfi_def_cfa_offset 8
 3436              		.cfi_offset 7, -8
 3437              		.cfi_offset 14, -4
 3438 0002 82B0     		sub	sp, sp, #8
 3439              	.LCFI247:
 3440              		.cfi_def_cfa_offset 16
 3441 0004 00AF     		add	r7, sp, #0
 3442              	.LCFI248:
 3443              		.cfi_def_cfa_register 7
 3444 0006 7860     		str	r0, [r7, #4]
 3445 0008 3960     		str	r1, [r7]
1306:FT_Eve_Hal/FT_Gpu_Hal.c **** 	pFifo->fifo_rp = Ft_Gpu_Hal_Rd32(host, pFifo->HW_Read_Reg);
 3446              		.loc 1 1306 0
 3447 000a 3B68     		ldr	r3, [r7]
 3448 000c 1B69     		ldr	r3, [r3, #16]
 3449 000e 1946     		mov	r1, r3
 3450 0010 7868     		ldr	r0, [r7, #4]
 3451 0012 FFF7FEFF 		bl	Ft_Gpu_Hal_Rd32
 3452 0016 0346     		mov	r3, r0
 3453 0018 1A46     		mov	r2, r3
 3454 001a 3B68     		ldr	r3, [r7]
 3455 001c DA60     		str	r2, [r3, #12]
1307:FT_Eve_Hal/FT_Gpu_Hal.c **** 	//Ft_Gpu_Hal_Wr32(host,pFifo->HW_Write_Reg,pFifo->fifo_wp);
1308:FT_Eve_Hal/FT_Gpu_Hal.c **** }
 3456              		.loc 1 1308 0
 3457 001e 00BF     		nop
 3458 0020 0837     		adds	r7, r7, #8
ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 84


 3459              	.LCFI249:
 3460              		.cfi_def_cfa_offset 8
 3461 0022 BD46     		mov	sp, r7
 3462              	.LCFI250:
 3463              		.cfi_def_cfa_register 13
 3464              		@ sp needed
 3465 0024 80BD     		pop	{r7, pc}
 3466              		.cfi_endproc
 3467              	.LFE187:
 3469              		.section	.text.Ft_Fifo_Write,"ax",%progbits
 3470              		.align	1
 3471              		.global	Ft_Fifo_Write
 3472              		.syntax unified
 3473              		.thumb
 3474              		.thumb_func
 3475              		.fpu fpv5-sp-d16
 3477              	Ft_Fifo_Write:
 3478              	.LFB188:
1309:FT_Eve_Hal/FT_Gpu_Hal.c **** 
1310:FT_Eve_Hal/FT_Gpu_Hal.c **** //just write and update the write register
1311:FT_Eve_Hal/FT_Gpu_Hal.c **** ft_uint32_t Ft_Fifo_Write(Ft_Gpu_Hal_Context_t *host, Ft_Fifo_t *pFifo,
1312:FT_Eve_Hal/FT_Gpu_Hal.c **** 		ft_uint8_t *buffer, ft_uint32_t NumbytetoWrite) {
 3479              		.loc 1 1312 0
 3480              		.cfi_startproc
 3481              		@ args = 0, pretend = 0, frame = 32
 3482              		@ frame_needed = 1, uses_anonymous_args = 0
 3483 0000 80B5     		push	{r7, lr}
 3484              	.LCFI251:
 3485              		.cfi_def_cfa_offset 8
 3486              		.cfi_offset 7, -8
 3487              		.cfi_offset 14, -4
 3488 0002 88B0     		sub	sp, sp, #32
 3489              	.LCFI252:
 3490              		.cfi_def_cfa_offset 40
 3491 0004 00AF     		add	r7, sp, #0
 3492              	.LCFI253:
 3493              		.cfi_def_cfa_register 7
 3494 0006 F860     		str	r0, [r7, #12]
 3495 0008 B960     		str	r1, [r7, #8]
 3496 000a 7A60     		str	r2, [r7, #4]
 3497 000c 3B60     		str	r3, [r7]
1313:FT_Eve_Hal/FT_Gpu_Hal.c **** 	ft_uint32_t FreeSpace = Ft_Fifo_GetFreeSpace(host, pFifo), TotalBytes =
 3498              		.loc 1 1313 0
 3499 000e B968     		ldr	r1, [r7, #8]
 3500 0010 F868     		ldr	r0, [r7, #12]
 3501 0012 FFF7FEFF 		bl	Ft_Fifo_GetFreeSpace
 3502 0016 B861     		str	r0, [r7, #24]
 3503 0018 3B68     		ldr	r3, [r7]
 3504 001a FB61     		str	r3, [r7, #28]
1314:FT_Eve_Hal/FT_Gpu_Hal.c **** 			NumbytetoWrite;
1315:FT_Eve_Hal/FT_Gpu_Hal.c **** 
1316:FT_Eve_Hal/FT_Gpu_Hal.c **** 	if (NumbytetoWrite > FreeSpace) {
 3505              		.loc 1 1316 0
 3506 001c 3A68     		ldr	r2, [r7]
 3507 001e BB69     		ldr	r3, [r7, #24]
 3508 0020 9A42     		cmp	r2, r3
 3509 0022 0ED9     		bls	.L157
ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 85


1317:FT_Eve_Hal/FT_Gpu_Hal.c **** 		/* update the read pointer and get the free space */
1318:FT_Eve_Hal/FT_Gpu_Hal.c **** 		Ft_Fifo_Update(host, pFifo);
 3510              		.loc 1 1318 0
 3511 0024 B968     		ldr	r1, [r7, #8]
 3512 0026 F868     		ldr	r0, [r7, #12]
 3513 0028 FFF7FEFF 		bl	Ft_Fifo_Update
1319:FT_Eve_Hal/FT_Gpu_Hal.c **** 		FreeSpace = Ft_Fifo_GetFreeSpace(host, pFifo);
 3514              		.loc 1 1319 0
 3515 002c B968     		ldr	r1, [r7, #8]
 3516 002e F868     		ldr	r0, [r7, #12]
 3517 0030 FFF7FEFF 		bl	Ft_Fifo_GetFreeSpace
 3518 0034 B861     		str	r0, [r7, #24]
1320:FT_Eve_Hal/FT_Gpu_Hal.c **** 
1321:FT_Eve_Hal/FT_Gpu_Hal.c **** 		if (NumbytetoWrite > FreeSpace) {
 3519              		.loc 1 1321 0
 3520 0036 3A68     		ldr	r2, [r7]
 3521 0038 BB69     		ldr	r3, [r7, #24]
 3522 003a 9A42     		cmp	r2, r3
 3523 003c 01D9     		bls	.L157
1322:FT_Eve_Hal/FT_Gpu_Hal.c **** 			TotalBytes = FreeSpace;
 3524              		.loc 1 1322 0
 3525 003e BB69     		ldr	r3, [r7, #24]
 3526 0040 FB61     		str	r3, [r7, #28]
 3527              	.L157:
1323:FT_Eve_Hal/FT_Gpu_Hal.c **** 		}
1324:FT_Eve_Hal/FT_Gpu_Hal.c **** 	}
1325:FT_Eve_Hal/FT_Gpu_Hal.c **** 
1326:FT_Eve_Hal/FT_Gpu_Hal.c **** 	/* sanity check */
1327:FT_Eve_Hal/FT_Gpu_Hal.c **** 	if (TotalBytes <= 0) {
 3528              		.loc 1 1327 0
 3529 0042 FB69     		ldr	r3, [r7, #28]
 3530 0044 002B     		cmp	r3, #0
 3531 0046 01D1     		bne	.L158
1328:FT_Eve_Hal/FT_Gpu_Hal.c **** 		//printf("no space in fifo write %d %d %d %d\n",TotalBytes,FreeSpace,pFifo->fifo_wp,pFifo->fifo_r
1329:FT_Eve_Hal/FT_Gpu_Hal.c **** 		return 0;											//error condition
 3532              		.loc 1 1329 0
 3533 0048 0023     		movs	r3, #0
 3534 004a 47E0     		b	.L159
 3535              	.L158:
1330:FT_Eve_Hal/FT_Gpu_Hal.c **** 	}
1331:FT_Eve_Hal/FT_Gpu_Hal.c **** 	/* check for the loopback conditions */
1332:FT_Eve_Hal/FT_Gpu_Hal.c **** 	if (pFifo->fifo_wp + TotalBytes >= pFifo->fifo_len) {
 3536              		.loc 1 1332 0
 3537 004c BB68     		ldr	r3, [r7, #8]
 3538 004e 9B68     		ldr	r3, [r3, #8]
 3539 0050 1A46     		mov	r2, r3
 3540 0052 FB69     		ldr	r3, [r7, #28]
 3541 0054 1344     		add	r3, r3, r2
 3542 0056 BA68     		ldr	r2, [r7, #8]
 3543 0058 5268     		ldr	r2, [r2, #4]
 3544 005a 9342     		cmp	r3, r2
 3545 005c 23D3     		bcc	.L160
 3546              	.LBB18:
1333:FT_Eve_Hal/FT_Gpu_Hal.c **** 		ft_uint32_t partialchunk = pFifo->fifo_len - pFifo->fifo_wp,
 3547              		.loc 1 1333 0
 3548 005e BB68     		ldr	r3, [r7, #8]
 3549 0060 5A68     		ldr	r2, [r3, #4]
ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 86


 3550 0062 BB68     		ldr	r3, [r7, #8]
 3551 0064 9B68     		ldr	r3, [r3, #8]
 3552 0066 D31A     		subs	r3, r2, r3
 3553 0068 7B61     		str	r3, [r7, #20]
1334:FT_Eve_Hal/FT_Gpu_Hal.c **** 				secpartialchunk = TotalBytes - partialchunk;
 3554              		.loc 1 1334 0
 3555 006a FA69     		ldr	r2, [r7, #28]
 3556 006c 7B69     		ldr	r3, [r7, #20]
 3557 006e D31A     		subs	r3, r2, r3
 3558 0070 3B61     		str	r3, [r7, #16]
1335:FT_Eve_Hal/FT_Gpu_Hal.c **** 
1336:FT_Eve_Hal/FT_Gpu_Hal.c **** 		Ft_Gpu_Hal_WrMem(host, pFifo->fifo_buff + pFifo->fifo_wp, buffer,
 3559              		.loc 1 1336 0
 3560 0072 BB68     		ldr	r3, [r7, #8]
 3561 0074 1B68     		ldr	r3, [r3]
 3562 0076 BA68     		ldr	r2, [r7, #8]
 3563 0078 9268     		ldr	r2, [r2, #8]
 3564 007a 9918     		adds	r1, r3, r2
 3565 007c 7B69     		ldr	r3, [r7, #20]
 3566 007e 7A68     		ldr	r2, [r7, #4]
 3567 0080 F868     		ldr	r0, [r7, #12]
 3568 0082 FFF7FEFF 		bl	Ft_Gpu_Hal_WrMem
1337:FT_Eve_Hal/FT_Gpu_Hal.c **** 				partialchunk);
1338:FT_Eve_Hal/FT_Gpu_Hal.c **** 		if (secpartialchunk > 0) {
 3569              		.loc 1 1338 0
 3570 0086 3B69     		ldr	r3, [r7, #16]
 3571 0088 002B     		cmp	r3, #0
 3572 008a 08D0     		beq	.L161
1339:FT_Eve_Hal/FT_Gpu_Hal.c **** 			Ft_Gpu_Hal_WrMem(host, pFifo->fifo_buff, buffer + partialchunk,
 3573              		.loc 1 1339 0
 3574 008c BB68     		ldr	r3, [r7, #8]
 3575 008e 1968     		ldr	r1, [r3]
 3576 0090 7A68     		ldr	r2, [r7, #4]
 3577 0092 7B69     		ldr	r3, [r7, #20]
 3578 0094 1A44     		add	r2, r2, r3
 3579 0096 3B69     		ldr	r3, [r7, #16]
 3580 0098 F868     		ldr	r0, [r7, #12]
 3581 009a FFF7FEFF 		bl	Ft_Gpu_Hal_WrMem
 3582              	.L161:
1340:FT_Eve_Hal/FT_Gpu_Hal.c **** 					secpartialchunk);
1341:FT_Eve_Hal/FT_Gpu_Hal.c **** 		}
1342:FT_Eve_Hal/FT_Gpu_Hal.c **** 		pFifo->fifo_wp = secpartialchunk;
 3583              		.loc 1 1342 0
 3584 009e 3A69     		ldr	r2, [r7, #16]
 3585 00a0 BB68     		ldr	r3, [r7, #8]
 3586 00a2 9A60     		str	r2, [r3, #8]
 3587              	.LBE18:
 3588 00a4 11E0     		b	.L162
 3589              	.L160:
1343:FT_Eve_Hal/FT_Gpu_Hal.c **** 		//printf("partial chunks %d %d %d %d\n",partialchunk,secpartialchunk,pFifo->fifo_wp,pFifo->fifo_r
1344:FT_Eve_Hal/FT_Gpu_Hal.c **** 
1345:FT_Eve_Hal/FT_Gpu_Hal.c **** 	} else {
1346:FT_Eve_Hal/FT_Gpu_Hal.c **** 		Ft_Gpu_Hal_WrMem(host, pFifo->fifo_buff + pFifo->fifo_wp, buffer,
 3590              		.loc 1 1346 0
 3591 00a6 BB68     		ldr	r3, [r7, #8]
 3592 00a8 1B68     		ldr	r3, [r3]
 3593 00aa BA68     		ldr	r2, [r7, #8]
ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 87


 3594 00ac 9268     		ldr	r2, [r2, #8]
 3595 00ae 9918     		adds	r1, r3, r2
 3596 00b0 FB69     		ldr	r3, [r7, #28]
 3597 00b2 7A68     		ldr	r2, [r7, #4]
 3598 00b4 F868     		ldr	r0, [r7, #12]
 3599 00b6 FFF7FEFF 		bl	Ft_Gpu_Hal_WrMem
1347:FT_Eve_Hal/FT_Gpu_Hal.c **** 				TotalBytes);
1348:FT_Eve_Hal/FT_Gpu_Hal.c **** 		pFifo->fifo_wp += TotalBytes;
 3600              		.loc 1 1348 0
 3601 00ba BB68     		ldr	r3, [r7, #8]
 3602 00bc 9B68     		ldr	r3, [r3, #8]
 3603 00be 1A46     		mov	r2, r3
 3604 00c0 FB69     		ldr	r3, [r7, #28]
 3605 00c2 1344     		add	r3, r3, r2
 3606 00c4 1A46     		mov	r2, r3
 3607 00c6 BB68     		ldr	r3, [r7, #8]
 3608 00c8 9A60     		str	r2, [r3, #8]
 3609              	.L162:
1349:FT_Eve_Hal/FT_Gpu_Hal.c **** 	}
1350:FT_Eve_Hal/FT_Gpu_Hal.c **** 
1351:FT_Eve_Hal/FT_Gpu_Hal.c **** 	/* update the write pointer address in write register */
1352:FT_Eve_Hal/FT_Gpu_Hal.c **** 	Ft_Gpu_Hal_Wr32(host, pFifo->HW_Write_Reg, pFifo->fifo_wp);
 3610              		.loc 1 1352 0
 3611 00ca BB68     		ldr	r3, [r7, #8]
 3612 00cc 5969     		ldr	r1, [r3, #20]
 3613 00ce BB68     		ldr	r3, [r7, #8]
 3614 00d0 9B68     		ldr	r3, [r3, #8]
 3615 00d2 1A46     		mov	r2, r3
 3616 00d4 F868     		ldr	r0, [r7, #12]
 3617 00d6 FFF7FEFF 		bl	Ft_Gpu_Hal_Wr32
1353:FT_Eve_Hal/FT_Gpu_Hal.c **** 
1354:FT_Eve_Hal/FT_Gpu_Hal.c **** 	return TotalBytes;
 3618              		.loc 1 1354 0
 3619 00da FB69     		ldr	r3, [r7, #28]
 3620              	.L159:
1355:FT_Eve_Hal/FT_Gpu_Hal.c **** }
 3621              		.loc 1 1355 0
 3622 00dc 1846     		mov	r0, r3
 3623 00de 2037     		adds	r7, r7, #32
 3624              	.LCFI254:
 3625              		.cfi_def_cfa_offset 8
 3626 00e0 BD46     		mov	sp, r7
 3627              	.LCFI255:
 3628              		.cfi_def_cfa_register 13
 3629              		@ sp needed
 3630 00e2 80BD     		pop	{r7, pc}
 3631              		.cfi_endproc
 3632              	.LFE188:
 3634              		.section	.text.Ft_Fifo_Write32,"ax",%progbits
 3635              		.align	1
 3636              		.global	Ft_Fifo_Write32
 3637              		.syntax unified
 3638              		.thumb
 3639              		.thumb_func
 3640              		.fpu fpv5-sp-d16
 3642              	Ft_Fifo_Write32:
 3643              	.LFB189:
ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 88


1356:FT_Eve_Hal/FT_Gpu_Hal.c **** //just write one word and update the write register
1357:FT_Eve_Hal/FT_Gpu_Hal.c **** ft_void_t Ft_Fifo_Write32(Ft_Gpu_Hal_Context_t *host, Ft_Fifo_t *pFifo,
1358:FT_Eve_Hal/FT_Gpu_Hal.c **** 		ft_uint32_t WriteWord) {
 3644              		.loc 1 1358 0
 3645              		.cfi_startproc
 3646              		@ args = 0, pretend = 0, frame = 16
 3647              		@ frame_needed = 1, uses_anonymous_args = 0
 3648 0000 80B5     		push	{r7, lr}
 3649              	.LCFI256:
 3650              		.cfi_def_cfa_offset 8
 3651              		.cfi_offset 7, -8
 3652              		.cfi_offset 14, -4
 3653 0002 84B0     		sub	sp, sp, #16
 3654              	.LCFI257:
 3655              		.cfi_def_cfa_offset 24
 3656 0004 00AF     		add	r7, sp, #0
 3657              	.LCFI258:
 3658              		.cfi_def_cfa_register 7
 3659 0006 F860     		str	r0, [r7, #12]
 3660 0008 B960     		str	r1, [r7, #8]
 3661 000a 7A60     		str	r2, [r7, #4]
1359:FT_Eve_Hal/FT_Gpu_Hal.c **** 	Ft_Fifo_Write(host, pFifo, (ft_uint8_t *) &WriteWord, 4);
 3662              		.loc 1 1359 0
 3663 000c 3A1D     		adds	r2, r7, #4
 3664 000e 0423     		movs	r3, #4
 3665 0010 B968     		ldr	r1, [r7, #8]
 3666 0012 F868     		ldr	r0, [r7, #12]
 3667 0014 FFF7FEFF 		bl	Ft_Fifo_Write
1360:FT_Eve_Hal/FT_Gpu_Hal.c **** }
 3668              		.loc 1 1360 0
 3669 0018 00BF     		nop
 3670 001a 1037     		adds	r7, r7, #16
 3671              	.LCFI259:
 3672              		.cfi_def_cfa_offset 8
 3673 001c BD46     		mov	sp, r7
 3674              	.LCFI260:
 3675              		.cfi_def_cfa_register 13
 3676              		@ sp needed
 3677 001e 80BD     		pop	{r7, pc}
 3678              		.cfi_endproc
 3679              	.LFE189:
 3681              		.section	.text.Ft_Fifo_WriteWait,"ax",%progbits
 3682              		.align	1
 3683              		.global	Ft_Fifo_WriteWait
 3684              		.syntax unified
 3685              		.thumb
 3686              		.thumb_func
 3687              		.fpu fpv5-sp-d16
 3689              	Ft_Fifo_WriteWait:
 3690              	.LFB190:
1361:FT_Eve_Hal/FT_Gpu_Hal.c **** //write and wait for the fifo to be empty. handle cases even if the Numbytes are more than freespac
1362:FT_Eve_Hal/FT_Gpu_Hal.c **** ft_void_t Ft_Fifo_WriteWait(Ft_Gpu_Hal_Context_t *host, Ft_Fifo_t *pFifo,
1363:FT_Eve_Hal/FT_Gpu_Hal.c **** 		ft_uint8_t *buffer, ft_uint32_t Numbyte) {
 3691              		.loc 1 1363 0
 3692              		.cfi_startproc
 3693              		@ args = 0, pretend = 0, frame = 32
 3694              		@ frame_needed = 1, uses_anonymous_args = 0
ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 89


 3695 0000 80B5     		push	{r7, lr}
 3696              	.LCFI261:
 3697              		.cfi_def_cfa_offset 8
 3698              		.cfi_offset 7, -8
 3699              		.cfi_offset 14, -4
 3700 0002 88B0     		sub	sp, sp, #32
 3701              	.LCFI262:
 3702              		.cfi_def_cfa_offset 40
 3703 0004 00AF     		add	r7, sp, #0
 3704              	.LCFI263:
 3705              		.cfi_def_cfa_register 7
 3706 0006 F860     		str	r0, [r7, #12]
 3707 0008 B960     		str	r1, [r7, #8]
 3708 000a 7A60     		str	r2, [r7, #4]
 3709 000c 3B60     		str	r3, [r7]
1364:FT_Eve_Hal/FT_Gpu_Hal.c **** 	ft_uint32_t TotalBytes = Numbyte, currchunk = 0, FreeSpace;
 3710              		.loc 1 1364 0
 3711 000e 3B68     		ldr	r3, [r7]
 3712 0010 FB61     		str	r3, [r7, #28]
 3713 0012 0023     		movs	r3, #0
 3714 0014 BB61     		str	r3, [r7, #24]
1365:FT_Eve_Hal/FT_Gpu_Hal.c **** 	ft_uint8_t *pbuff = buffer;
 3715              		.loc 1 1365 0
 3716 0016 7B68     		ldr	r3, [r7, #4]
 3717 0018 7B61     		str	r3, [r7, #20]
1366:FT_Eve_Hal/FT_Gpu_Hal.c **** 	/* blocking call, manage to check for the error case and break in case of error */
1367:FT_Eve_Hal/FT_Gpu_Hal.c **** 	while (TotalBytes > 0) {
 3718              		.loc 1 1367 0
 3719 001a 1AE0     		b	.L165
 3720              	.L167:
1368:FT_Eve_Hal/FT_Gpu_Hal.c **** 		currchunk = TotalBytes;
 3721              		.loc 1 1368 0
 3722 001c FB69     		ldr	r3, [r7, #28]
 3723 001e BB61     		str	r3, [r7, #24]
1369:FT_Eve_Hal/FT_Gpu_Hal.c **** 		FreeSpace = Ft_Fifo_GetFreeSpace(host, pFifo);
 3724              		.loc 1 1369 0
 3725 0020 B968     		ldr	r1, [r7, #8]
 3726 0022 F868     		ldr	r0, [r7, #12]
 3727 0024 FFF7FEFF 		bl	Ft_Fifo_GetFreeSpace
 3728 0028 3861     		str	r0, [r7, #16]
1370:FT_Eve_Hal/FT_Gpu_Hal.c **** 		if (currchunk > FreeSpace) {
 3729              		.loc 1 1370 0
 3730 002a BA69     		ldr	r2, [r7, #24]
 3731 002c 3B69     		ldr	r3, [r7, #16]
 3732 002e 9A42     		cmp	r2, r3
 3733 0030 01D9     		bls	.L166
1371:FT_Eve_Hal/FT_Gpu_Hal.c **** 			currchunk = FreeSpace;
 3734              		.loc 1 1371 0
 3735 0032 3B69     		ldr	r3, [r7, #16]
 3736 0034 BB61     		str	r3, [r7, #24]
 3737              	.L166:
1372:FT_Eve_Hal/FT_Gpu_Hal.c **** 		}
1373:FT_Eve_Hal/FT_Gpu_Hal.c **** 
1374:FT_Eve_Hal/FT_Gpu_Hal.c **** 		Ft_Fifo_Write(host, pFifo, pbuff, currchunk);
 3738              		.loc 1 1374 0
 3739 0036 BB69     		ldr	r3, [r7, #24]
 3740 0038 7A69     		ldr	r2, [r7, #20]
ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 90


 3741 003a B968     		ldr	r1, [r7, #8]
 3742 003c F868     		ldr	r0, [r7, #12]
 3743 003e FFF7FEFF 		bl	Ft_Fifo_Write
1375:FT_Eve_Hal/FT_Gpu_Hal.c **** 		pbuff += currchunk;
 3744              		.loc 1 1375 0
 3745 0042 7A69     		ldr	r2, [r7, #20]
 3746 0044 BB69     		ldr	r3, [r7, #24]
 3747 0046 1344     		add	r3, r3, r2
 3748 0048 7B61     		str	r3, [r7, #20]
1376:FT_Eve_Hal/FT_Gpu_Hal.c **** 		TotalBytes -= currchunk;
 3749              		.loc 1 1376 0
 3750 004a FA69     		ldr	r2, [r7, #28]
 3751 004c BB69     		ldr	r3, [r7, #24]
 3752 004e D31A     		subs	r3, r2, r3
 3753 0050 FB61     		str	r3, [r7, #28]
 3754              	.L165:
1367:FT_Eve_Hal/FT_Gpu_Hal.c **** 		currchunk = TotalBytes;
 3755              		.loc 1 1367 0
 3756 0052 FB69     		ldr	r3, [r7, #28]
 3757 0054 002B     		cmp	r3, #0
 3758 0056 E1D1     		bne	.L167
1377:FT_Eve_Hal/FT_Gpu_Hal.c **** 
1378:FT_Eve_Hal/FT_Gpu_Hal.c **** 	}
1379:FT_Eve_Hal/FT_Gpu_Hal.c **** }
 3759              		.loc 1 1379 0
 3760 0058 00BF     		nop
 3761 005a 2037     		adds	r7, r7, #32
 3762              	.LCFI264:
 3763              		.cfi_def_cfa_offset 8
 3764 005c BD46     		mov	sp, r7
 3765              	.LCFI265:
 3766              		.cfi_def_cfa_register 13
 3767              		@ sp needed
 3768 005e 80BD     		pop	{r7, pc}
 3769              		.cfi_endproc
 3770              	.LFE190:
 3772              		.section	.text.Ft_Fifo_GetFreeSpace,"ax",%progbits
 3773              		.align	1
 3774              		.global	Ft_Fifo_GetFreeSpace
 3775              		.syntax unified
 3776              		.thumb
 3777              		.thumb_func
 3778              		.fpu fpv5-sp-d16
 3780              	Ft_Fifo_GetFreeSpace:
 3781              	.LFB191:
1380:FT_Eve_Hal/FT_Gpu_Hal.c **** 
1381:FT_Eve_Hal/FT_Gpu_Hal.c **** #if defined(FT900_PLATFORM)
1382:FT_Eve_Hal/FT_Gpu_Hal.c **** ft_void_t getFlashTextString(char __flash__ *str, ft_uchar8_t *destArray, ft_uint16_t numOfChars) {
1383:FT_Eve_Hal/FT_Gpu_Hal.c **** 	ft_uint16_t i;
1384:FT_Eve_Hal/FT_Gpu_Hal.c **** 	for(i=0;i<numOfChars;i++)
1385:FT_Eve_Hal/FT_Gpu_Hal.c **** 	destArray[i] = str[i];
1386:FT_Eve_Hal/FT_Gpu_Hal.c **** }
1387:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
1388:FT_Eve_Hal/FT_Gpu_Hal.c **** 
1389:FT_Eve_Hal/FT_Gpu_Hal.c **** //get the free space in the fifo - make sure the return value is maximum of (LENGTH - 4)
1390:FT_Eve_Hal/FT_Gpu_Hal.c **** ft_uint32_t Ft_Fifo_GetFreeSpace(Ft_Gpu_Hal_Context_t *host, Ft_Fifo_t *pFifo) {
 3782              		.loc 1 1390 0
ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 91


 3783              		.cfi_startproc
 3784              		@ args = 0, pretend = 0, frame = 16
 3785              		@ frame_needed = 1, uses_anonymous_args = 0
 3786 0000 80B5     		push	{r7, lr}
 3787              	.LCFI266:
 3788              		.cfi_def_cfa_offset 8
 3789              		.cfi_offset 7, -8
 3790              		.cfi_offset 14, -4
 3791 0002 84B0     		sub	sp, sp, #16
 3792              	.LCFI267:
 3793              		.cfi_def_cfa_offset 24
 3794 0004 00AF     		add	r7, sp, #0
 3795              	.LCFI268:
 3796              		.cfi_def_cfa_register 7
 3797 0006 7860     		str	r0, [r7, #4]
 3798 0008 3960     		str	r1, [r7]
1391:FT_Eve_Hal/FT_Gpu_Hal.c **** 	ft_uint32_t FreeSpace = 0;
 3799              		.loc 1 1391 0
 3800 000a 0023     		movs	r3, #0
 3801 000c FB60     		str	r3, [r7, #12]
1392:FT_Eve_Hal/FT_Gpu_Hal.c **** 
1393:FT_Eve_Hal/FT_Gpu_Hal.c **** 	Ft_Fifo_Update(host, pFifo);
 3802              		.loc 1 1393 0
 3803 000e 3968     		ldr	r1, [r7]
 3804 0010 7868     		ldr	r0, [r7, #4]
 3805 0012 FFF7FEFF 		bl	Ft_Fifo_Update
1394:FT_Eve_Hal/FT_Gpu_Hal.c **** 
1395:FT_Eve_Hal/FT_Gpu_Hal.c **** 	if (pFifo->fifo_wp >= pFifo->fifo_rp) {
 3806              		.loc 1 1395 0
 3807 0016 3B68     		ldr	r3, [r7]
 3808 0018 9A68     		ldr	r2, [r3, #8]
 3809 001a 3B68     		ldr	r3, [r7]
 3810 001c DB68     		ldr	r3, [r3, #12]
 3811 001e 9A42     		cmp	r2, r3
 3812 0020 09DB     		blt	.L169
1396:FT_Eve_Hal/FT_Gpu_Hal.c **** 		FreeSpace = pFifo->fifo_len - pFifo->fifo_wp + pFifo->fifo_rp;
 3813              		.loc 1 1396 0
 3814 0022 3B68     		ldr	r3, [r7]
 3815 0024 5A68     		ldr	r2, [r3, #4]
 3816 0026 3B68     		ldr	r3, [r7]
 3817 0028 9B68     		ldr	r3, [r3, #8]
 3818 002a D21A     		subs	r2, r2, r3
 3819 002c 3B68     		ldr	r3, [r7]
 3820 002e DB68     		ldr	r3, [r3, #12]
 3821 0030 1344     		add	r3, r3, r2
 3822 0032 FB60     		str	r3, [r7, #12]
 3823 0034 05E0     		b	.L170
 3824              	.L169:
1397:FT_Eve_Hal/FT_Gpu_Hal.c **** 	} else {
1398:FT_Eve_Hal/FT_Gpu_Hal.c **** 		FreeSpace = pFifo->fifo_rp - pFifo->fifo_wp;
 3825              		.loc 1 1398 0
 3826 0036 3B68     		ldr	r3, [r7]
 3827 0038 DA68     		ldr	r2, [r3, #12]
 3828 003a 3B68     		ldr	r3, [r7]
 3829 003c 9B68     		ldr	r3, [r3, #8]
 3830 003e D31A     		subs	r3, r2, r3
 3831 0040 FB60     		str	r3, [r7, #12]
ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 92


 3832              	.L170:
1399:FT_Eve_Hal/FT_Gpu_Hal.c **** 	}
1400:FT_Eve_Hal/FT_Gpu_Hal.c **** 
1401:FT_Eve_Hal/FT_Gpu_Hal.c **** 	if (FreeSpace >= 4) {
 3833              		.loc 1 1401 0
 3834 0042 FB68     		ldr	r3, [r7, #12]
 3835 0044 032B     		cmp	r3, #3
 3836 0046 02D9     		bls	.L171
1402:FT_Eve_Hal/FT_Gpu_Hal.c **** 		FreeSpace -= 4;	//make sure 1 word space is maintained between rd and wr pointers
 3837              		.loc 1 1402 0
 3838 0048 FB68     		ldr	r3, [r7, #12]
 3839 004a 043B     		subs	r3, r3, #4
 3840 004c FB60     		str	r3, [r7, #12]
 3841              	.L171:
1403:FT_Eve_Hal/FT_Gpu_Hal.c **** 	}
1404:FT_Eve_Hal/FT_Gpu_Hal.c **** 	return FreeSpace;
 3842              		.loc 1 1404 0
 3843 004e FB68     		ldr	r3, [r7, #12]
1405:FT_Eve_Hal/FT_Gpu_Hal.c **** }
 3844              		.loc 1 1405 0
 3845 0050 1846     		mov	r0, r3
 3846 0052 1037     		adds	r7, r7, #16
 3847              	.LCFI269:
 3848              		.cfi_def_cfa_offset 8
 3849 0054 BD46     		mov	sp, r7
 3850              	.LCFI270:
 3851              		.cfi_def_cfa_register 13
 3852              		@ sp needed
 3853 0056 80BD     		pop	{r7, pc}
 3854              		.cfi_endproc
 3855              	.LFE191:
 3857              		.section	.text.Ft_Gpu_CurrentFrequency,"ax",%progbits
 3858              		.align	1
 3859              		.global	Ft_Gpu_CurrentFrequency
 3860              		.syntax unified
 3861              		.thumb
 3862              		.thumb_func
 3863              		.fpu fpv5-sp-d16
 3865              	Ft_Gpu_CurrentFrequency:
 3866              	.LFB192:
1406:FT_Eve_Hal/FT_Gpu_Hal.c **** 
1407:FT_Eve_Hal/FT_Gpu_Hal.c **** ft_uint32_t Ft_Gpu_CurrentFrequency(Ft_Gpu_Hal_Context_t *host) {
 3867              		.loc 1 1407 0
 3868              		.cfi_startproc
 3869              		@ args = 0, pretend = 0, frame = 32
 3870              		@ frame_needed = 1, uses_anonymous_args = 0
 3871 0000 80B5     		push	{r7, lr}
 3872              	.LCFI271:
 3873              		.cfi_def_cfa_offset 8
 3874              		.cfi_offset 7, -8
 3875              		.cfi_offset 14, -4
 3876 0002 88B0     		sub	sp, sp, #32
 3877              	.LCFI272:
 3878              		.cfi_def_cfa_offset 40
 3879 0004 00AF     		add	r7, sp, #0
 3880              	.LCFI273:
 3881              		.cfi_def_cfa_register 7
ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 93


 3882 0006 7860     		str	r0, [r7, #4]
1408:FT_Eve_Hal/FT_Gpu_Hal.c **** 	ft_uint32_t t0, t1;
1409:FT_Eve_Hal/FT_Gpu_Hal.c **** 	ft_uint32_t addr = REG_CLOCK;
 3883              		.loc 1 1409 0
 3884 0008 0B4B     		ldr	r3, .L175
 3885 000a FB61     		str	r3, [r7, #28]
1410:FT_Eve_Hal/FT_Gpu_Hal.c **** 	ft_uint8_t spidata[4];
1411:FT_Eve_Hal/FT_Gpu_Hal.c **** 	ft_int32_t r = 15625;
 3886              		.loc 1 1411 0
 3887 000c 43F60953 		movw	r3, #15625
 3888 0010 BB61     		str	r3, [r7, #24]
1412:FT_Eve_Hal/FT_Gpu_Hal.c **** 
1413:FT_Eve_Hal/FT_Gpu_Hal.c **** 	t0 = Ft_Gpu_Hal_Rd32(host, REG_CLOCK); /* t0 read */
 3889              		.loc 1 1413 0
 3890 0012 0949     		ldr	r1, .L175
 3891 0014 7868     		ldr	r0, [r7, #4]
 3892 0016 FFF7FEFF 		bl	Ft_Gpu_Hal_Rd32
 3893 001a 7861     		str	r0, [r7, #20]
1414:FT_Eve_Hal/FT_Gpu_Hal.c **** 
1415:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef FT900_PLATFORM
1416:FT_Eve_Hal/FT_Gpu_Hal.c **** 	__asm__
1417:FT_Eve_Hal/FT_Gpu_Hal.c **** 	(
1418:FT_Eve_Hal/FT_Gpu_Hal.c **** 			"   move.l  $r0,%0" "\n\t"
1419:FT_Eve_Hal/FT_Gpu_Hal.c **** 			"   mul.l   $r0,$r0,100" "\n\t"
1420:FT_Eve_Hal/FT_Gpu_Hal.c **** 			"1:" "\n\t"
1421:FT_Eve_Hal/FT_Gpu_Hal.c **** 			"   sub.l   $r0,$r0,3" "\n\t" /* Subtract the loop time = 4 cycles */
1422:FT_Eve_Hal/FT_Gpu_Hal.c **** 			"   cmp.l   $r0,0" "\n\t" /* Check that the counter is equal to 0 */
1423:FT_Eve_Hal/FT_Gpu_Hal.c **** 			"   jmpc    gt, 1b" "\n\t"
1424:FT_Eve_Hal/FT_Gpu_Hal.c **** 			/* Outputs */:
1425:FT_Eve_Hal/FT_Gpu_Hal.c **** 			/* Inputs */: "r"(r)
1426:FT_Eve_Hal/FT_Gpu_Hal.c **** 			/* Using */: "$r0"
1427:FT_Eve_Hal/FT_Gpu_Hal.c **** 
1428:FT_Eve_Hal/FT_Gpu_Hal.c **** 	);
1429:FT_Eve_Hal/FT_Gpu_Hal.c **** 
1430:FT_Eve_Hal/FT_Gpu_Hal.c **** 	//usleep(15625);
1431:FT_Eve_Hal/FT_Gpu_Hal.c **** 	//ft_delay(15625);
1432:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
1433:FT_Eve_Hal/FT_Gpu_Hal.c **** #if (defined(MSVC_PLATFORM) || defined(MSVC_FT800EMU))
1434:FT_Eve_Hal/FT_Gpu_Hal.c **** 	//may not be precise
1435:FT_Eve_Hal/FT_Gpu_Hal.c **** 	Sleep(15625/1000);
1436:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
1437:FT_Eve_Hal/FT_Gpu_Hal.c **** #ifdef ARDUINO_PLATFORM
1438:FT_Eve_Hal/FT_Gpu_Hal.c **** 	delayMicroseconds(15625);
1439:FT_Eve_Hal/FT_Gpu_Hal.c **** #endif
1440:FT_Eve_Hal/FT_Gpu_Hal.c **** 
1441:FT_Eve_Hal/FT_Gpu_Hal.c **** 	t1 = Ft_Gpu_Hal_Rd32(host, REG_CLOCK); /* t1 read */
 3894              		.loc 1 1441 0
 3895 001c 0649     		ldr	r1, .L175
 3896 001e 7868     		ldr	r0, [r7, #4]
 3897 0020 FFF7FEFF 		bl	Ft_Gpu_Hal_Rd32
 3898 0024 3861     		str	r0, [r7, #16]
1442:FT_Eve_Hal/FT_Gpu_Hal.c **** 	return ((t1 - t0) * 64); /* bitshift 6 places is the same as multiplying 64 */
 3899              		.loc 1 1442 0
 3900 0026 3A69     		ldr	r2, [r7, #16]
 3901 0028 7B69     		ldr	r3, [r7, #20]
 3902 002a D31A     		subs	r3, r2, r3
 3903 002c 9B01     		lsls	r3, r3, #6
ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 94


1443:FT_Eve_Hal/FT_Gpu_Hal.c **** }
 3904              		.loc 1 1443 0
 3905 002e 1846     		mov	r0, r3
 3906 0030 2037     		adds	r7, r7, #32
 3907              	.LCFI274:
 3908              		.cfi_def_cfa_offset 8
 3909 0032 BD46     		mov	sp, r7
 3910              	.LCFI275:
 3911              		.cfi_def_cfa_register 13
 3912              		@ sp needed
 3913 0034 80BD     		pop	{r7, pc}
 3914              	.L176:
 3915 0036 00BF     		.align	2
 3916              	.L175:
 3917 0038 08203000 		.word	3153928
 3918              		.cfi_endproc
 3919              	.LFE192:
 3921              		.section	.text.Ft_Gpu_ClockTrimming,"ax",%progbits
 3922              		.align	1
 3923              		.global	Ft_Gpu_ClockTrimming
 3924              		.syntax unified
 3925              		.thumb
 3926              		.thumb_func
 3927              		.fpu fpv5-sp-d16
 3929              	Ft_Gpu_ClockTrimming:
 3930              	.LFB193:
1444:FT_Eve_Hal/FT_Gpu_Hal.c **** 
1445:FT_Eve_Hal/FT_Gpu_Hal.c **** ft_int32_t Ft_Gpu_ClockTrimming(Ft_Gpu_Hal_Context_t *host, ft_int32_t LowFreq) {
 3931              		.loc 1 1445 0
 3932              		.cfi_startproc
 3933              		@ args = 0, pretend = 0, frame = 16
 3934              		@ frame_needed = 1, uses_anonymous_args = 0
 3935 0000 80B5     		push	{r7, lr}
 3936              	.LCFI276:
 3937              		.cfi_def_cfa_offset 8
 3938              		.cfi_offset 7, -8
 3939              		.cfi_offset 14, -4
 3940 0002 84B0     		sub	sp, sp, #16
 3941              	.LCFI277:
 3942              		.cfi_def_cfa_offset 24
 3943 0004 00AF     		add	r7, sp, #0
 3944              	.LCFI278:
 3945              		.cfi_def_cfa_register 7
 3946 0006 7860     		str	r0, [r7, #4]
 3947 0008 3960     		str	r1, [r7]
1446:FT_Eve_Hal/FT_Gpu_Hal.c **** 	ft_uint32_t f;
1447:FT_Eve_Hal/FT_Gpu_Hal.c **** 	ft_uint8_t i;
1448:FT_Eve_Hal/FT_Gpu_Hal.c **** 
1449:FT_Eve_Hal/FT_Gpu_Hal.c **** 	/* Trim the internal clock by increase the REG_TRIM register till the measured frequency is within
1450:FT_Eve_Hal/FT_Gpu_Hal.c **** 	for (i = 0; (i < 31) && ((f = Ft_Gpu_CurrentFrequency(host)) < LowFreq);
 3948              		.loc 1 1450 0
 3949 000a 0023     		movs	r3, #0
 3950 000c FB72     		strb	r3, [r7, #11]
 3951 000e 08E0     		b	.L178
 3952              	.L180:
1451:FT_Eve_Hal/FT_Gpu_Hal.c **** 			i++) {
1452:FT_Eve_Hal/FT_Gpu_Hal.c **** 		Ft_Gpu_Hal_Wr8(host, REG_TRIM, i); /* increase the REG_TRIM register value automatically increase
ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 95


 3953              		.loc 1 1452 0
 3954 0010 FB7A     		ldrb	r3, [r7, #11]	@ zero_extendqisi2
 3955 0012 1A46     		mov	r2, r3
 3956 0014 0D49     		ldr	r1, .L182
 3957 0016 7868     		ldr	r0, [r7, #4]
 3958 0018 FFF7FEFF 		bl	Ft_Gpu_Hal_Wr8
1451:FT_Eve_Hal/FT_Gpu_Hal.c **** 			i++) {
 3959              		.loc 1 1451 0
 3960 001c FB7A     		ldrb	r3, [r7, #11]	@ zero_extendqisi2
 3961 001e 0133     		adds	r3, r3, #1
 3962 0020 FB72     		strb	r3, [r7, #11]
 3963              	.L178:
1450:FT_Eve_Hal/FT_Gpu_Hal.c **** 			i++) {
 3964              		.loc 1 1450 0 discriminator 1
 3965 0022 FB7A     		ldrb	r3, [r7, #11]	@ zero_extendqisi2
 3966 0024 1E2B     		cmp	r3, #30
 3967 0026 07D8     		bhi	.L179
1450:FT_Eve_Hal/FT_Gpu_Hal.c **** 			i++) {
 3968              		.loc 1 1450 0 is_stmt 0 discriminator 2
 3969 0028 7868     		ldr	r0, [r7, #4]
 3970 002a FFF7FEFF 		bl	Ft_Gpu_CurrentFrequency
 3971 002e F860     		str	r0, [r7, #12]
 3972 0030 3B68     		ldr	r3, [r7]
 3973 0032 FA68     		ldr	r2, [r7, #12]
 3974 0034 9A42     		cmp	r2, r3
 3975 0036 EBD3     		bcc	.L180
 3976              	.L179:
1453:FT_Eve_Hal/FT_Gpu_Hal.c **** 
1454:FT_Eve_Hal/FT_Gpu_Hal.c **** 	}
1455:FT_Eve_Hal/FT_Gpu_Hal.c **** 
1456:FT_Eve_Hal/FT_Gpu_Hal.c **** 	Ft_Gpu_Hal_Wr32(host, REG_FREQUENCY, f); /* Set the final frequency to be used for internal operat
 3977              		.loc 1 1456 0 is_stmt 1
 3978 0038 FA68     		ldr	r2, [r7, #12]
 3979 003a 0549     		ldr	r1, .L182+4
 3980 003c 7868     		ldr	r0, [r7, #4]
 3981 003e FFF7FEFF 		bl	Ft_Gpu_Hal_Wr32
1457:FT_Eve_Hal/FT_Gpu_Hal.c **** 
1458:FT_Eve_Hal/FT_Gpu_Hal.c **** 	return f;
 3982              		.loc 1 1458 0
 3983 0042 FB68     		ldr	r3, [r7, #12]
1459:FT_Eve_Hal/FT_Gpu_Hal.c **** }
 3984              		.loc 1 1459 0
 3985 0044 1846     		mov	r0, r3
 3986 0046 1037     		adds	r7, r7, #16
 3987              	.LCFI279:
 3988              		.cfi_def_cfa_offset 8
 3989 0048 BD46     		mov	sp, r7
 3990              	.LCFI280:
 3991              		.cfi_def_cfa_register 13
 3992              		@ sp needed
 3993 004a 80BD     		pop	{r7, pc}
 3994              	.L183:
 3995              		.align	2
 3996              	.L182:
 3997 004c 80213000 		.word	3154304
 3998 0050 0C203000 		.word	3153932
 3999              		.cfi_endproc
ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 96


 4000              	.LFE193:
 4002              		.text
 4003              	.Letext0:
 4004              		.file 2 "/usr/local/Cellar/arm-none-eabi-gcc/20180627/arm-none-eabi/include/machine/_default_types
 4005              		.file 3 "/usr/local/Cellar/arm-none-eabi-gcc/20180627/arm-none-eabi/include/sys/lock.h"
 4006              		.file 4 "/usr/local/Cellar/arm-none-eabi-gcc/20180627/arm-none-eabi/include/sys/_types.h"
 4007              		.file 5 "/usr/local/Cellar/arm-none-eabi-gcc/20180627/lib/gcc/arm-none-eabi/7.3.1/include/stddef.h
 4008              		.file 6 "/usr/local/Cellar/arm-none-eabi-gcc/20180627/arm-none-eabi/include/sys/_stdint.h"
 4009              		.file 7 "/usr/local/Cellar/arm-none-eabi-gcc/20180627/arm-none-eabi/include/sys/unistd.h"
 4010              		.file 8 "/usr/local/Cellar/arm-none-eabi-gcc/20180627/arm-none-eabi/include/sys/reent.h"
 4011              		.file 9 "/usr/local/Cellar/arm-none-eabi-gcc/20180627/arm-none-eabi/include/stdlib.h"
 4012              		.file 10 "FT_Eve_Hal/FT_DataTypes.h"
 4013              		.file 11 "FT_Eve_Hal/FT_Gpu_Hal.h"
 4014              		.file 12 "Drivers/CMSIS/Include/core_cm7.h"
 4015              		.file 13 "Drivers/CMSIS/Device/ST/STM32F7xx/Include/system_stm32f7xx.h"
 4016              		.file 14 "Drivers/CMSIS/Device/ST/STM32F7xx/Include/stm32f746xx.h"
 4017              		.file 15 "Drivers/STM32F7xx_HAL_Driver/Inc/stm32f7xx_hal_def.h"
 4018              		.file 16 "Drivers/STM32F7xx_HAL_Driver/Inc/stm32f7xx_hal_gpio.h"
 4019              		.file 17 "Drivers/STM32F7xx_HAL_Driver/Inc/stm32f7xx_hal_dma.h"
 4020              		.file 18 "Drivers/STM32F7xx_HAL_Driver/Inc/stm32f7xx_hal_spi.h"
 4021              		.file 19 "Drivers/STM32F7xx_HAL_Driver/Inc/stm32f7xx_hal_uart.h"
ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 97


DEFINED SYMBOLS
                            *ABS*:0000000000000000 FT_Gpu_Hal.c
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:18     .text.Ft_Gpu_Hal_Init:0000000000000000 $t
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:25     .text.Ft_Gpu_Hal_Init:0000000000000000 Ft_Gpu_Hal_Init
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:64     .text.Ft_Gpu_Hal_Open:0000000000000000 $t
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:71     .text.Ft_Gpu_Hal_Open:0000000000000000 Ft_Gpu_Hal_Open
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:129    .text.Ft_Gpu_Hal_Close:0000000000000000 $t
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:136    .text.Ft_Gpu_Hal_Close:0000000000000000 Ft_Gpu_Hal_Close
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:176    .text.Ft_Gpu_Hal_DeInit:0000000000000000 $t
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:183    .text.Ft_Gpu_Hal_DeInit:0000000000000000 Ft_Gpu_Hal_DeInit
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:212    .rodata:0000000000000000 $d
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:219    .text.Ft_Gpu_Hal_StartTransfer:0000000000000000 $t
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:226    .text.Ft_Gpu_Hal_StartTransfer:0000000000000000 Ft_Gpu_Hal_StartTransfer
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:409    .text.Ft_Gpu_Hal_StartTransfer:00000000000000f8 $d
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:417    .text.Ft_Gpu_Hal_StartCmdTransfer:0000000000000000 $t
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:424    .text.Ft_Gpu_Hal_StartCmdTransfer:0000000000000000 Ft_Gpu_Hal_StartCmdTransfer
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:468    .text.Ft_Gpu_Hal_TransferString:0000000000000000 $t
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:475    .text.Ft_Gpu_Hal_TransferString:0000000000000000 Ft_Gpu_Hal_TransferString
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:551    .text.Ft_Gpu_Hal_Transfer8:0000000000000000 Ft_Gpu_Hal_Transfer8
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:544    .text.Ft_Gpu_Hal_Transfer8:0000000000000000 $t
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:622    .text.Ft_Gpu_Hal_Transfer8:0000000000000058 $d
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:629    .text.Ft_Gpu_Hal_Transfer16:0000000000000000 $t
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:636    .text.Ft_Gpu_Hal_Transfer16:0000000000000000 Ft_Gpu_Hal_Transfer16
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:714    .text.Ft_Gpu_Hal_Transfer32:0000000000000000 $t
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:721    .text.Ft_Gpu_Hal_Transfer32:0000000000000000 Ft_Gpu_Hal_Transfer32
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:795    .text.Ft_Gpu_Hal_EndTransfer:0000000000000000 $t
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:802    .text.Ft_Gpu_Hal_EndTransfer:0000000000000000 Ft_Gpu_Hal_EndTransfer
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:842    .text.Ft_Gpu_Hal_EndTransfer:0000000000000020 $d
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:847    .text.Ft_Gpu_Hal_Rd8:0000000000000000 $t
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:854    .text.Ft_Gpu_Hal_Rd8:0000000000000000 Ft_Gpu_Hal_Rd8
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:900    .text.Ft_Gpu_Hal_Rd16:0000000000000000 $t
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:907    .text.Ft_Gpu_Hal_Rd16:0000000000000000 Ft_Gpu_Hal_Rd16
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:956    .text.Ft_Gpu_Hal_Rd32:0000000000000000 $t
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:963    .text.Ft_Gpu_Hal_Rd32:0000000000000000 Ft_Gpu_Hal_Rd32
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:1011   .text.Ft_Gpu_Hal_Wr8:0000000000000000 $t
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:1018   .text.Ft_Gpu_Hal_Wr8:0000000000000000 Ft_Gpu_Hal_Wr8
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:1066   .text.Ft_Gpu_Hal_Wr16:0000000000000000 $t
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:1073   .text.Ft_Gpu_Hal_Wr16:0000000000000000 Ft_Gpu_Hal_Wr16
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:1121   .text.Ft_Gpu_Hal_Wr32:0000000000000000 $t
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:1128   .text.Ft_Gpu_Hal_Wr32:0000000000000000 Ft_Gpu_Hal_Wr32
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:1178   .text.Ft_Gpu_HostCommand:0000000000000000 $t
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:1185   .text.Ft_Gpu_HostCommand:0000000000000000 Ft_Gpu_HostCommand
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:1277   .text.Ft_Gpu_HostCommand:0000000000000070 $d
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:1285   .text.Ft_Gpu_ClockSelect:0000000000000000 $t
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:1292   .text.Ft_Gpu_ClockSelect:0000000000000000 Ft_Gpu_ClockSelect
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:1331   .text.Ft_Gpu_PLL_FreqSelect:0000000000000000 $t
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:1338   .text.Ft_Gpu_PLL_FreqSelect:0000000000000000 Ft_Gpu_PLL_FreqSelect
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:1377   .text.Ft_Gpu_PowerModeSwitch:0000000000000000 $t
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:1384   .text.Ft_Gpu_PowerModeSwitch:0000000000000000 Ft_Gpu_PowerModeSwitch
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:1423   .text.Ft_Gpu_CoreReset:0000000000000000 $t
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:1430   .text.Ft_Gpu_CoreReset:0000000000000000 Ft_Gpu_CoreReset
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:1466   .text.Ft_Gpu_81X_SelectSysCLK:0000000000000000 $t
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:1473   .text.Ft_Gpu_81X_SelectSysCLK:0000000000000000 Ft_Gpu_81X_SelectSysCLK
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:1767   .text.Ft_Gpu_HostCommand_Ext3:0000000000000000 Ft_Gpu_HostCommand_Ext3
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:1571   .text.Ft_GPU_81X_PowerOffComponents:0000000000000000 $t
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:1578   .text.Ft_GPU_81X_PowerOffComponents:0000000000000000 Ft_GPU_81X_PowerOffComponents
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:1619   .text.Ft_GPU_81X_PadDriveStrength:0000000000000000 $t
ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 98


/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:1626   .text.Ft_GPU_81X_PadDriveStrength:0000000000000000 Ft_GPU_81X_PadDriveStrength
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:1674   .text.Ft_Gpu_81X_ResetActive:0000000000000000 $t
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:1681   .text.Ft_Gpu_81X_ResetActive:0000000000000000 Ft_Gpu_81X_ResetActive
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:1717   .text.Ft_Gpu_81X_ResetRemoval:0000000000000000 $t
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:1724   .text.Ft_Gpu_81X_ResetRemoval:0000000000000000 Ft_Gpu_81X_ResetRemoval
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:1760   .text.Ft_Gpu_HostCommand_Ext3:0000000000000000 $t
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:1862   .text.Ft_Gpu_HostCommand_Ext3:0000000000000074 $d
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:1870   .text.Ft_Gpu_Hal_Updatecmdfifo:0000000000000000 $t
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:1877   .text.Ft_Gpu_Hal_Updatecmdfifo:0000000000000000 Ft_Gpu_Hal_Updatecmdfifo
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:1937   .text.Ft_Gpu_Hal_Updatecmdfifo:000000000000004c $d
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:1942   .text.Ft_Gpu_Cmdfifo_Freespace:0000000000000000 $t
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:1949   .text.Ft_Gpu_Cmdfifo_Freespace:0000000000000000 Ft_Gpu_Cmdfifo_Freespace
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:2001   .text.Ft_Gpu_Cmdfifo_Freespace:0000000000000034 $d
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:2006   .text.Ft_Gpu_Hal_WrCmdBuf:0000000000000000 $t
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:2013   .text.Ft_Gpu_Hal_WrCmdBuf:0000000000000000 Ft_Gpu_Hal_WrCmdBuf
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:2139   .text.Ft_Gpu_Hal_CheckCmdBuffer:0000000000000000 Ft_Gpu_Hal_CheckCmdBuffer
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:2190   .text.Ft_Gpu_Hal_WaitCmdfifo_empty:0000000000000000 Ft_Gpu_Hal_WaitCmdfifo_empty
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:2132   .text.Ft_Gpu_Hal_CheckCmdBuffer:0000000000000000 $t
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:2183   .text.Ft_Gpu_Hal_WaitCmdfifo_empty:0000000000000000 $t
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:2247   .text.Ft_Gpu_Hal_WaitCmdfifo_empty:000000000000003c $d
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:2253   .text.Ft_Gpu_Hal_WrCmdBuf_nowait:0000000000000000 $t
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:2260   .text.Ft_Gpu_Hal_WrCmdBuf_nowait:0000000000000000 Ft_Gpu_Hal_WrCmdBuf_nowait
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:2374   .text.Ft_Gpu_Hal_WaitCmdfifo_empty_status:0000000000000000 $t
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:2381   .text.Ft_Gpu_Hal_WaitCmdfifo_empty_status:0000000000000000 Ft_Gpu_Hal_WaitCmdfifo_empty_status
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:2442   .text.Ft_Gpu_Hal_WaitCmdfifo_empty_status:0000000000000040 $d
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:2448   .text.Ft_Gpu_Hal_WaitLogo_Finish:0000000000000000 $t
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:2455   .text.Ft_Gpu_Hal_WaitLogo_Finish:0000000000000000 Ft_Gpu_Hal_WaitLogo_Finish
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:2512   .text.Ft_Gpu_Hal_WaitLogo_Finish:0000000000000044 $d
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:2518   .text.Ft_Gpu_Hal_ResetCmdFifo:0000000000000000 $t
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:2525   .text.Ft_Gpu_Hal_ResetCmdFifo:0000000000000000 Ft_Gpu_Hal_ResetCmdFifo
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:2565   .text.Ft_Gpu_Hal_WrCmd32:0000000000000000 $t
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:2572   .text.Ft_Gpu_Hal_WrCmd32:0000000000000000 Ft_Gpu_Hal_WrCmd32
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:2621   .text.Ft_Gpu_Hal_ResetDLBuffer:0000000000000000 $t
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:2628   .text.Ft_Gpu_Hal_ResetDLBuffer:0000000000000000 Ft_Gpu_Hal_ResetDLBuffer
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:2668   .text.Ft_Gpu_Hal_Powercycle:0000000000000000 $t
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:2675   .text.Ft_Gpu_Hal_Powercycle:0000000000000000 Ft_Gpu_Hal_Powercycle
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:2748   .text.Ft_Gpu_Hal_Powercycle:000000000000005c $d
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:2753   .text.Ft_Gpu_Hal_WrMemFromFlash:0000000000000000 $t
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:2760   .text.Ft_Gpu_Hal_WrMemFromFlash:0000000000000000 Ft_Gpu_Hal_WrMemFromFlash
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:2826   .text.Ft_Gpu_Hal_WrMem:0000000000000000 $t
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:2833   .text.Ft_Gpu_Hal_WrMem:0000000000000000 Ft_Gpu_Hal_WrMem
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:2899   .text.Ft_Gpu_Hal_RdMem:0000000000000000 $t
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:2906   .text.Ft_Gpu_Hal_RdMem:0000000000000000 Ft_Gpu_Hal_RdMem
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:2974   .text.Ft_Gpu_Hal_Dec2Ascii:0000000000000000 $t
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:2981   .text.Ft_Gpu_Hal_Dec2Ascii:0000000000000000 Ft_Gpu_Hal_Dec2Ascii
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:3138   .text.Ft_Gpu_Hal_Dec2Ascii:00000000000000ec $d
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:3143   .text.Ft_Gpu_Hal_Sleep:0000000000000000 $t
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:3150   .text.Ft_Gpu_Hal_Sleep:0000000000000000 Ft_Gpu_Hal_Sleep
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:3185   .text.Ft_Gpu_Hal_SetSPI:0000000000000000 $t
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:3192   .text.Ft_Gpu_Hal_SetSPI:0000000000000000 Ft_Gpu_Hal_SetSPI
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:3278   .text.Ft_Gpu_Hal_SetSPI:0000000000000064 $d
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:3283   .text.ft_millis:0000000000000000 $t
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:3290   .text.ft_millis:0000000000000000 ft_millis
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:3314   .text.ft_millis_exit:0000000000000000 $t
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:3321   .text.ft_millis_exit:0000000000000000 ft_millis_exit
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:3350   .text.Ft_Fifo_Init:0000000000000000 $t
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:3357   .text.Ft_Fifo_Init:0000000000000000 Ft_Fifo_Init
ARM GAS  /var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s 			page 99


/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:3420   .text.Ft_Fifo_Update:0000000000000000 $t
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:3427   .text.Ft_Fifo_Update:0000000000000000 Ft_Fifo_Update
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:3470   .text.Ft_Fifo_Write:0000000000000000 $t
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:3477   .text.Ft_Fifo_Write:0000000000000000 Ft_Fifo_Write
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:3780   .text.Ft_Fifo_GetFreeSpace:0000000000000000 Ft_Fifo_GetFreeSpace
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:3635   .text.Ft_Fifo_Write32:0000000000000000 $t
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:3642   .text.Ft_Fifo_Write32:0000000000000000 Ft_Fifo_Write32
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:3682   .text.Ft_Fifo_WriteWait:0000000000000000 $t
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:3689   .text.Ft_Fifo_WriteWait:0000000000000000 Ft_Fifo_WriteWait
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:3773   .text.Ft_Fifo_GetFreeSpace:0000000000000000 $t
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:3858   .text.Ft_Gpu_CurrentFrequency:0000000000000000 $t
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:3865   .text.Ft_Gpu_CurrentFrequency:0000000000000000 Ft_Gpu_CurrentFrequency
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:3917   .text.Ft_Gpu_CurrentFrequency:0000000000000038 $d
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:3922   .text.Ft_Gpu_ClockTrimming:0000000000000000 $t
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:3929   .text.Ft_Gpu_ClockTrimming:0000000000000000 Ft_Gpu_ClockTrimming
/var/folders/n8/cvzdcwlj0vl4g_wtyz1ffy300000gn/T//cc3hjIJl.s:3997   .text.Ft_Gpu_ClockTrimming:000000000000004c $d

UNDEFINED SYMBOLS
HAL_GPIO_WritePin
HAL_SPI_Transmit
my_printf
hspi1
strlen
HAL_SPI_Receive
HAL_Delay
HAL_GetTick
